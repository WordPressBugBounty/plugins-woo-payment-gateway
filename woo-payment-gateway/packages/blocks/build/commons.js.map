{"version":3,"file":"commons.js","mappings":"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","sources":["webpack://wcBraintree/./packages/blocks/assets/js/components/error-boundary/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/fastlane-link/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/fastlane-modal/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/notice/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/payment-method-label/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/payment-method/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/saved-token-component/index.js","webpack://wcBraintree/./packages/blocks/assets/js/data/checkout/action-types.js","webpack://wcBraintree/./packages/blocks/assets/js/data/checkout/actions.js","webpack://wcBraintree/./packages/blocks/assets/js/data/checkout/constants.js","webpack://wcBraintree/./packages/blocks/assets/js/data/checkout/index.js","webpack://wcBraintree/./packages/blocks/assets/js/data/checkout/reducers.js","webpack://wcBraintree/./packages/blocks/assets/js/data/checkout/selectors.js","webpack://wcBraintree/./packages/blocks/assets/js/data/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/applepay/hooks/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/applepay/hooks/use-create-payment-request.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/applepay/hooks/use-create-session.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/applepay/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/applepay/preview.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/applepay/utils.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/context/action-emitter.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/context/action-reducer.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/context/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/context/payment-context.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/custom-form/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/custom-form/registry.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/custom-forms/bootstrap/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/custom-forms/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/custom-forms/simple/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/dropin-form/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/dropin-preview.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/hosted-fields/card-cvv.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/hosted-fields/card-expiration-date.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/hosted-fields/card-number.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/hosted-fields/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/tokenized-card.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/fastlane/checkout-block/block.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/fastlane/checkout-block/frontend.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/fastlane/express-payment-component.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/fastlane/hooks/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/fastlane/hooks/use-create-fastlane.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/fastlane/hooks/use-process-fastlane.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/fastlane/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/googlepay/helpers.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/googlepay/hooks/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/googlepay/hooks/use-create-payments-client.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/googlepay/hooks/use-handle-tokenization.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/googlepay/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/googlepay/preview.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-breakpoint-width.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-device-data.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-manage-fastlane-payment-token.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-notice-handler.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-payment-events-handler.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-process-fastlane-payment-token.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-process-payment-failure.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-process-payment.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-three-d-secure.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/paypal/hooks/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/paypal/hooks/use-load-paypal.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/paypal/hooks/use-paypal-options.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/paypal/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/paypal/preview.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/utils.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/venmo/hooks/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/venmo/hooks/use-handle-tokenization.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/venmo/index.js","webpack://wcBraintree/./node_modules/classnames/index.js"],"sourcesContent":["import {Component} from '@wordpress/element';\n\nclass ErrorBoundary extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {hasError: false, error: null, errorInfo: null};\n    }\n\n    componentDidCatch(error, errorInfo) {\n        this.setState({\n            hasError: true,\n            error,\n            errorInfo\n        })\n    }\n\n    render() {\n        if (this.state.hasError) {\n            return (\n                <>\n                    {this.state.error &&\n                    <div className='wc-braintree-blocks__error'>{this.state.error.toString()}</div>}\n                    {this.state.errorInfo &&\n                    <div className='wc-braintree-blocks__error'>{this.state.errorInfo.componentStack}</div>}\n                </>\n            )\n        }\n        return this.props.children;\n    }\n}\n\nexport default ErrorBoundary;","export const FastlaneLink = ({onClick, text, logo}) => {\n    return (\n        <div\n            className=\"fastlane-signup-link-container\"\n            onClick={onClick}>\n            <span>{text}</span>\n            <img className=\"fastlane-signup-img\" src={logo}/>\n        </div>\n    )\n}","import {useEffect, useState, useRef, useCallback} from '@wordpress/element';\nimport classnames from 'classnames';\n\nexport const FastlaneModal = (\n    {\n        i18n,\n        open,\n        onClose,\n        fastlane,\n        onTokenize,\n        shippingData\n    }) => {\n    const [rendered, setRendered] = useState(false);\n    const currentData = useRef({fastlane, shippingData});\n\n    const onClick = useCallback(async (e) => {\n        e.preventDefault();\n        try {\n            const {\n                paymentComponent\n            } = currentData.current;\n\n            const response = await paymentComponent.getPaymentToken();\n\n            // call onTokenize\n            onTokenize(response);\n\n            // close modal\n            onClose(true);\n            setRendered(false);\n        } catch (error) {\n            console.log('Error tokenizing payment method. ', error);\n        }\n    }, []);\n\n    useEffect(() => {\n        currentData.current = {\n            ...currentData.current,\n            fastlane,\n            shippingData\n        };\n    }, [fastlane, shippingData]);\n\n    useEffect(() => {\n        if (open) {\n            const {\n                shippingData\n            } = currentData.current;\n            const {\n                needsShipping,\n                shippingAddress\n            } = shippingData;\n            const props = {\n                ...(needsShipping && {\n                    shippingAddress: {\n                        firstName: shippingAddress.first_name || '',\n                        lastName: shippingAddress.last_name || '',\n                        streetAddress: shippingAddress.address_1 || '',\n                        extendedAddress: shippingAddress.address_2 || '',\n                        locality: shippingAddress.city || '',\n                        region: shippingAddress.state || '',\n                        postalCode: shippingAddress.postcode || '',\n                        countryCodeAlpha2: shippingAddress.country || '',\n                        phoneNumber: shippingAddress.phone || '',\n                    }\n                })\n            }\n            fastlane.FastlanePaymentComponent(props).then(async instance => {\n                currentData.current.paymentComponent = instance;\n                await instance.render('.wc-ppcp-fastlane-modal-body');\n                document.body.classList.add('fastlane-modal-open');\n                setTimeout(() => {\n                    setRendered(true);\n                }, 250);\n            });\n        } else {\n            document.body.classList.remove('fastlane-modal-open');\n        }\n\n        return () => document.body.classList.remove('fastlane-modal-open');\n    }, [open]);\n\n    return (\n        <div className={classnames('wc-ppcp-fastlane-overlay', {'active': rendered})}>\n            <div className=\"wc-ppcp-fastlane-modal\">\n                <div className=\"wc-ppcp-fastlane-modal-body\">\n\n                </div>\n                <div className=\"wc-ppcp-fastlane-modal-buttons\">\n                    <button\n                        className=\"wc-ppcp-fastlane-tokenize\"\n                        onClick={onClick}>\n                        {i18n.continue}\n                    </button>\n                    <a\n                        className=\"wc-ppcp-fastlane-cancel\"\n                        onClick={() => {\n                            setRendered(false);\n                            onClose();\n                        }}>\n                        {i18n.cancel}\n                    </a>\n                </div>\n            </div>\n        </div>\n    )\n}","export * from './notice';\nexport * from './payment-method';\nexport * from './payment-method-label';\nexport * from './saved-token-component';\nexport * from './fastlane-link';\nexport * from './fastlane-modal';","import classNames from \"classnames\";\nimport {Notice as WordpressNotice} from '@wordpress/components';\n\nexport const Notice = ({notice, onRemove}) => {\n    const classes = classNames(`wc-braintree-blocks__notice ${notice.type}`);\n    return (\n        <WordpressNotice\n            key={`notice-${notice.type}`}\n            className={classes}\n            onRemove={() => {\n                if (notice.isDismissible) {\n                    onRemove();\n                }\n            }} {...notice}>\n            {notice.message}\n        </WordpressNotice>\n    )\n}\n\nexport default Notice;","export const PaymentMethodLabel = ({title, paymentMethod, components, icon = []}) => {\n    const {PaymentMethodLabel: Label, PaymentMethodIcons: Icons} = components;\n    if (!Array.isArray(icon)) {\n        icon = [icon];\n    }\n    return (\n        <span className={'wc-braintree-blocks-paymentMethod__label'}>\n            <Label text={title}/>\n            <Icons icons={icon} align='left'/>\n        </span>\n    )\n}\n\nexport default PaymentMethodLabel;","import {useRef, useState, useEffect} from '@wordpress/element';\nimport {PaymentMethodDataProvider, usePaymentMethodDataContext} from '../../payment-methods/context';\nimport {useProcessPayment, useProcessPaymentFailure} from \"../../payment-methods/hooks\";\n\nexport const PaymentMethod = ({content, description = '', icons, ...props}) => {\n    const el = useRef();\n    const [container, setContainer] = useState(null);\n    const Content = content;\n    useEffect(() => {\n        if (el.current) {\n            setContainer(el.current);\n        }\n    }, []);\n    return (\n        <div ref={el} className={\"wc-braintree-blocks-payment-method__container\"}>\n            {description &&\n                <div className=\"wc-braintree-blocks-payment-method__description\">\n                    {description}\n                </div>}\n            <PaymentMethodDataProvider container={container} {...props}>\n                <PaymentMethodProviderContainer {...props}>\n                    <Content {...props}/>\n                </PaymentMethodProviderContainer>\n            </PaymentMethodDataProvider>\n        </div>\n    )\n}\n\nconst PaymentMethodProviderContainer = (\n    {\n        children,\n        name,\n        onError,\n        billing,\n        gatewayId,\n        shippingData,\n        eventRegistration,\n        emitResponse,\n        activePaymentMethod,\n        isExpress = false,\n        advancedFraudOptions = {}\n    }) => {\n    const {\n        onPaymentSetup,\n        onCheckoutFail\n    } = eventRegistration;\n    const {\n        responseTypes,\n        noticeContexts\n    } = emitResponse;\n\n    const {\n        fastlane\n    } = usePaymentMethodDataContext();\n\n    useProcessPayment({\n        name,\n        billing,\n        gatewayId,\n        shippingData,\n        responseTypes,\n        onPaymentSetup,\n        useFastlane: fastlane.paymentToken !== null,\n        activePaymentMethod,\n        advancedFraudOptions\n    });\n\n    useProcessPaymentFailure({\n        event: onCheckoutFail,\n        onError: isExpress ? onError : null,\n        responseTypes,\n        paymentMethodId: name,\n        activePaymentMethod,\n        messageContext: isExpress ? noticeContexts.EXPRESS_PAYMENTS : null\n    });\n    return children;\n}\n\nexport default PaymentMethod;","import {useEffect, useRef, useCallback} from '@wordpress/element';\nimport {ensureSuccessResponse, ensureErrorResponse, BraintreeError, fetchTokenNonce} from \"../../payment-methods/utils\";\nimport {useThreeDSecure, useProcessPaymentFailure, useDeviceData} from \"../../payment-methods/hooks\";\nimport {usePaymentMethodDataContext, PaymentMethodDataProvider} from \"../../payment-methods/context\";\n\nexport const SavedTokenProvider = (props) => {\n    return (\n        <PaymentMethodDataProvider {...{...props}}>\n            <SavedTokenComponent {...{...props}}/>\n        </PaymentMethodDataProvider>\n    )\n}\nexport const SavedTokenComponent = (\n    {\n        name,\n        gatewayId,\n        vaultedThreeDSecure = false,\n        token,\n        eventRegistration,\n        billing,\n        shippingData,\n        emitResponse\n    }) => {\n    const {responseTypes} = emitResponse;\n    const {onPaymentSetup, onCheckoutFail} = eventRegistration;\n    const currentData = useRef({billing, shippingData});\n    const {doPaymentDataFilter} = usePaymentMethodDataContext();\n\n    useDeviceData();\n\n    useThreeDSecure({name, gatewayId, vaulted: vaultedThreeDSecure});\n\n    useProcessPaymentFailure({\n        event: onCheckoutFail,\n        responseTypes\n    });\n\n    useEffect(() => {\n        currentData.current = {name, billing, shippingData};\n    });\n\n    useEffect(() => {\n        const unsubscribe = onPaymentSetup(async () => {\n            if (vaultedThreeDSecure) {\n                try {\n                    let result = await fetchTokenNonce(token);\n                    if (!result.success) {\n                        throw new BraintreeError({message: result.message});\n                    }\n                    result = await doPaymentDataFilter({\n                        meta: {\n                            paymentMethodData: {\n                                [`${gatewayId}_3ds_nonce_key`]: 'true'\n                            }\n                        }\n                    }, {...currentData.current, ...{result: result.data}});\n                    return ensureSuccessResponse(responseTypes, result);\n                } catch (error) {\n                    return ensureErrorResponse(responseTypes, error);\n                }\n            }\n            return null;\n        });\n        return () => unsubscribe();\n    }, [\n        gatewayId,\n        onPaymentSetup,\n        vaultedThreeDSecure,\n        token,\n        name,\n        responseTypes\n    ]);\n    return null;\n}\n\nexport default SavedTokenComponent;","export const ACTION_TYPES = {\n    SET_FASTLANE: 'SET_FASTLANE',\n    SET_PAYMENT_TOKEN: 'SET_PAYMENT_TOKEN',\n    SET_CUSTOMER_CONTEXT: 'SET_CUSTOMER_CONTEXT',\n    ADD_CANCELED_EMAIL: 'ADD_CANCELED_EMAIL'\n}","import {ACTION_TYPES} from \"./action-types\";\n\nexport const setPaymentToken = (token) => ({\n    type: ACTION_TYPES.SET_PAYMENT_TOKEN,\n    token\n});\n\nexport const setFastlane = fastlane => ({\n    type: ACTION_TYPES.SET_FASTLANE,\n    fastlane\n});\n\nexport const setCustomerContextId = id => ({\n    type: ACTION_TYPES.SET_CUSTOMER_CONTEXT,\n    id\n});\n\nexport const addCanceledEmail = email => ({\n    type: ACTION_TYPES.ADD_CANCELED_EMAIL,\n    email\n})","export const STORE_KEY = 'wc-braintree/store/checkout';","import {createReduxStore, register, subscribe} from '@wordpress/data';\nimport {controls as dataControls} from '@wordpress/data-controls';\n\nimport {STORE_KEY} from \"./constants\";\nimport * as actions from './actions';\nimport reducer from './reducers';\nimport * as selectors from './selectors';\n\nconst config = {\n    reducer,\n    selectors,\n    actions\n}\n\nexport {\n    STORE_KEY\n};\n\nexport const store = createReduxStore(STORE_KEY, config);\n\nregister(store);","import {ACTION_TYPES} from \"./action-types\";\n\nconst DEFAULT_STATE = {\n    token: null,\n    fastlane: null,\n    canceledEmails: [],\n    customerContextId: null\n};\n\nexport default function reducer(state = DEFAULT_STATE, action) {\n    let newState = state;\n\n    switch (action.type) {\n        case ACTION_TYPES.SET_FASTLANE:\n            newState = {\n                ...state,\n                fastlane: action.fastlane\n            }\n            break;\n        case ACTION_TYPES.SET_PAYMENT_TOKEN:\n            newState = {\n                ...state,\n                token: action.token\n            }\n            break;\n        case ACTION_TYPES.SET_CUSTOMER_CONTEXT:\n            newState = {\n                ...state,\n                customerContextId: action.id\n            }\n            break;\n        case ACTION_TYPES.ADD_CANCELED_EMAIL:\n            newState = {\n                ...state,\n                canceledEmails: [...state.canceledEmails, action.email]\n            }\n            break;\n    }\n    return newState;\n}","export const getPaymentToken = (state) => {\n    return state.token;\n}\n\nexport const getFastlane = state => {\n    return state.fastlane;\n}\n\nexport const isCustomerFound = state => {\n    return !!state.customerContextId;\n}\n\nexport const getCanceledEmails = state => {\n    return state.canceledEmails;\n}","export * from './checkout';","export * from './use-create-payment-request';\nexport * from './use-create-session';","import {useEffect, useMemo, useRef, useCallback} from '@wordpress/element';\nimport {removeNumberPrecision} from \"../../utils\";\nimport {formatLineItems, formatShippingMethods} from \"../utils\";\n\nexport const useCreatePaymentRequest = (\n    {\n        applePayInstance,\n        billing,\n        shippingData,\n        getData\n    }) => {\n    const currentData = useRef({});\n\n    useEffect(() => {\n        currentData.current.billing = billing;\n        currentData.current.shippingData = shippingData;\n    }, [billing, shippingData]);\n\n    const request = useMemo(() => {\n        if (applePayInstance) {\n            const {cartTotal, currency, cartTotalItems, billingAddress} = currentData.current.billing;\n            const {needsShipping, shippingRates} = currentData.current.shippingData;\n            const request = {\n                total: {\n                    label: getData('displayName'),\n                    type: 'final',\n                    amount: removeNumberPrecision(cartTotal.value, currency.minorUnit).toString()\n                },\n                lineItems: formatLineItems(cartTotalItems, currency.minorUnit),\n                currencyCode: currency.code,\n                countryCode: getData('countryCode'),\n                requiredBillingContactFields: ['postalAddress'],\n                requiredShippingContactFields: (() => {\n                    let fields = needsShipping ? ['postalAddress'] : [];\n                    if (!billingAddress.email) {\n                        fields = [...fields, 'email'];\n                    }\n                    if (!billingAddress.phone) {\n                        fields = [...fields, 'phone'];\n                    }\n                    return fields;\n                })()\n            }\n            if (needsShipping) {\n                request.shippingMethods = formatShippingMethods(shippingRates);\n            }\n            const paymentRequest = applePayInstance.createPaymentRequest(request);\n            return paymentRequest;\n        }\n        return null;\n    }, [applePayInstance]);\n    return request;\n}\n\nexport default useCreatePaymentRequest;","import {useEffect, useRef, useCallback} from '@wordpress/element';\nimport {__} from '@wordpress/i18n';\nimport {range} from 'lodash';\nimport {usePaymentMethodDataContext} from \"../../context\";\nimport {usePaymentEventsHandler} from \"../../hooks\";\nimport apiFetch from '@wordpress/api-fetch';\nimport {isEqual, isEmpty} from 'lodash';\nimport {\n    extractSelectedShippingOption,\n    extractAddressLines,\n    DEFAULT_BILLING_ADDRESS,\n    DEFAULT_SHIPPING_ADDRESS\n} from \"../../utils\";\n\nexport const useCreateSession = (\n    {\n        applePayInstance,\n        billing,\n        shippingData,\n        paymentRequest,\n        eventRegistration,\n        onClick,\n        onClose,\n        getData\n    }) => {\n    const {addShippingHandler} = usePaymentEventsHandler({\n        billing,\n        shippingData,\n        eventRegistration\n    });\n    const {\n        onSubmit,\n        setPaymentMethodNonce,\n        onPaymentDataFilter, notice: {addNotice}\n    } = usePaymentMethodDataContext();\n    const applePayData = useRef({});\n    const currentData = useRef({\n        billing,\n        shippingData,\n        onClick,\n        onClose,\n        onSubmit,\n        addNotice,\n        addShippingHandler,\n        setPaymentMethodNonce,\n        onPaymentDataFilter\n    });\n\n    const getApplePayVersion = useCallback(() => {\n        // always check support from highest version first\n        for (let version of range(10, 2, -1)) {\n            if (ApplePaySession.supportsVersion(version)) {\n                return version;\n            }\n        }\n        return 3;\n    }, []);\n\n    const onSessionCancel = useCallback(() => {\n        const {onClose} = currentData.current;\n        onClose();\n    }, []);\n\n    const onValidateMerchant = useCallback((event) => {\n        const {session} = currentData.current;\n        applePayInstance.performValidation({\n            validationURL: event.validationURL,\n            displayName: getData('displayName')\n        }).then(merchantSession => {\n            session.completeMerchantValidation(merchantSession);\n        }).catch(error => {\n            session.abort();\n            addNotice(error);\n        })\n    }, [applePayInstance, addNotice]);\n\n    const onPaymentMethodSelected = useCallback((event) => {\n        // update the cart billing address info\n        const {paymentMethod} = event;\n        const {session, addNotice} = currentData.current;\n        let address = null;\n        if (paymentMethod.billingContact) {\n            address = {\n                country: paymentMethod.billingContact?.countryCode || '',\n                state: paymentMethod.billingContact?.administrativeArea || '',\n                postcode: paymentMethod.billingContact?.postalCode || '',\n                city: paymentMethod.billingContact?.locality || ''\n            }\n        }\n        apiFetch({\n            method: 'POST',\n            url: getData('routes').payment_method,\n            data: {\n                address\n            }\n        }).then(response => {\n            if (response.code) {\n                session.abort();\n                addNotice(response.messages);\n            } else {\n                session.completePaymentMethodSelection(response.data);\n            }\n        }).catch((xhr) => {\n\n        });\n    }, []);\n\n    const onShippingContactSelected = useCallback((event) => {\n        const {session} = currentData.current;\n        const {shippingContact} = event;\n        const {shippingData} = currentData.current;\n        const {shippingAddress} = shippingData;\n        const {country, state, city, postcode} = shippingAddress;\n        const newAddress = {\n            country: shippingContact?.countryCode.toUpperCase(),\n            state: shippingContact?.administrativeArea.toUpperCase(),\n            city: shippingContact.locality,\n            postcode: shippingContact.postalCode\n        }\n        //const addressEqual = isEqual({country, state, city, postcode}, newAddress);\n\n        apiFetch({\n            method: 'POST',\n            url: getData('routes').shipping_address,\n            data: {\n                payment_method: 'braintree_applepay',\n                address: newAddress\n            }\n        }).then(response => {\n            if (response.code) {\n                if (response.code === 'addressUnserviceable') {\n                    session.completeShippingContactSelection(response.data.shippingContactUpdate);\n                } else {\n                    session.completeShippingContactSelection({\n                        errors: [new ApplePayError(\n                            response.code,\n                            response.data.contactField,\n                            response.message)],\n                        newTotal: response.data.newTotal,\n                        newShippingMethods: response.data.newShippingMethods\n                    });\n                }\n            } else {\n                session.completeShippingContactSelection(response.data.shippingContactUpdate)\n            }\n        }).finally(() => {\n            shippingData.setShippingAddress({...shippingAddress, ...newAddress});\n        });\n    }, []);\n\n    const onShippingMethodSelected = useCallback((event) => {\n        const {shippingMethod} = event;\n        const {session, shippingData, addNotice} = currentData.current;\n        const {setSelectedRates, selectedRates} = shippingData;\n\n        apiFetch({\n            method: 'POST',\n            url: getData('routes').shipping_method,\n            data: {\n                payment_method: 'braintree_applepay',\n                shipping_method: shippingMethod.identifier\n            }\n        }).then(response => {\n            if (response.code) {\n                session.abort();\n                //__('There was an error updating your cart totals.', 'woo-payment-gateway')\n            } else {\n                session.completeShippingMethodSelection(response.data.shippingMethodUpdate);\n            }\n        }).finally(() => {\n            setSelectedRates(...extractSelectedShippingOption(shippingMethod.identifier));\n        });\n    }, []);\n\n    const onPaymentAuthorized = useCallback((event) => {\n        const {session, setPaymentMethodNonce, errors = []} = currentData.current;\n        if (errors?.length > 0) {\n            session.completePayment({\n                status: ApplePaySession.STATUS_FAILURE,\n                errors\n            });\n        } else {\n            applePayInstance.tokenize({\n                token: event?.payment?.token\n            }).then(response => {\n                const {shippingContact = null, billingContact = null} = event.payment;\n                applePayData.current.billingAddress = {};\n\n                if (billingContact) {\n                    applePayData.current.billingAddress = {\n                        first_name: billingContact?.givenName,\n                        last_name: billingContact?.familyName,\n                        city: billingContact?.locality,\n                        state: billingContact?.administrativeArea,\n                        postcode: billingContact?.postalCode,\n                        country: billingContact?.countryCode,\n                        ...extractAddressLines(billingContact?.addressLines || ''),\n                        ...applePayData.current.billingAddress\n                    }\n                    if (billingContact.emailAddress) {\n                        applePayData.current.billingAddress.email = billingContact.emailAddress;\n                    }\n                    if (billingContact.phoneNumber) {\n                        applePayData.current.billingAddress.phone = billingContact.phoneNumber;\n                    }\n                }\n\n                if (shippingContact) {\n                    if (currentData.current.shippingData.needsShipping) {\n                        applePayData.current.shippingAddress = {\n                            first_name: shippingContact?.givenName,\n                            last_name: shippingContact?.familyName,\n                            city: shippingContact?.locality,\n                            state: shippingContact?.administrativeArea,\n                            postcode: shippingContact?.postalCode,\n                            country: shippingContact?.countryCode,\n                            ...extractAddressLines(shippingContact?.addressLines || [])\n                        }\n                        if (applePayData.current.billingAddress.phone) {\n                            applePayData.current.shippingAddress.phone = applePayData.current.billingAddress.phone;\n                        } else if (shippingContact?.phoneNumber) {\n                            applePayData.current.shippingAddress.phone = shippingContact.phoneNumber;\n                        }\n                    }\n                    if (shippingContact?.phoneNumber && !applePayData.current.billingAddress.phone) {\n                        applePayData.current.billingAddress.phone = shippingContact?.phoneNumber;\n                    }\n                    if (shippingContact?.emailAddress && !applePayData.current.billingAddress.email) {\n                        applePayData.current.billingAddress.email = shippingContact?.emailAddress;\n                    }\n                }\n\n                applePayData.current.nonce = response.nonce;\n                setPaymentMethodNonce(response.nonce);\n                session.completePayment(ApplePaySession.STATUS_SUCCESS);\n            }).catch(error => {\n                session.completePayment(ApplePaySession.STATUS_FAILURE);\n            })\n        }\n    }, [applePayInstance]);\n\n    useEffect(() => {\n        currentData.current = {\n            ...currentData.current,\n            billing,\n            shippingData,\n            onClick,\n            onClose,\n            onSubmit,\n            addNotice,\n            addShippingHandler,\n            setPaymentMethodNonce\n        };\n    });\n\n    useEffect(() => {\n        const unsubscribe = onPaymentDataFilter((data, {nonceKey, billing, shippingData}) => {\n            if (applePayData.current.nonce) {\n                data.meta.paymentMethodData[nonceKey] = applePayData.current.nonce;\n            }\n            if (!isEmpty(applePayData.current?.billingAddress)) {\n                data.meta.billingAddress = {\n                    ...DEFAULT_BILLING_ADDRESS,\n                    ...billing.billingAddress,\n                    ...applePayData.current.billingAddress\n                };\n            }\n            if (!isEmpty(applePayData.current?.shippingAddress)) {\n                data.meta.shippingAddress = {\n                    ...DEFAULT_SHIPPING_ADDRESS,\n                    ...shippingData.shippingAddress,\n                    ...applePayData.current.shippingAddress\n                };\n            }\n            return data;\n        });\n        return () => unsubscribe();\n    }, [onPaymentDataFilter]);\n\n    const createSession = useCallback(() => {\n        const {shippingData} = currentData.current;\n        const session = new ApplePaySession(getApplePayVersion(), paymentRequest);\n        session.onvalidatemerchant = onValidateMerchant;\n        session.onpaymentmethodselected = onPaymentMethodSelected;\n        session.onpaymentauthorized = onPaymentAuthorized;\n        session.oncancel = onSessionCancel;\n        if (shippingData.needsShipping) {\n            session.onshippingcontactselected = onShippingContactSelected;\n            session.onshippingmethodselected = onShippingMethodSelected;\n        }\n        currentData.current.session = session;\n        return session;\n    }, [\n        applePayInstance,\n        paymentRequest,\n        getApplePayVersion,\n        onValidateMerchant,\n        onPaymentMethodSelected,\n        onPaymentAuthorized,\n        onShippingContactSelected,\n        onShippingMethodSelected\n    ]);\n\n    const handleClick = useCallback((e) => {\n        e.preventDefault();\n        currentData.current.onClick();\n        try {\n            const session = createSession();\n            session.begin();\n        } catch (error) {\n            alert(error);\n        }\n    }, [createSession]);\n\n    return {handleClick};\n}\n\nexport default useCreateSession;","import {useState, useEffect} from '@wordpress/element';\nimport {registerExpressPaymentMethod} from '@woocommerce/blocks-registry';\nimport {create as createApplePay} from '@braintree/apple-pay';\nimport {getSettings, getClientToken, isCartPage, isCheckoutPage} from \"../utils\";\nimport {PaymentMethod} from \"../../components/payment-method\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport {useCreatePaymentRequest, useCreateSession} from \"./hooks\";\nimport ErrorBoundary from \"../../components/error-boundary\";\nimport ApplePayPreview from \"./preview\";\n\nconst getData = getSettings('braintree_applepay');\n\nconst loadApplePay = new Promise((resolve, reject) => {\n    createApplePay({\n        authorization: getClientToken()\n    }).then(instance => resolve(instance)).catch(error => reject(error));\n});\n\nconst Test = (props) => {\n    return (\n        <ErrorBoundary>\n            <ApplePayContainer {...props}/>\n        </ErrorBoundary>\n    )\n}\n\nconst ApplePayContainer = (\n    {\n        getData,\n        billing,\n        shippingData,\n        eventRegistration,\n        onClick,\n        onClose\n    }) => {\n    const [applePayInstance, setApplePayInstance] = useState(null);\n    const {notice: {addNotice}} = usePaymentMethodDataContext();\n    const paymentRequest = useCreatePaymentRequest({\n        applePayInstance,\n        billing,\n        shippingData,\n        getData\n    });\n    const {handleClick} = useCreateSession({\n        applePayInstance,\n        billing,\n        shippingData,\n        paymentRequest,\n        eventRegistration,\n        onClick,\n        onClose,\n        getData\n    });\n    useEffect(() => {\n        loadApplePay.then(instance => setApplePayInstance(instance)).catch(error => addNotice(error));\n    }, []);\n\n    return (\n        <div\n            className={'wc-braintree-blocks-apple-pay-button__container'}>\n            <ApplePayButton\n                onClick={handleClick}\n                type={getData('buttonType')}\n                style={getData('buttonStyle')}\n                rounded={getData('roundedButton')}/>\n        </div>\n    )\n}\n\nconst ApplePayButton = ({onClick, type, style, rounded = false}) => {\n    const getButtonStyle = (style) => {\n        switch (style) {\n            case 'apple-pay-button-black':\n                return 'black';\n            case 'apple-pay-button-white':\n                return 'white';\n            case 'apple-pay-button-white-with-line':\n                return 'white-outline';\n        }\n    }\n    const styles = {\n        'ApplePayButtonType': type,\n        'ApplePayButtonStyle': getButtonStyle(style)\n    }\n    return <button\n        className={`wc-braintree-blocks-apple-pay__button ${style} ${rounded ? 'apple-pay-button-rounded' : ''}`}\n        style={styles}\n        onClick={onClick}/>\n\n}\n\nregisterExpressPaymentMethod({\n    name: 'braintree_applepay_express',\n    gatewayId: getData('name'),\n    paymentMethodId: getData('name'),\n    canMakePayment: async () => {\n        if (isCartPage() && !getData('expressCartEnabled')) {\n            return false;\n        }\n        if (isCheckoutPage() && !getData('expressCheckoutEnabled')) {\n            return false;\n        }\n        return window.ApplePaySession && ApplePaySession.canMakePayments();\n    },\n    content: <PaymentMethod\n        content={Test}\n        title={getData('title')}\n        name={'braintree_applepay_express'}\n        gatewayId={getData('name')}\n        icon={getData('icon')}\n        getData={getData}\n        isExpress={true}/>,\n    edit: <ApplePayPreview src={getData('editor').icon}/>,\n    supports: {\n        features: getData('features')\n    }\n});","export default function ApplePayPreview({src}) {\n    return (\n        <div\n            className='apple-pay-block-editor'\n            style={{maxHeight: '40px', backgroundColor: '#000', borderRadius: '4px'}}>\n            <img\n                src={src}\n                style={{\n                    width: '100%',\n                    height: '40px',\n                    objectFit: 'contain'\n                }}/>\n        </div>\n    )\n}","import {getShippingOptionId, removeNumberPrecision} from \"../utils\";\n\nexport const formatLineItems = (lineItems, minorUnit) => {\n    let items = [];\n    const keys = ['total_tax', 'total_shipping'];\n    lineItems.forEach(item => {\n        if (0 < item.value || (item.key && keys.includes(item.key))) {\n            items.push({\n                label: item.label,\n                type: 'final',\n                amount: removeNumberPrecision(item.value, minorUnit).toString()\n            });\n        }\n    })\n    return items;\n}\n\nexport const formatShippingMethods = (shippingRates) => {\n    let options = [];\n    shippingRates.forEach((shippingPackage, idx) => {\n        let rates = shippingPackage.shipping_rates.map(rate => {\n            let txt = document.createElement('textarea');\n            txt.innerHTML = rate.name;\n            return {\n                identifier: getShippingOptionId(idx, rate.rate_id),\n                label: txt.value,\n                detail: '',\n                amount: removeNumberPrecision(rate.price, rate.currency_minor_unit)\n            }\n        });\n        options = [...options, ...rates];\n    });\n    return options;\n}","import {useMemo} from '@wordpress/element';\nimport {uniqueId} from 'lodash';\nimport {ACTIONS} from './action-reducer';\n\nexport const useActionEmitter = (dispatch) => {\n    const data = useMemo(() => ({\n        onPaymentDataFilter: (callback, priority = 10) => {\n            const action = {\n                action: ACTIONS.ADD_ACTION,\n                type: 'payment_data_filter',\n                id: uniqueId(),\n                callback,\n                priority\n            };\n            dispatch(action);\n            return () => dispatch({action: ACTIONS.REMOVE_ACTION, type: action.type, id: action.id})\n        }\n    }), [dispatch]);\n    return data;\n}\n\nexport const emittFilter = async (data, args, {handlers, type}) => {\n    const events = handlers[type];\n    const sortedEvents = Array.from(events.values()).sort((a, b) => a.priority - b.priority);\n    try {\n        for (const event of sortedEvents) {\n            data = await Promise.resolve(event.callback(data, args));\n        }\n    } catch (error) {\n        console.log(error);\n        throw error;\n    }\n    return data;\n}\n\n","export const ACTIONS = {\n    ADD_ACTION: 'add_action',\n    REMOVE_ACTION: 'remove_action'\n}\n\nexport const actionReducer = (state = {}, {action, type, id, callback, priority = 10}) => {\n    const event = state[type] ? state[type] : new Map();\n    switch (action) {\n        case ACTIONS.ADD_ACTION:\n            event.set(id, {callback, priority});\n            return {...state, [type]: event};\n        case ACTIONS.REMOVE_ACTION:\n            event.delete(id);\n            return {...state, [type]: event};\n    }\n    return state;\n}","export * from './payment-context';\nexport * from './action-reducer';\nexport * from './action-emitter';","import {useState, useRef, useEffect, useCallback, createContext, useContext, useReducer} from '@wordpress/element';\nimport {useSelect} from '@wordpress/data';\nimport {STORE_KEY} from '@wc-braintree/block-data';\nimport {actionReducer, useActionEmitter, emittFilter} from \"../context\";\nimport {loadClient} from \"../utils\";\nimport {useNoticeHandler} from \"../hooks\";\n\nconst PaymentMethodDataContext = createContext();\n\nexport const PaymentMethodDataProvider = (\n    {\n        children,\n        container,\n        onSubmit,\n        getData,\n        isExpress = null,\n        setExpressPaymentError\n    }) => {\n    const [client, setClient] = useState();\n    const [paymentMethodData, __setPaymentMethodData] = useState({});\n    const [eventHandlers, dispatch] = useReducer(actionReducer, {});\n    const {onPaymentDataFilter} = useActionEmitter(dispatch);\n    const currentEventHandlers = useRef(eventHandlers);\n    const currentData = useRef({onSubmit});\n    const [notice, addNotice, removeNotice] = useNoticeHandler({isExpress, setExpressPaymentError});\n\n    const {\n        fastlane,\n        paymentToken,\n        customerFound\n    } = useSelect(select => {\n        const store = select(STORE_KEY);\n        return {\n            fastlane: store.getFastlane(),\n            paymentToken: store.getPaymentToken(),\n            customerFound: store.isCustomerFound()\n        };\n    });\n\n    const setPaymentMethodData = useCallback((values) => {\n        __setPaymentMethodData(prev => ({\n            ...prev,\n            ...values\n        }))\n    }, []);\n\n    const setPaymentMethodNonce = useCallback((nonce => {\n        setPaymentMethodData({nonce});\n    }), [setPaymentMethodData]);\n\n    const doPaymentDataFilter = useCallback(async (data, args) => {\n        return await emittFilter(data, args, {\n            handlers: currentEventHandlers.current,\n            type: 'payment_data_filter'\n        });\n    }, []);\n\n    useEffect(() => {\n        currentEventHandlers.current = eventHandlers;\n    }, [eventHandlers]);\n\n    useEffect(() => {\n        loadClient.then(client => setClient(client)).catch(error => {\n            addNotice(error)\n        });\n    }, [addNotice]);\n\n    useEffect(() => {\n        currentData.current = {onSubmit};\n    }, [onSubmit]);\n\n    useEffect(() => {\n        if (paymentMethodData?.nonce) {\n            currentData.current.onSubmit();\n        }\n    }, [paymentMethodData]);\n\n    const paymentMethodDataContext = {\n        container,\n        client,\n        paymentMethodData,\n        setPaymentMethodData,\n        setPaymentMethodNonce,\n        onPaymentDataFilter,\n        doPaymentDataFilter,\n        onSubmit,\n        notice: {\n            notice,\n            addNotice,\n            removeNotice\n        },\n        fraud: {\n            enabled: getData('advancedFraudEnabled')\n        },\n        threeDSecureEnabled: getData('threeDSecureEnabled'),\n        fastlane: {\n            fastlane,\n            paymentToken,\n            customerFound\n        }\n\n    };\n    return (\n        <PaymentMethodDataContext.Provider value={paymentMethodDataContext}>\n            {children}\n        </PaymentMethodDataContext.Provider>\n    )\n}\n\nexport const usePaymentMethodDataContext = () => {\n    return useContext(PaymentMethodDataContext);\n}","import {useState, useEffect, useCallback, useRef, cloneElement} from '@wordpress/element';\nimport {__, sprintf} from '@wordpress/i18n';\nimport {create} from '@braintree/hosted-fields';\nimport classnames from \"classnames\";\nimport {getCustomFormConfig} from \"./registry\";\nimport {useBreakpointWidth} from \"../../hooks\";\nimport '../custom-forms';\nimport {usePaymentMethodDataContext} from \"../../context\";\n\nexport const CustomForm = ({options, client, id}) => {\n    const {onPaymentDataFilter} = usePaymentMethodDataContext();\n    const config = getCustomFormConfig(id);\n    const {breakpoint = 0, fields: fieldKeys = [], content: Content = null, className = ''} = config;\n    const [hostedFieldInstance, setHostedFieldsInstance] = useState(false);\n    const [fields, setFields] = useState({});\n    const [containerElement, setContainerElement] = useState();\n    const [cardBrand, setCardBrand] = useState(null);\n    const fieldOrder = useRef([]);\n    const currentData = useRef({fields});\n    const setFieldOrder = (id) => {\n        if (!fieldOrder.current.includes(id)) {\n            fieldOrder.current.push(id);\n        }\n    }\n    const getIconSrc = (type) => {\n        for (let icon of options.icons) {\n            if (icon.type === type) {\n                return icon.src;\n            }\n        }\n        return null;\n    };\n    const assertFieldsValid = useCallback(fields => {\n        const missingFields = fieldKeys.reduce((acc, prop) => {\n            if (!fields.hasOwnProperty(prop)) {\n                acc.push(prop);\n            }\n            return acc;\n        }, []);\n        return missingFields.length == 0;\n    }, []);\n    const setFieldContainer = useCallback((id) => (container) => {\n        const {fields} = currentData.current;\n        if (!fields?.[id]?.container && container !== null) {\n            const field = {\n                container,\n                ...options.fields[id]\n            }\n            setFields(prev => ({\n                ...prev,\n                [id]: field\n            }));\n        }\n    }, []);\n\n    const addClassToFields = useCallback((keys, className) => {\n        keys.forEach(key => {\n            fields?.[key]?.container.classList.add(className);\n        });\n    }, [fields]);\n\n    useEffect(() => {\n        const unsubscribe = onPaymentDataFilter((response, {nonceKey, billing}) => {\n            return new Promise((resolve, reject) => {\n                const {hostedFieldInstance} = currentData.current;\n                const options = {billingAddress: {}};\n                if (billing?.billingAddress?.address_1) {\n                    options.billingAddress.streetAddress = billing.billingAddress.address_1;\n                }\n                if (billing?.billingAddress?.postcode) {\n                    options.billingAddress.postalCode = billing.billingAddress.postcode;\n                }\n                hostedFieldInstance.tokenize(options, (error, payload) => {\n                    if (error) {\n                        if (error.code === 'HOSTED_FIELDS_FIELDS_INVALID') {\n                            addClassToFields(error?.details?.invalidFieldKeys || [], 'braintree-hosted-fields-invalid');\n                        } else if (error.code === 'HOSTED_FIELDS_FIELDS_EMPTY') {\n                            addClassToFields(fieldKeys, 'braintree-hosted-fields-invalid');\n                        }\n                        reject(error);\n                    } else {\n                        response.meta.paymentMethodData[nonceKey] = payload.nonce;\n                        resolve({\n                            ...response,\n                            ...payload\n                        });\n                    }\n                });\n            })\n        });\n        return unsubscribe;\n    }, [onPaymentDataFilter]);\n\n    useEffect(() => {\n        currentData.current = {fields};\n    }, [fields]);\n\n    useBreakpointWidth({key: id, el: containerElement, className, breakpoint});\n\n    useEffect(() => {\n        if (assertFieldsValid(fields)) {\n            client.then(clientInstance => {\n                create({\n                    client: clientInstance,\n                    fields,\n                    styles: options.styles\n                }).then(instance => {\n                    currentData.current.hostedFieldInstance = instance;\n                    setHostedFieldsInstance(instance);\n                }).catch(error => {\n\n                });\n            });\n        }\n    }, [fields]);\n\n    useEffect(() => {\n        if (hostedFieldInstance) {\n            hostedFieldInstance.on('cardTypeChange', (event) => {\n                if (event?.cards?.length == 1) {\n                    setCardBrand(event.cards[0].type);\n                } else {\n                    setCardBrand(null);\n                }\n            });\n            hostedFieldInstance.on('validityChange', (event) => {\n                const field = event.fields[event.emittedBy];\n                if (field.isValid) {\n                    const idx = fieldOrder.current.indexOf(event.emittedBy);\n                    if (fieldOrder.current?.[idx + 1]) {\n                        const nextField = fieldOrder.current[idx + 1];\n                        hostedFieldInstance.focus(nextField);\n                    }\n                }\n            });\n        }\n    }, [hostedFieldInstance]);\n    if (!Content) {\n        return <InvalidCustomForm id={id}/>;\n    }\n    return (\n        <div ref={setContainerElement} className='wc-braintree-blocks-custom__form'>\n            {cloneElement(Content, {\n                setFieldContainer,\n                setFieldOrder,\n                CardIcon: <CardIcon type={cardBrand} src={getIconSrc(cardBrand)}/>\n            })}\n        </div>\n    );\n}\n\nconst InvalidCustomForm = ({id}) => {\n    return (\n        <div className={'wc-braintree-blocks-notice__info'}>\n            {sprintf(__('%s is not a supported custom form.', 'woo-payment-gateway'), id)}\n        </div>\n    );\n};\n\nconst CardIcon = ({type, src}) => {\n    if (!type) {\n        return null;\n    }\n    const classes = classnames('wc-braintree-blocks-current-card__icon', type);\n    return (\n        <img className={classes} src={src}/>\n    )\n}\n\nexport default CustomForm;","const forms = {};\n\nexport const registerCustomForm = (config) => {\n    assertValidConfig(config);\n    forms[config.id] = config;\n}\n\nexport const getCustomFormConfig = (id) => {\n    if (assertValidFormId(id)) {\n        return forms[id];\n    }\n    return {};\n}\n\nconst assertValidFormId = (id) => {\n    return forms.hasOwnProperty(id);\n}\n\nconst assertValidConfig = (config) => {\n    if (!config.id) {\n        throw new Error('Custom forms must have a unique ID.');\n    }\n    assertConfigHasProperties(config, ['content', 'breakpoint']);\n}\n\nconst assertConfigHasProperties = (config, props = []) => {\n    const missingParams = props.reduce((acc, prop) => {\n        if (!config.hasOwnProperty(prop)) {\n            acc.push(prop);\n        }\n        return acc;\n    }, []);\n    if (missingParams.length > 0) {\n        throw new TypeError(`Custom form config missing params ${missingParams.join(', ')}`);\n    }\n}","import {__} from '@wordpress/i18n';\nimport {CardNumber, CardExpirationDate, CardCVV} from \"../../hosted-fields\";\nimport './style.scss';\n\nexport const BootstrapForm = (props) => {\n    return (\n        <div className='wc-braintree-blocks-bootstrap__form'>\n            <div className='row'>\n                <div className='col-md-6'>\n                    <div className={'form-group cardnumber-form-group'}>\n                        <label>{__('Card Number', 'woo-payment-gateway')}</label>\n                        <CardNumber className={'bootstrap-input'} {...props}/>\n                    </div>\n                </div>\n                <div className='col-md-3'>\n                    <div className={'form-group'}>\n                        <label>{__('Exp Date', 'woo-payment-gateway')}</label>\n                        <CardExpirationDate className={'bootstrap-input'} {...props}/>\n                    </div>\n                </div>\n                <div className='col-md-3'>\n                    <div className={'form-group'}>\n                        <label>{__('CVV', 'woo-payment-gateway')}</label>\n                        <CardCVV className={'bootstrap-input'} {...props}/>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default BootstrapForm;","import {registerCustomForm} from \"../custom-form/registry\";\nimport BootstrapForm from './bootstrap';\nimport SimpleForm from './simple';\n\nregisterCustomForm({\n    id: 'bootstrap_form',\n    content: <BootstrapForm/>,\n    breakpoint: 425,\n    fields: ['number', 'expirationDate', 'cvv'],\n    className: 'bootstrap-md'\n});\nregisterCustomForm({\n    id: 'simple_form',\n    content: <SimpleForm/>,\n    breakpoint: 425,\n    fields: ['number', 'expirationDate', 'cvv'],\n    className: 'simple-form-md'\n})","import {__} from '@wordpress/i18n';\nimport {CardNumber, CardExpirationDate, CardCVV} from \"../../hosted-fields\";\nimport './style.scss';\n\nexport const SimpleForm = (props) => {\n    return (\n        <div className='wc-braintree-blocks-simple__form'>\n            <div className='form-group'>\n                <label>{__('Card Number', 'woo-payment-gateway')}</label>\n                <CardNumber className='hosted-field braintree-card-number' {...props}/>\n            </div>\n            <div className='form-group'>\n                <label>{__('Exp Date', 'woo-payment-gateway')}</label>\n                <CardExpirationDate className='hosted-field' {...props}/>\n            </div>\n            <div className='form-group'>\n                <label>{__('CVV', 'woo-payment-gateway')}</label>\n                <CardCVV className='hosted-field' {...props}/>\n            </div>\n        </div>\n    )\n}\n\nexport default SimpleForm;","import {useEffect, useState, useCallback} from '@wordpress/element';\nimport {create as createDropin} from '@braintree/dropin';\n\nexport const DropinForm = ({options, setDropinInstance}) => {\n    const {clientToken, locale = 'en_US'} = options;\n    const [error, setError] = useState(null);\n    const [element, setElement] = useState(null);\n    const setRef = useCallback(node => {\n        if (node) {\n            setElement(node);\n        }\n    });\n    useEffect(() => {\n        if (element) {\n            createDropin({\n                authorization: clientToken,\n                container: element,\n                locale: locale\n            }, (error, dropinInstance) => {\n                if (error) {\n                    setError(error?.message);\n                } else {\n                    setDropinInstance(dropinInstance);\n                }\n            })\n        }\n    }, [element]);\n    return (\n        <>\n            {error && <div className={'wc-braintree-blocks__error'}>{error}</div>}\n            <div ref={setRef} className={'wc-braintree-blocks-dropin__form'}>\n\n            </div>\n        </>\n    )\n\n}\n\nexport default DropinForm;","export default function DropinPreview({src}){\n    return (\n        <div\n        style={{\n            display: 'flex',\n            justifyContent: 'center'\n        }}>\n            <img\n                src={src}\n                style={{\n                    width: '100%',\n                    maxWidth: '400px',\n                    objectFit: 'contain'\n                }}/>\n        </div>\n    )\n}","import classnames from \"classnames\";\n\nexport const CardCVV = ({setFieldContainer, setFieldOrder, className}) => {\n    setFieldOrder('cvv');\n    const classes = classnames('braintree-web-hosted-field', className);\n    return <div ref={setFieldContainer('cvv')} id='braintree-cvv' className={classes}></div>\n}\n\nexport default CardCVV;","import classnames from \"classnames\";\n\nexport const CardExpirationDate = ({setFieldContainer, setFieldOrder, className}) => {\n    setFieldOrder('expirationDate');\n    const classes = classnames('braintree-web-hosted-field', className);\n    return (\n        <div ref={setFieldContainer('expirationDate')} id='braintree-exp-date'\n             className={classes}></div>\n    )\n}\n\nexport default CardExpirationDate;","import {useEffect, useRef} from \"@wordpress/element\";\nimport classnames from \"classnames\";\n\nexport const CardNumber = ({onChange, setFieldContainer, setFieldOrder, className, CardIcon}) => {\n    setFieldOrder('number');\n    const classes = classnames('braintree-web-hosted-field', className);\n    return (\n        <div ref={setFieldContainer('number')} id='braintree-number' className={classes}>\n            {CardIcon}\n        </div>\n    )\n}\n\nexport default CardNumber;","export * from './card-number';\nexport * from './card-expiration-date';\nexport * from './card-cvv';","import {useState, useEffect, useCallback, useRef} from '@wordpress/element';\nimport {registerPaymentMethod} from '@woocommerce/blocks-registry';\nimport {getSetting} from '@woocommerce/settings';\nimport {useDispatch, useSelect} from '@wordpress/data';\nimport classnames from 'classnames';\nimport {__} from '@wordpress/i18n';\nimport {STORE_KEY} from '@wc-braintree/block-data';\nimport {getSettings, loadClient, getClientToken, canShowSavedCard} from \"../utils\";\nimport {\n    PaymentMethod,\n    PaymentMethodLabel,\n    SavedTokenProvider,\n    Notice,\n    FastlaneLink,\n    FastlaneModal\n} from '../../components';\nimport DropinForm from \"./dropin-form\";\nimport CustomForm from \"./custom-form\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport TokenizedCard from './tokenized-card'\nimport DropinPreview from './dropin-preview';\n\nconst getData = getSettings('braintree_cc');\nconst data = getSetting('braintree_cc_data');\n\nconst CreditCardComponent = (props) => {\n    const [openModal, setOpenModal] = useState(false);\n    const {\n        billing,\n        shippingData\n    } = props;\n    const {\n        email\n    } = billing.billingAddress;\n    const {\n        notice,\n        fastlane: {\n            fastlane,\n            paymentToken,\n            customerFound\n        }\n    } = usePaymentMethodDataContext();\n\n    const {\n        setPaymentToken\n    } = useDispatch(STORE_KEY);\n\n    const {\n        emails\n    } = useSelect(select => {\n        return {\n            emails: select(STORE_KEY).getCanceledEmails()\n        }\n    });\n\n    const showSignup = data.showSignup && !emails.includes(email);\n\n    const dropinEnabled = getData('dropinEnabled');\n    const Content = dropinEnabled ? DropinContainer : HostedFieldsContainer;\n    const classes = classnames('wc-braintree-card-container', {\n        'dropin': dropinEnabled,\n        'customForm': !dropinEnabled\n    });\n\n    const onTokenize = useCallback((token) => {\n        setPaymentToken(token);\n    }, []);\n\n    if (paymentToken) {\n        return (\n            <TokenizedCard\n                data={data}\n                token={paymentToken}\n                fastlane={fastlane}\n                customerFound={customerFound}\n                {...props}/>\n        )\n    }\n\n    return (\n        <>\n            {showSignup &&\n                <FastlaneLink\n                    logo={data.fastLaneLogo}\n                    text={data.i18n.fastlane_signup}\n                    onClick={() => setOpenModal(true)}/>\n            }\n            {notice?.notice && <Notice notice={notice.notice} onRemove={notice.removeNotice}/>}\n            <div className={classes}>\n                <Content/>\n            </div>\n            <FastlaneModal\n                i18n={data.i18n}\n                open={openModal}\n                onClose={() => setOpenModal(false)}\n                fastlane={fastlane}\n                onTokenize={onTokenize}\n                shippingData={shippingData}\n            />\n        </>\n    )\n}\n\nconst HostedFieldsContainer = (props) => {\n    const options = {\n        fields: getData('hostedFieldsOptions'),\n        styles: getData('hostedFieldsStyles'),\n        icons: getData('icons')\n    };\n    return <CustomForm options={options} client={loadClient} id={getData('customForm')} {...props}/>\n}\n\nconst DropinContainer = () => {\n    const {onPaymentDataFilter} = usePaymentMethodDataContext();\n\n    const currentData = useRef({dropinInstance: null});\n\n    const setDropinInstance = useCallback(dropinInstance => {\n        currentData.current = {\n            ...currentData.current,\n            dropinInstance\n        }\n    }, []);\n\n    useEffect(() => {\n        const unsubscribe = onPaymentDataFilter((response, {nonceKey}) => {\n            return new Promise((resolve, reject) => {\n                const {dropinInstance} = currentData.current;\n                dropinInstance.requestPaymentMethod((err, payload) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        response.meta.paymentMethodData[nonceKey] = payload.nonce;\n                        resolve({\n                            ...response,\n                            ...payload\n                        });\n                    }\n                });\n            })\n        }, 1);\n\n        return unsubscribe;\n    }, [onPaymentDataFilter]);\n\n    const options = {\n        clientToken: getClientToken(),\n        locale: 'en_US'\n    }\n    return (\n        <DropinForm options={options} setDropinInstance={setDropinInstance}/>\n    )\n}\n\nregisterPaymentMethod({\n    name: getData('name'),\n    gatewayId: getData('name'),\n    label: <PaymentMethodLabel\n        title={getData('title')}\n        paymentMethod={getData('name')}\n        icon={getData('icon')}/>,\n    ariaLabel: __('Credit Cards', 'woo-payment-gateway'),\n    canMakePayment: () => true,\n    content: <PaymentMethod\n        content={CreditCardComponent}\n        title={getData('title')}\n        description={getData('description')}\n        name={getData('name')}\n        gatewayId={getData('name')}\n        icon={getData('icon')}\n        getData={getData}/>,\n    savedTokenComponent: <SavedTokenProvider getData={getData}\n                                             name={getData('name')}\n                                             gatewayId={getData('name')}\n                                             vaultedThreeDSecure={getData('vaultedThreeDSecure')}/>,\n    edit: <DropinPreview src={getData('editor').icon}/>,\n    supports: {\n        showSavedCards: getData('features').includes('tokenization'),\n        showSaveOption: canShowSavedCard(),\n        features: getData('features')\n    }\n});","import classnames from 'classnames';\nimport {formatPaymentMethod} from '../utils';\nimport {useProcessFastlanePaymentToken, useManageFastlanePaymentToken} from \"../hooks\";\nimport {usePaymentMethodDataContext} from \"../context\";\n\nexport default function TokenizedCard(\n    {\n        data,\n        token,\n        fastlane,\n        customerFound,\n        ...props\n    }) {\n    const {\n        onPaymentDataFilter\n    } = usePaymentMethodDataContext();\n\n    const {\n        i18n,\n        fastlane_icons,\n        payment_format\n    } = data;\n\n    const {\n        emitResponse,\n        shouldSavePayment\n    } = props;\n\n    const {\n        responseTypes\n    } = emitResponse;\n\n    let {\n        card\n    } = token.paymentSource;\n\n    card = {\n        ...card,\n        brand: card.brand,\n        last4: card.lastDigits,\n        expiry: card.expiry\n    };\n\n    useProcessFastlanePaymentToken({\n        token,\n        responseTypes,\n        shouldSavePayment,\n        onPaymentDataFilter\n    });\n\n    const {\n        onCancel,\n        onChangePaymentMethod\n    } = useManageFastlanePaymentToken({\n        fastlane\n    });\n\n    return (\n        <div className={classnames('wc-ppcp-tokenized-card', {'has-customer-context': customerFound})}>\n            <CardIcon icons={fastlane_icons} brand={card.brand.toLowerCase()}/>\n            <div className=\"wc-ppcp-tokenized-card-format\">\n                {formatPaymentMethod(payment_format, card)}\n            </div>\n            <div className=\"wc-ppcp-tokenized-card-actions\">\n                <a\n                    className=\"wc-ppcp-tokenized-card-cancel\"\n                    onClick={onCancel}>\n                    {i18n.cancel}\n                </a>\n                {customerFound &&\n                    <a\n                        className=\"wc-ppcp-tokenized-card-change\"\n                        onClick={onChangePaymentMethod}>\n                        {i18n.change}\n                    </a>\n                }\n            </div>\n        </div>\n    )\n}\n\nconst CardIcon = ({icons, brand}) => {\n    let src = '';\n\n    if (icons[brand]) {\n        src = icons[brand];\n    }\n\n    return (\n        <div className=\"wc-ppcp-tokenized-card-icon-container\">\n            <img src={src}/>\n        </div>\n    )\n}","import {useState, useRef, useEffect, useCallback, useMemo} from \"@wordpress/element\";\nimport {useSelect, useDispatch} from '@wordpress/data';\nimport {CART_STORE_KEY} from '@woocommerce/block-data';\nimport {getSetting} from '@woocommerce/settings';\nimport {isEmail} from '@wordpress/url';\nimport {useCreateFastlane, useProcessFastlane} from \"../hooks\";\nimport {useDeviceData} from \"../../hooks\";\nimport {PaymentMethodDataProvider} from \"../../context\";\nimport {getSettings, getClientToken} from \"../../utils\";\n\nconst Component = ({extensions}) => {\n    const isInitialRender = useRef(true);\n    const currentData = useRef({});\n    const data = extensions.wc_braintree.fastlane;\n\n    const {\n        needsShipping,\n        billingAddress\n    } = useSelect(select => {\n        const store = select(CART_STORE_KEY);\n\n        return {\n            needsShipping: store.getNeedsShipping(),\n            ...store.getCustomerData()\n        }\n    });\n\n    const {\n        setShippingAddress\n    } = useDispatch(CART_STORE_KEY);\n\n    const {\n        email\n    } = billingAddress;\n\n    const [debouncedEmail, setDebouncedEmail] = useState(email);\n\n    const dataCollector = useDeviceData({skip: true});\n\n    const fastlane = useCreateFastlane({\n        clientToken: getClientToken(),\n        fraudEnabled: data.fraud.enabled,\n        dataCollector\n    });\n\n    const onError = useCallback(() => {\n\n    }, []);\n\n    const shippingData = useMemo(() => {\n        return {\n            needsShipping,\n            setShippingAddress\n        }\n    }, [needsShipping, setShippingAddress]);\n\n    const {\n        emails,\n        isCustomerFound,\n        triggerAuthentication\n    } = useProcessFastlane({\n        i18n: data.i18n,\n        email,\n        onError,\n        fastlane,\n        shippingData,\n        openFastlaneModal: null\n    });\n\n    useEffect(() => {\n        currentData.current = {emails, fastlane, isCustomerFound};\n    }, [emails, fastlane, isCustomerFound]);\n\n    useEffect(() => {\n        // Set a timer to update the debounced value after 500ms\n        const timer = setTimeout(() => {\n            setDebouncedEmail(email);\n        }, 500); // Adjust debounce time as needed (500ms is common)\n\n        // Clean up the timer if email changes before timeout completes\n        return () => clearTimeout(timer);\n    }, [email]);\n\n    // Effect for handling email changes\n    useEffect(() => {\n        const {\n            emails,\n            isCustomerFound\n        } = currentData.current;\n\n        // If customer cancelled, don't try to authenticate.\n        if (emails.includes(debouncedEmail) || isCustomerFound) {\n            return;\n        }\n        // Don't do anything if requirements aren't met\n        if (!fastlane || !triggerAuthentication || !isEmail(debouncedEmail)) {\n            return;\n        }\n\n        // Only trigger on first load if fastlane_pageload is true\n        if (isInitialRender.current) {\n            isInitialRender.current = false;\n            if (data.fastlane_pageload) {\n                triggerAuthentication(debouncedEmail, false);\n            }\n            return;\n        }\n\n        // If we get here, email has changed and is valid, so trigger authentication\n        triggerAuthentication(debouncedEmail, false);\n    }, [fastlane, debouncedEmail, triggerAuthentication]);\n\n    useEffect(() => {\n        const {\n            fastlane\n        } = currentData.current;\n\n        if (!fastlane) {\n            return;\n        }\n        let el = document.getElementById('email');\n        if (el) {\n            let container = document.getElementById('wc-ppcp-watermark-container');\n            if (container) {\n                return;\n            }\n            container = document.createElement('div');\n            container.id = 'wc-ppcp-watermark-container';\n\n            fastlane.FastlaneWatermarkComponent({includeAdditionalInfo: true}).then(component => {\n                el.parentElement.append(container);\n                component.render('#wc-ppcp-watermark-container');\n            });\n        }\n    });\n\n    return null;\n}\n\nexport const Block = (props) => {\n    const getData = getSettings('braintree_cc');\n    const {extensions} = props;\n    if (!extensions?.wc_braintree?.fastlane) {\n        return null;\n    }\n    return (\n        <PaymentMethodDataProvider getData={getData}>\n            <Component {...props}/>\n        </PaymentMethodDataProvider>\n    );\n}","import {registerCheckoutBlock} from '@woocommerce/blocks-checkout';\n\nimport metadata from './block.json';\nimport {Block} from './block';\n\nregisterCheckoutBlock({\n    metadata,\n    component: Block\n});","import {useState, useEffect, useCallback, useRef} from '@wordpress/element';\nimport {isEmail} from '@wordpress/url';\nimport {useCreateFastlane, useProcessFastlane} from \"./hooks\";\nimport {FastlaneModal} from '../../components';\nimport {useDeviceData} from \"../hooks\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport {getClientToken} from \"../utils\";\n\nexport default function ExpressPaymentComponent({getData, ...props}) {\n    const {\n        billing,\n        shippingData,\n        setExpressPaymentError\n    } = props;\n\n    const {\n        billingAddress\n    } = billing;\n\n    const {\n        email\n    } = billingAddress;\n\n    const authOnLoad = getData('fastlane_pageload');\n\n    const isInitialRender = useRef(true);\n    const [openModal, setOpenModal] = useState(false);\n    const resolveRef = useRef(null);\n    const promiseRef = useRef(null);\n\n    const {\n        fraud\n    } = usePaymentMethodDataContext();\n\n    const dataCollector = useDeviceData({skip: true});\n\n    const openFastlaneModal = useCallback(() => {\n        promiseRef.current = new Promise(resolve => {\n            resolveRef.current = resolve;\n        });\n        setOpenModal(true);\n        return promiseRef.current;\n    }, []);\n\n    const onClose = useCallback((skip = false) => {\n        setOpenModal(false);\n        if (!skip) {\n            resolveRef.current(null);\n        }\n    }, []);\n\n    const onTokenize = useCallback((data) => {\n        resolveRef.current(data);\n    }, []);\n\n    const fastlane = useCreateFastlane({\n        clientToken: getClientToken(),\n        fraudEnabled: fraud.enabled,\n        dataCollector\n    });\n\n    const {\n        onClick,\n        processing,\n        triggerAuthentication\n    } = useProcessFastlane({\n        i18n: getData('i18n'),\n        email,\n        onError: setExpressPaymentError,\n        fastlane,\n        shippingData,\n        openFastlaneModal\n    });\n\n    useEffect(() => {\n        if (!fastlane || !triggerAuthentication || !isEmail(email)) {\n            return;\n        }\n        // Only trigger on first load if fastlane_pageload is true\n        if (authOnLoad && isInitialRender.current) {\n            isInitialRender.current = false;\n            triggerAuthentication(email, false);\n            return;\n        }\n    }, [email, fastlane, triggerAuthentication]);\n\n\n    return (\n        <>\n            <button\n                id=\"wc-ppcp-fastlane-checkout\"\n                className=\"wc-ppcp-fastlane-button\"\n                disabled={openModal || processing}\n                onClick={onClick}>\n                <img className={'wc-ppcp-fastlane-icon'} src={getData('icon_url')}/>\n            </button>\n            <FastlaneModal\n                i18n={getData('i18n')}\n                open={openModal}\n                onClose={onClose}\n                fastlane={fastlane}\n                onTokenize={onTokenize}\n                shippingData={shippingData}/>\n        </>\n    );\n}","export * from './use-create-fastlane';\nexport * from './use-process-fastlane'","import {useEffect} from '@wordpress/element';\nimport {useSelect, useDispatch} from '@wordpress/data';\nimport {create} from '@braintree/fastlane';\nimport {STORE_KEY} from '@wc-braintree/block-data';\n\nexport const useCreateFastlane = ({clientToken, fraudEnabled, dataCollector}) => {\n\n    const fastlane = useSelect(select => {\n        return select(STORE_KEY).getFastlane();\n    });\n\n    const {\n        setFastlane,\n    } = useDispatch(STORE_KEY);\n\n    useEffect(() => {\n        create({\n            authorization: clientToken,\n            ...(dataCollector && {\n                deviceData: dataCollector.deviceData\n            }),\n        }).then(result => {\n            setFastlane(result);\n        });\n    }, [fraudEnabled, dataCollector]);\n\n    useEffect(() => {\n        setFastlane(fastlane);\n    }, []);\n\n    return fastlane;\n}","import {useEffect, useState, useCallback, useRef} from '@wordpress/element';\nimport {isEmail} from '@wordpress/url';\nimport {CART_STORE_KEY, PAYMENT_STORE_KEY} from '@woocommerce/block-data';\nimport {STORE_KEY} from '@wc-braintree/block-data';\nimport {useDispatch, useSelect} from '@wordpress/data';\nimport {extractFullName} from \"../../utils\";\n\nexport const useProcessFastlane = (\n    {\n        i18n,\n        email,\n        onError,\n        fastlane,\n        buttonRef,\n        shippingData,\n        openFastlaneModal\n    }) => {\n\n    const [processing, setProcessing] = useState(false);\n    const currentData = useRef({email, fastlane, buttonRef, onError, shippingData});\n\n    const {\n        emails,\n        isCustomerFound\n    } = useSelect(select => {\n        const store = select(STORE_KEY);\n        return {\n            emails: store.getCanceledEmails(),\n            isCustomerFound: store.isCustomerFound()\n        }\n    })\n\n    const {\n        setBillingAddress\n    } = useDispatch(CART_STORE_KEY);\n\n    const {\n        setPaymentToken,\n        addCanceledEmail,\n        setCustomerContextId\n    } = useDispatch(STORE_KEY);\n\n    const {\n        __internalSetActivePaymentMethod: setActivePaymentMethod\n    } = useDispatch(PAYMENT_STORE_KEY);\n\n    useEffect(() => {\n        currentData.current = {\n            ...currentData.current,\n            email,\n            onError,\n            fastlane,\n            buttonRef,\n            shippingData\n        }\n    }, [email, onError, fastlane, buttonRef, shippingData]);\n\n    const removeEmptyValues = (obj) => {\n        return Object.fromEntries(\n            Object.entries(obj).filter(([_, value]) =>\n                value !== undefined && value !== null && value !== ''\n            )\n        );\n    }\n\n    const updateShippingAddress = useCallback((address) => {\n        const {\n            shippingData\n        } = currentData.current;\n\n        const {\n            setShippingAddress\n        } = shippingData;\n\n        setShippingAddress(removeEmptyValues({\n            first_name: address?.firstName || '',\n            last_name: address?.lastName,\n            address_1: address?.streetAddress,\n            address_2: address?.extendedAddress,\n            city: address?.locality || '',\n            state: address?.region || '',\n            postcode: address?.postalCode || '',\n            country: address?.countryCodeAlpha2 || '',\n            phone: address?.phoneNumber || ''\n        }));\n    }, []);\n\n    const updateBillingAddress = useCallback((address) => {\n        setBillingAddress(removeEmptyValues({\n            first_name: address?.firstName || '',\n            last_name: address?.lastName,\n            address_1: address?.streetAddress,\n            address_2: address?.extendedAddress,\n            city: address?.locality || '',\n            state: address?.region || '',\n            postcode: address?.postalCode || '',\n            country: address?.countryCodeAlpha2 || '',\n            phone: address?.phoneNumber || ''\n        }));\n    }, [setBillingAddress]);\n\n    const scrollToElement = useCallback((selector, offset = 100) => {\n        const el = document.querySelector(selector);\n        if (!el) {\n            return;\n        }\n        const rect = el.getBoundingClientRect();\n        const scrollPosition = rect.top + window.scrollY - offset;\n        window.scrollTo({\n            behavior: 'smooth',\n            left: 0,\n            top: scrollPosition\n        });\n    }, []);\n\n    const triggerAuthentication = useCallback(async (email, showSignup = true) => {\n        const {\n            fastlane,\n            shippingData,\n        } = currentData.current;\n        const {\n            needsShipping\n        } = shippingData;\n        const {\n            profile,\n            identity\n        } = fastlane;\n\n        try {\n            setProcessing(true);\n            const {\n                customerContextId\n            } = await identity.lookupCustomerByEmail(email);\n\n            if (customerContextId) {\n                const {\n                    profileData,\n                    authenticationState\n                } = await identity.triggerAuthenticationFlow(customerContextId);\n                if (authenticationState === 'canceled') {\n                    addCanceledEmail(email);\n                    setCustomerContextId(null);\n                } else if (authenticationState === 'succeeded') {\n                    let {\n                        name,\n                        card,\n                        shippingAddress\n                    } = profileData;\n                    setCustomerContextId(customerContextId);\n\n                    if (needsShipping) {\n                        const {\n                            selectedAddress\n                        } = await profile.showShippingAddressSelector();\n                        if (!selectedAddress) {\n                            addCanceledEmail(email);\n                            setCustomerContextId(null);\n                            return;\n                        }\n                        shippingAddress = selectedAddress;\n                        updateShippingAddress(shippingAddress);\n                    }\n\n                    if (card?.paymentSource?.card?.billingAddress) {\n                        updateBillingAddress({\n                            ...name,\n                            ...card.paymentSource.card.billingAddress,\n                            phoneNumber: shippingAddress?.phoneNumber || null\n                        });\n                    }\n\n                    setPaymentToken(card);\n                    setActivePaymentMethod('braintree_cc');\n                    scrollToElement('#radio-control-wc-payment-method-options-braintree_cc');\n                }\n            } else if (showSignup) {\n                setCustomerContextId(null);\n                // display the Fastlane modal\n                const token = await openFastlaneModal();\n\n                if (token) {\n                    if (token?.paymentSource?.card?.billingAddress) {\n                        let address = token.paymentSource.card.billingAddress;\n                        if (token.paymentSource.card.billingAddress.toBtSdkType) {\n                            address = token.paymentSource.card.billingAddress.toBtSdkType();\n                        } else {\n                            const name = extractFullName(token.paymentSource.card.name);\n                            address = {\n                                firstName: name[0],\n                                lastName: name[1],\n                                ...address\n                            }\n                            updateShippingAddress(address);\n                        }\n                        updateBillingAddress(address);\n                    }\n\n                    setPaymentToken(token);\n                    setActivePaymentMethod('braintree_cc');\n                    scrollToElement('#radio-control-wc-payment-method-options-braintree_cc');\n                }\n            }\n        } catch (error) {\n            console.info(error);\n        } finally {\n            setProcessing(false);\n        }\n\n    }, [\n        scrollToElement,\n        openFastlaneModal,\n        updateBillingAddress,\n        updateShippingAddress\n    ]);\n\n    const onClick = useCallback(async (e) => {\n        e.preventDefault();\n        const {\n            email,\n            onError\n        } = currentData.current;\n\n        if (!email) {\n            return onError(i18n.email_empty);\n        }\n        if (!isEmail(email)) {\n            return onError(i18n.email_invalid);\n        }\n\n        await triggerAuthentication(email);\n\n    }, [\n        scrollToElement,\n        updateBillingAddress,\n        updateShippingAddress,\n        triggerAuthentication\n    ]);\n\n    return {\n        emails,\n        onClick,\n        processing,\n        isCustomerFound,\n        triggerAuthentication\n    }\n}","import {registerExpressPaymentMethod} from '@woocommerce/blocks-registry';\nimport {getSetting} from '@woocommerce/settings';\nimport ExpressPaymentComponent from \"./express-payment-component\";\nimport {PaymentMethod} from \"../../components\";\nimport {getSettings, isCheckoutPage} from \"../utils\";\n\nconst getData = getSettings('braintree_fastlane');\n\nconst data = getSetting('braintree_fastlane_data');\n\nregisterExpressPaymentMethod({\n    name: 'braintree_fastlane',\n    canMakePayment: async () => {\n        return isCheckoutPage();\n    },\n    content: <PaymentMethod content={ExpressPaymentComponent} getData={getData}/>,\n    edit: <PaymentMethod content={ExpressPaymentComponent} getData={getData}/>,\n    supports: {\n        features: data.features\n    }\n})","import {removeNumberPrecision, formatPrice, getShippingOptionId} from \"../utils\";\n\n\nexport const getDisplayItems = (cartTotalItems, unit = 2) => {\n    let items = [];\n    const keys = ['total_tax', 'total_shipping'];\n    cartTotalItems.forEach(item => {\n        if (0 < item.value || (item.key && keys.includes(item.key))) {\n            items.push({\n                label: item.label,\n                type: 'LINE_ITEM',\n                price: removeNumberPrecision(item.value, unit).toString()\n            });\n        }\n    })\n    return items;\n}\n\nexport const getShippingOptions = (shippingRates) => {\n    let options = [];\n    shippingRates.forEach((shippingPackage, idx) => {\n        let rates = shippingPackage.shipping_rates.map(rate => {\n            let txt = document.createElement('textarea');\n            txt.innerHTML = rate.name;\n            let price = formatPrice(rate.price, rate.currency_code);\n            return {\n                id: getShippingOptionId(idx, rate.rate_id),\n                label: txt.value,\n                description: `${price}`\n            }\n        });\n        options = [...options, ...rates];\n    });\n    return options;\n}\n\nexport const getSelectedShippingOptionId = (shippingRates) => {\n    let defaultSelectedOptionId = '';\n    shippingRates.forEach((shippingPackage, idx) => {\n        shippingPackage.shipping_rates.forEach(rate => {\n            if (rate.selected) {\n                defaultSelectedOptionId = getShippingOptionId(idx, rate.rate_id);\n            }\n        });\n    });\n    return defaultSelectedOptionId;\n}","export * from './use-create-payments-client';\nexport * from './use-handle-tokenization';","import {useState, useEffect, useRef} from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport google from '@googlepay';\nimport {usePaymentEventsHandler} from \"../../hooks\";\nimport {extractSelectedShippingOption} from \"../../utils\";\n\nexport const useCreatePaymentsClient = ({getData, shippingData, billing, eventRegistration}) => {\n    const {needsShipping} = shippingData;\n    const [paymentsClient, setPaymentsClient] = useState(null);\n    const {addShippingHandler} = usePaymentEventsHandler({billing, shippingData, eventRegistration});\n    const currentData = useRef({billing, shippingData});\n    useEffect(() => {\n        currentData.current = {billing, shippingData};\n    }, [billing, shippingData]);\n    useEffect(() => {\n        const args = {\n            environment: getData('googleEnvironment'),\n            merchantInfo: {\n                merchantName: getData('merchantName'),\n                merchantId: getData('googleMerchantId')\n            },\n            paymentDataCallbacks: {\n                onPaymentAuthorized: () => Promise.resolve({\n                    transactionState: \"SUCCESS\"\n                })\n            }\n        }\n        if (needsShipping) {\n            args.paymentDataCallbacks.onPaymentDataChanged = (data) => {\n                return new Promise((resolve, reject) => {\n                    const {shippingAddress, shippingOptionData} = data;\n                    const {shippingData} = currentData.current;\n                    let shippingOptionId = shippingOptionData?.id;\n                    const newAddress = {\n                        city: shippingAddress?.locality || '',\n                        state: shippingAddress?.administrativeArea || '',\n                        postcode: shippingAddress?.postalCode || '',\n                        country: shippingAddress?.countryCode || ''\n                    };\n\n                    apiFetch({\n                        method: 'POST',\n                        url: getData('routes').shipping,\n                        data: {\n                            payment_method: 'braintree_googlepay',\n                            address: newAddress,\n                            shipping_method: shippingOptionId\n                        }\n                    }).then(response => {\n                        if (response.code) {\n                            shippingOptionId = null;\n                            resolve(response.data.braintree_googlepay);\n                        } else {\n                            resolve(response.data.braintree_googlepay.requestUpdate);\n                        }\n                    }).catch(response => {\n                        resolve(response.data.braintree_googlepay);\n                    }).finally(() => {\n                        shippingData.setShippingAddress({...shippingData.shippingAddress, ...newAddress});\n                        if (shippingOptionId && shippingOptionId !== 'shipping_option_unselected') {\n                            shippingData.setSelectedRates(...extractSelectedShippingOption(shippingOptionId));\n                        }\n                    });\n                });\n            }\n        }\n        setPaymentsClient(new google.payments.api.PaymentsClient(args));\n    }, [\n        needsShipping,\n        addShippingHandler\n    ]);\n    return paymentsClient;\n}","import {useRef, useCallback, useEffect} from '@wordpress/element';\nimport {getDisplayItems, getShippingOptions, getSelectedShippingOptionId} from \"../helpers\";\nimport {\n    removeNumberPrecision,\n    extractFullName,\n    DEFAULT_BILLING_ADDRESS,\n    DEFAULT_SHIPPING_ADDRESS\n} from \"../../utils\";\nimport {usePaymentMethodDataContext} from \"../../context\";\n\nexport const useHandleTokenization = (\n    {\n        getData,\n        onClick,\n        onClose,\n        googlePayInstance,\n        paymentsClient,\n        billing,\n        shippingData\n    }) => {\n    const currentData = useRef({billing, shippingData});\n    const payloadData = useRef({});\n    const {\n        onSubmit,\n        setPaymentMethodData,\n        onPaymentDataFilter\n    } = usePaymentMethodDataContext();\n    useEffect(() => {\n        currentData.current = {billing, shippingData, onClick, onClose, onSubmit};\n    }, [\n        onClick,\n        onClose,\n        shippingData,\n        billing,\n        onSubmit\n    ]);\n\n    useEffect(() => {\n        const unsubscribe = onPaymentDataFilter((data, {nonceKey, billing, shippingData}) => {\n            if (payloadData.current.paymentMethodNonce) {\n                data.meta.paymentMethodData[nonceKey] = payloadData.current.paymentMethodNonce;\n            }\n            if (payloadData.current?.billingAddress) {\n                data.meta.billingAddress = {\n                    ...DEFAULT_BILLING_ADDRESS,\n                    ...payloadData.current.billingAddress,\n                    email: billing.billingAddress.email\n                };\n                if (payloadData.current.email) {\n                    data.meta.billingAddress.email = payloadData.current.email;\n                }\n            }\n            if (payloadData.current?.shippingAddress) {\n                data.meta.shippingAddress = {\n                    ...DEFAULT_SHIPPING_ADDRESS,\n                    ...shippingData.shippingAddress,\n                    ...payloadData.current.shippingAddress\n                }\n            }\n            return data;\n        });\n        return () => unsubscribe();\n    }, [onPaymentDataFilter]);\n\n    const handleClick = useCallback(() => {\n        const {billing, shippingData} = currentData.current;\n        const {billingAddress, currency, cartTotal, cartTotalItems} = billing;\n        const {needsShipping, shippingRates} = shippingData;\n        currentData.current.onClick();\n        const paymentDataRequestArgs = {\n            merchantInfo: {\n                merchantName: getData('googleMerchantName'),\n                merchantId: getData('googleMerchantId')\n            },\n            transactionInfo: {\n                countryCode: getData('countryCode'),\n                currencyCode: currency.code,\n                totalPriceStatus: 'FINAL',\n                totalPrice: removeNumberPrecision(cartTotal.value, currency.minorUnit).toString(),\n                totalPriceLabel: getData('totalPriceLabel'),\n                displayItems: getDisplayItems(cartTotalItems, currency.minorUnit)\n            },\n            emailRequired: !billingAddress.email,\n            callbackIntents: ['PAYMENT_AUTHORIZATION'],\n            shippingAddressRequired: needsShipping\n        };\n        if (needsShipping) {\n            paymentDataRequestArgs.shippingAddressParameters = {};\n            paymentDataRequestArgs.shippingOptionRequired = true;\n            paymentDataRequestArgs.callbackIntents = [...paymentDataRequestArgs.callbackIntents, 'SHIPPING_ADDRESS', 'SHIPPING_OPTION'];\n            const shippingOptions = getShippingOptions(shippingRates);\n            if (shippingOptions.length) {\n                paymentDataRequestArgs.shippingOptionParameters = {\n                    shippingOptions,\n                    defaultSelectedOptionId: getSelectedShippingOptionId(shippingRates)\n                }\n            }\n        }\n        const paymentDataRequest = googlePayInstance.createPaymentDataRequest(paymentDataRequestArgs);\n        paymentDataRequest.allowedPaymentMethods[0].parameters.assuranceDetailsRequired = true;\n        paymentDataRequest.allowedPaymentMethods[0].parameters.billingAddressRequired = true;\n        paymentDataRequest.allowedPaymentMethods[0].parameters.billingAddressParameters = {\n            format: 'FULL',\n            phoneNumberRequired: true\n        }\n        paymentsClient.loadPaymentData(paymentDataRequest).then(async (payload) => {\n            // parse the payload\n            if (payload?.paymentMethodData?.info?.billingAddress) {\n                const address = payload.paymentMethodData.info.billingAddress;\n                const [first_name, last_name] = extractFullName(address.name);\n                payloadData.current.billingAddress = {\n                    first_name,\n                    last_name,\n                    address_1: address.address1,\n                    address_2: address.address2,\n                    city: address.locality,\n                    state: address.administrativeArea,\n                    postcode: address.postalCode,\n                    country: address.countryCode,\n                    phone: billingAddress.phone\n                }\n                if (address.phoneNumber && !billingAddress.phone) {\n                    payloadData.current.billingAddress.phone = address.phoneNumber;\n                }\n            }\n            if (payload.shippingAddress) {\n                const address = payload.shippingAddress;\n                const [first_name, last_name] = extractFullName(address.name);\n                payloadData.current.shippingAddress = {\n                    first_name,\n                    last_name,\n                    address_1: address.address1,\n                    address_2: address.address2,\n                    city: address.locality,\n                    state: address.administrativeArea,\n                    postcode: address.postalCode,\n                    country: address.countryCode\n                };\n                if (payloadData.current?.billingAddress?.phone) {\n                    payloadData.current.shippingAddress.phone = payloadData.current.billingAddress.phone;\n                }\n            }\n            if (payload.email) {\n                payloadData.current.email = payload.email;\n            }\n            const data = await googlePayInstance.parseResponse(payload);\n            // set payment method\n            payloadData.current.paymentMethodNonce = data.nonce;\n            setPaymentMethodData({\n                nonce: data.nonce,\n                details: {\n                    bin: data.details.bin\n                }\n            });\n        }).catch(error => {\n            if (error?.statusCode === 'CANCELED') {\n                currentData.current.onClose();\n                return;\n            }\n            console.log(error);\n        });\n    }, [\n        paymentsClient,\n        googlePayInstance,\n        setPaymentMethodData\n    ]);\n    return handleClick;\n}\n\nexport default useHandleTokenization;","import {useState, useEffect, useRef, useCallback} from '@wordpress/element';\nimport {create as createGooglePay} from '@braintree/google-payment';\nimport {registerExpressPaymentMethod} from '@woocommerce/blocks-registry';\nimport {PaymentMethod} from \"../../components\";\nimport {getSettings, getClientToken, isCartPage, isCheckoutPage} from \"../utils\";\nimport google from '@googlepay';\nimport {useCreatePaymentsClient, useHandleTokenization} from \"./hooks\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport {useExpressBreakpointWidth} from \"../hooks\";\nimport GooglePayPreview from './preview';\n\nconst getData = getSettings('braintree_googlepay');\nlet canPay = null;\nconst paymentsClient = new google.payments.api.PaymentsClient({\n    environment: getData('googleEnvironment'),\n    merchantInfo: {\n        merchantName: getData('googleMerchantName'),\n        merchantId: getData('googleMerchantId')\n    }\n});\nconst GooglePayContainer = ({getData, billing, shippingData, eventRegistration, onClick, onClose}) => {\n    const el = useRef(null);\n    const [googlePayInstance, setGooglePayInstance] = useState(null);\n    useExpressBreakpointWidth({breakpoint: 375});\n    const {notice} = usePaymentMethodDataContext();\n    const paymentsClient = useCreatePaymentsClient({getData, billing, shippingData, eventRegistration});\n    const handleClick = useHandleTokenization({\n        getData,\n        onClick,\n        onClose,\n        googlePayInstance,\n        paymentsClient,\n        billing,\n        shippingData\n    });\n\n    const removeButton = useCallback((el) => {\n        while (el.lastChild) {\n            el.removeChild(el.lastChild);\n        }\n    }, []);\n\n    useEffect(() => {\n        createGooglePay({\n            authorization: getClientToken(),\n            googlePayVersion: 2,\n            googleMerchantId: getData('googleMerchantId')\n        }).then(instance => {\n            setGooglePayInstance(instance);\n        }).catch(error => notice.addNotice(error));\n    }, []);\n    useEffect(() => {\n        if (el.current && paymentsClient) {\n            removeButton(el.current);\n            const button = paymentsClient.createButton({\n                ...getData('buttonOptions'), ...{\n                    onClick: handleClick\n                }\n            });\n            if (getData('buttonShape') === 'rect') {\n                button.querySelector('button')?.classList?.remove('new_style');\n            } else {\n                button.querySelector('button')?.classList?.add('gpay-button-round');\n            }\n            el.current.append(button);\n        }\n    }, [\n        paymentsClient,\n        removeButton,\n        handleClick\n    ]);\n    return (\n        <div ref={el} className={'wc-braintree-blocks-gpay-button'}>\n\n        </div>\n    );\n}\n\nregisterExpressPaymentMethod({\n    name: 'braintree_googlepay_express',\n    gatewayId: 'braintree_googlepay',\n    paymentMethodId: 'braintree_googlepay',\n    canMakePayment: async () => {\n        if (isCartPage() && !getData('expressCartEnabled')) {\n            return false;\n        }\n        if (isCheckoutPage() && !getData('expressCheckoutEnabled')) {\n            return false;\n        }\n        if (canPay !== null) {\n            return canPay;\n        }\n        try {\n            const googlePayInstance = await createGooglePay({\n                authorization: getClientToken(),\n                googlePayVersion: 2,\n                googleMerchantId: getData('googleMerchantId')\n            });\n            let result = await paymentsClient.isReadyToPay({\n                apiVersion: 2,\n                apiVersionMinor: 0,\n                allowedPaymentMethods: googlePayInstance.createPaymentDataRequest().allowedPaymentMethods\n            });\n            if (result.result) {\n                canPay = true;\n            } else {\n                canPay = false;\n            }\n            return canPay;\n        } catch (error) {\n            return error;\n        }\n    },\n    content: <PaymentMethod\n        content={GooglePayContainer}\n        title={getData('title')}\n        name={'braintree_googlepay_express'}\n        gatewayId={'braintree_googlepay'}\n        icon={getData('icon')}\n        getData={getData}\n        isExpress={true}/>,\n    edit: <GooglePayPreview src={getData('editor').icon}/>,\n    supports: {\n        showSavedCards: getData('features').includes('tokenization'),\n        showSaveOption: true,\n        features: getData('features')\n    }\n});\n","export default function GooglePayPreview({src}) {\n    return (\n        <div\n            className={`gpay-block-editor`}\n            style={{maxHeight: '40px', backgroundColor: '#000', borderRadius: '4px'}}>\n            <img\n                src={src}\n                style={{\n                    width: '100%',\n                    height: '40px',\n                    objectFit: 'contain'\n                }}/>\n        </div>\n    )\n}","export * from './use-process-payment';\nexport * from './use-three-d-secure';\nexport * from './use-process-payment-failure';\nexport * from './use-device-data';\nexport * from './use-notice-handler';\nexport * from './use-payment-events-handler';\nexport * from './use-breakpoint-width'\nexport * from './use-manage-fastlane-payment-token';\nexport * from './use-process-fastlane-payment-token';","import {useEffect, useState, useRef} from '@wordpress/element';\nimport {getFromCache, storeInCache} from \"../utils\";\nimport {usePaymentMethodDataContext} from \"../context\";\n\nexport const useBreakpointWidth = (\n    {\n        key,\n        el,\n        className = '',\n        breakpoint = 0\n    }) => {\n    const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n    key = `${key}:breakpoint`;\n    useEffect(() => {\n        if (el) {\n            let minWidth = getFromCache(key, 0);\n            if (breakpoint < minWidth || !minWidth) {\n                minWidth = breakpoint;\n                storeInCache(key, minWidth);\n            }\n            if (el.clientWidth < minWidth) {\n                el.classList.add(className);\n            } else {\n                el.classList.remove(className);\n            }\n        }\n    }, [el, windowWidth]);\n\n    useEffect(() => {\n        const onWindowResize = (e) => setWindowWidth(window.innerWidth);\n        window.addEventListener('resize', onWindowResize);\n        return () => window.removeEventListener('resize', onWindowResize);\n    });\n}\n\nexport const useExpressBreakpointWidth = (\n    {\n        breakpoint,\n        className = 'wc-braintree-blocks-express-sm'\n    }) => {\n    const [element, setElement] = useState(null);\n    const {container} = usePaymentMethodDataContext();\n\n    useEffect(() => {\n        if (container) {\n            setElement(container.parentNode?.parentNode);\n        }\n    }, [container])\n\n    useBreakpointWidth({\n        key: 'express',\n        el: element,\n        breakpoint,\n        className\n    })\n}","import {useState, useEffect} from '@wordpress/element';\nimport {create} from '@braintree/data-collector';\nimport {usePaymentMethodDataContext} from \"../context\";\n\nexport const useDeviceData = (options = {}, skip = false) => {\n    const {client, notice, onPaymentDataFilter, fraud} = usePaymentMethodDataContext();\n    const enabled = fraud.enabled;\n    const {addNotice} = notice;\n    const [dataCollector, setDataCollector] = useState(null);\n\n    useEffect(() => {\n        if (enabled && client) {\n            create({\n                client,\n                kount: true, ...options\n            }, (error, instance) => {\n                if (error) {\n                    addNotice(error);\n                } else {\n                    setDataCollector(instance);\n                }\n            });\n        }\n    }, [enabled, client, addNotice]);\n\n    useEffect(() => {\n        if (!skip) {\n            const unsubscribe = onPaymentDataFilter((response, {gatewayId}) => {\n                response.meta.paymentMethodData[`${gatewayId}_device_data`] = dataCollector?.deviceData;\n                return response;\n            }, 10);\n            return () => unsubscribe();\n        }\n    }, [skip, dataCollector, onPaymentDataFilter]);\n\n    return dataCollector;\n}\n\nexport default useDeviceData;","import {useCallback} from '@wordpress/element';\nimport {useDispatch} from '@wordpress/data';\nimport {CART_STORE_KEY} from '@woocommerce/block-data';\nimport {STORE_KEY} from '@wc-braintree/block-data';\nimport {extractFullName} from '../utils';\nimport {setCustomerContextId} from \"../../data/checkout/actions\";\n\nexport const useManageFastlanePaymentToken = (\n    {\n        fastlane\n    }) => {\n\n    const {\n        setPaymentToken,\n        setCustomerContextId\n    } = useDispatch(STORE_KEY);\n\n    const {\n        setBillingAddress\n    } = useDispatch(CART_STORE_KEY);\n\n    const {\n        createErrorNotice\n    } = useDispatch('core/notices');\n\n    const onCancel = useCallback(() => {\n        setPaymentToken(null);\n        setCustomerContextId(null);\n    }, []);\n\n    const onChangePaymentMethod = useCallback(async () => {\n        try {\n            const {\n                selectedCard,\n                selectionChanged\n            } = await fastlane.profile.showCardSelector();\n\n            if (selectedCard && selectionChanged) {\n                setPaymentToken(selectedCard);\n\n                if (selectedCard?.paymentSource?.card?.billingAddress) {\n                    const name = selectedCard.paymentSource.card.name;\n                    const [firstName, lastName] = extractFullName(name);\n                    const address = {\n                        firstName,\n                        lastName,\n                        ...selectedCard.paymentSource.card.billingAddress\n                    };\n\n                    setBillingAddress({\n                        first_name: address.firstName || '',\n                        last_name: address.lastName || '',\n                        address_1: address?.streetAddress || '',\n                        address_2: address?.extendedAddress || '',\n                        city: address?.locality || '',\n                        state: address?.region || '',\n                        postcode: address?.postalCode || '',\n                        country: address?.countryCodeAlpha2 || '',\n                    });\n                }\n            }\n        } catch (error) {\n            createErrorNotice(error.message, {\n                id: 'wc-ppcp-tokenize-error',\n                context: 'wc/checkout/payments'\n            });\n        }\n    }, [fastlane]);\n\n    return {\n        onCancel,\n        onChangePaymentMethod\n    }\n\n}","import {useState, useCallback} from '@wordpress/element';\nimport {getErrorMessage} from \"../utils\";\n\nexport const useNoticeHandler = ({isExpress, setExpressPaymentError}) => {\n    const [notice, setNotice] = useState(null);\n    const addNotice = useCallback((error, type = 'error', isDismissible = true) => {\n        if (isExpress && type == 'error') {\n            setExpressPaymentError(getErrorMessage(error));\n        } else {\n            setNotice({\n                message: getErrorMessage(error),\n                type,\n                isDismissible\n            });\n        }\n\n    }, [setNotice, isExpress, setExpressPaymentError]);\n    const removeNotice = useCallback(() => setNotice(null), [setNotice]);\n    return [\n        notice,\n        addNotice,\n        removeNotice\n    ]\n}\n\nexport default useNoticeHandler;","import {useEffect, useRef, useCallback, useMemo} from '@wordpress/element';\n\nexport const usePaymentEventsHandler = (\n    {\n        billing,\n        shippingData,\n        eventRegistration\n    }) => {\n    const currentData = useRef({billing, shippingData});\n    const {onShippingRateSuccess, onShippingRateFail, onShippingRateSelectSuccess} = eventRegistration;\n    const handlers = useRef(new Map([\n        ['shippingHandler', []],\n        ['shippingMethodHandler', []],\n        ['shippingAddressHandler', []]\n    ]));\n    useEffect(() => {\n        currentData.current = {billing, shippingData};\n    });\n\n    const hasShippingOptions = (shippingRates) => shippingRates.map(rate => rate?.shipping_rates.length > 0).filter(Boolean).length > 0;\n\n    const handleShippingChange = useCallback(async () => {\n        const {billing, shippingData} = currentData.current;\n        const handler = handlers.current.get('shippingHandler');\n        if (handler.length > 0 && !shippingData.isSelectingRate && !shippingData.shippingRatesLoading) {\n            const success = hasShippingOptions(shippingData.shippingRates);\n            while (handler.length) {\n                const callback = handler.pop();\n                await Promise.resolve(callback(success, {billing, shippingData}));\n            }\n        }\n    }, []);\n\n    const handleShippingRateFail = useCallback(() => {\n        const {billing, shippingData} = currentData.current;\n        const handler = handlers.current.get('shippingHandler');\n        while (handler.length) {\n            const callback = handler.pop();\n            callback(false, {billing, shippingData});\n        }\n    }, []);\n\n    const addPaymentEventHandler = useCallback(type => (callback, execute = false) => {\n        const handler = handlers.current.get(type);\n        handler.push(callback);\n        if (execute) {\n            handleShippingChange();\n        }\n    }, [\n        handleShippingChange,\n        handlers.current\n    ]);\n\n    const addShippingHandler = useCallback(addPaymentEventHandler('shippingHandler'), [addPaymentEventHandler]);\n    const addShippingMethodHandler = useCallback(addPaymentEventHandler('shippingMethodHandler'), [addPaymentEventHandler]);\n    const addShippingAddressHandler = useCallback(addPaymentEventHandler('shippingAddressHandler'), [addPaymentEventHandler]);\n\n    useEffect(() => {\n        const unsubscribeShippingRateSuccess = onShippingRateSuccess(handleShippingChange);\n        const unsubscribeShippingRateSelectSuccess = onShippingRateSelectSuccess(handleShippingChange);\n        const unsubscribeShippingRateFail = onShippingRateFail(handleShippingRateFail);\n        return () => {\n            unsubscribeShippingRateSuccess();\n            unsubscribeShippingRateSelectSuccess();\n            unsubscribeShippingRateFail();\n        }\n    }, [\n        onShippingRateSuccess,\n        onShippingRateSelectSuccess,\n        onShippingRateFail\n    ]);\n\n    return {\n        addShippingHandler,\n        addShippingMethodHandler,\n        addShippingAddressHandler\n    }\n}","import {useEffect, useRef, useCallback} from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport {BraintreeError, ensureErrorResponse} from \"../utils\";\n\nexport const useProcessFastlanePaymentToken = (\n    {\n        token,\n        responseTypes,\n        shouldSavePayment,\n        onPaymentDataFilter\n    }) => {\n\n    const currentData = useRef({token});\n\n    useEffect(() => {\n        currentData.current = {token, responseTypes};\n    }, [token, responseTypes]);\n\n    useEffect(() => {\n        const unsubscribe = onPaymentDataFilter(async (response, {nonceKey}) => {\n            const {\n                token,\n                responseTypes\n            } = currentData.current;\n            try {\n                return {\n                    ...response,\n                    meta: {\n                        ...response.meta,\n                        paymentMethodData: {\n                            [nonceKey]: token.id,\n                            braintree_cc_save_method: shouldSavePayment\n                        }\n                    }\n                }\n            } catch (error) {\n                return ensureErrorResponse(responseTypes, error);\n            }\n        }, 5);\n        return unsubscribe;\n    }, [shouldSavePayment, onPaymentDataFilter]);\n\n}","import {useEffect} from '@wordpress/element';\n\nexport const useProcessPaymentFailure = (\n    {\n        event,\n        onError = null,\n        responseTypes,\n        messageContext = null,\n        paymentMethodId,\n        activePaymentMethod,\n    }) => {\n    useEffect(() => {\n        const unsubscribe = event((data) => {\n            if (data?.processingResponse?.paymentDetails?.braintreeErrorMessage) {\n                const message = data.processingResponse.paymentDetails.braintreeErrorMessage;\n                return {\n                    type: responseTypes.ERROR,\n                    message,\n                    messageContext\n                }\n            }\n            if (onError && activePaymentMethod === paymentMethodId) {\n                onError('');\n            }\n            return null;\n        });\n        return () => unsubscribe();\n    }, [event, onError, paymentMethodId, activePaymentMethod]);\n}\n\nexport default useProcessPaymentFailure;","import {useEffect, useRef} from '@wordpress/element';\nimport {ensureErrorResponse, ensureSuccessResponse} from \"../utils\";\nimport {useThreeDSecure} from \"./use-three-d-secure\";\nimport {useDeviceData} from \"./use-device-data\";\nimport {usePaymentMethodDataContext} from '../context';\n\nexport const useProcessPayment = (\n    {\n        name,\n        billing,\n        gatewayId,\n        useFastlane = false,\n        shippingData,\n        responseTypes,\n        onPaymentSetup,\n        activePaymentMethod,\n        advancedFraudOptions = {}\n    }) => {\n    const currentData = useRef({shippingData, billing, name, gatewayId, activePaymentMethod});\n    const {\n        paymentMethodData,\n        doPaymentDataFilter\n    } = usePaymentMethodDataContext();\n\n    useThreeDSecure({name, gatewayId, skip: useFastlane});\n\n    useDeviceData(advancedFraudOptions);\n\n    useEffect(() => {\n        currentData.current = {\n            shippingData,\n            billing,\n            name,\n            gatewayId,\n            activePaymentMethod,\n            paymentMethodData\n        };\n    });\n\n    useEffect(() => {\n        const unsubscribe = onPaymentSetup(async () => {\n            if (currentData.current.activePaymentMethod == currentData.current.name) {\n                try {\n                    const nonceKey = `${gatewayId}_nonce_key`;\n                    const {paymentMethodData} = currentData.current;\n\n                    let response = {\n                        meta: {\n                            paymentMethodData: {\n                                [nonceKey]: paymentMethodData?.nonce || ''\n                            }\n                        },\n                        ...paymentMethodData\n                    }\n\n                    response = await doPaymentDataFilter(response, {nonceKey, ...currentData.current});\n\n                    // clean up the response since it could be carrying data passed between filters.\n                    response = {\n                        meta: {\n                            ...response.meta\n                        }\n                    }\n\n                    return ensureSuccessResponse(responseTypes, response);\n                } catch (error) {\n                    return ensureErrorResponse(responseTypes, error);\n                }\n            }\n        });\n        return () => unsubscribe();\n    }, [\n        gatewayId,\n        onPaymentSetup,\n        doPaymentDataFilter,\n    ]);\n}\n\nexport default useProcessPayment;","import {useState, useEffect, useCallback} from '@wordpress/element';\nimport {__} from '@wordpress/i18n';\nimport {create} from '@braintree/three-d-secure';\nimport {removeNumberPrecision} from \"../utils\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport {getSettings} from '../utils';\n\nexport const useThreeDSecure = ({name, gatewayId, skip = false, vaulted = false}) => {\n    const settings = getSettings(name);\n    const {client, notice, onPaymentDataFilter, threeDSecureEnabled} = usePaymentMethodDataContext();\n    const {addNotice} = notice;\n    const [instance, setInstance] = useState(null);\n    useEffect(() => {\n        if ((threeDSecureEnabled || vaulted) && client && !instance) {\n            try {\n                create({\n                    version: 2,\n                    client\n                }, (error, instance) => {\n                    if (!error) {\n                        setInstance(instance);\n                    } else {\n                        addNotice(error);\n                    }\n                });\n            } catch (error) {\n                console.log(error);\n            }\n        }\n    }, [\n        instance,\n        threeDSecureEnabled,\n        vaulted,\n        client,\n        addNotice\n    ]);\n\n    useEffect(() => {\n        if (!skip && instance) {\n            const unsubscribe = onPaymentDataFilter((response, {nonceKey, shippingData, billing}) => {\n                return new Promise((resolve, reject) => {\n                    const {needsShipping, shippingAddress} = shippingData;\n                    const {billingAddress, cartTotal, currency} = billing;\n                    instance.verifyCard({\n                        amount: removeNumberPrecision(cartTotal.value, currency.minorUnit),\n                        nonce: response.nonce,\n                        bin: response?.details?.bin,\n                        email: billingAddress.email || '',\n                        challengeRequested: settings('challengeRequested'),\n                        collectDeviceData: true,\n                        billingAddress: {\n                            givenName: billingAddress.first_name,\n                            surname: billingAddress.last_name,\n                            phoneNumber: billingAddress.phone,\n                            streetAddress: billingAddress.address_1?.slice(0, 50),\n                            extendedAddress: billingAddress.address_2?.slice(0, 50),\n                            locality: billingAddress.city?.slice(0, 50),\n                            region: billingAddress.state,\n                            postalCode: billingAddress.postcode,\n                            countryCodeAlpha2: billingAddress.country\n                        },\n                        additionalInformation: needsShipping ? {\n                            shippingGivenName: shippingAddress.first_name,\n                            shippingSurname: shippingAddress.last_name,\n                            shippingAddress: {\n                                streetAddress: shippingAddress.address_1?.slice(0, 50),\n                                extendedAddress: shippingAddress.address_2?.slice(0, 50),\n                                locality: shippingAddress.city?.slice(0, 50),\n                                region: shippingAddress.state,\n                                postalCode: shippingAddress.postcode,\n                                countryCodeAlpha2: shippingAddress.country\n                            },\n                            ipAddress: settings('ipAddress')\n                        } : {\n                            ipAddress: settings('ipAddress')\n                        },\n                        onLookupComplete: (data, next) => next()\n                    }, (error, payload) => {\n                        if (error) {\n                            reject(error);\n                        } else if (payload?.threeDSecureInfo?.status === 'challenge_required') {\n                            // 3DS was cancelled so teardown and set to null.\n                            instance.teardown().then(() => setInstance(null));\n                            reject({\n                                message: __('3DS authorization cancelled.', 'woo-payment-gateway')\n                            });\n                        } else {\n                            response.meta.paymentMethodData[nonceKey] = payload.nonce;\n                            resolve(response);\n                        }\n                    });\n                })\n            }, 20);\n            return () => unsubscribe();\n        }\n    }, [skip, instance]);\n\n    return instance;\n}\n\nexport default useThreeDSecure;","export * from './use-load-paypal';\nexport * from './use-paypal-options';","import {useState, useEffect, useRef} from '@wordpress/element';\n\nexport const useLoadPayPal = (\n    {\n        paypalCheckoutInstance,\n        currency,\n        addNotice,\n        clientToken,\n        intent,\n        flow,\n        partnerCode\n    }) => {\n    const [paypal, setPayPal] = useState(null);\n    const currentData = useRef({});\n    useEffect(() => {\n        currentData.current.addNotice = addNotice;\n    }, [\n        addNotice\n    ]);\n    useEffect(() => {\n        if (paypalCheckoutInstance) {\n            if (window.paypal) {\n                setPayPal(window.paypal)\n            } else {\n                clientToken = JSON.parse(window.atob(clientToken));\n                const args = {\n                    'client-id': clientToken?.paypal?.clientId,\n                    commit: true,\n                    intent: flow === 'vault' ? 'tokenize' : intent,\n                    currency,\n                    vault: flow === 'vault' ? true : false,\n                    components: 'buttons,messages',\n                    dataAttributes: {\n                        'partner-attribution-id': partnerCode\n                    }\n                };\n                paypalCheckoutInstance.loadPayPalSDK(args).then(() => {\n                    setPayPal(window.paypal)\n                }).catch(error => {\n                    currentData.current.addNotice(error);\n                });\n            }\n        }\n    }, [paypalCheckoutInstance]);\n    return paypal;\n}\n\nexport default useLoadPayPal;","import {useEffect, useMemo, useCallback, useRef} from '@wordpress/element';\nimport $ from 'jquery';\nimport {__} from '@wordpress/i18n';\nimport {isEmpty} from 'lodash';\nimport {\n    extractSelectedShippingOption,\n    removeNumberPrecision,\n    getCartTotalItem,\n    extractFullName,\n    getShippingOptionId,\n    cartContainsSubscription,\n    DEFAULT_BILLING_ADDRESS,\n    DEFAULT_SHIPPING_ADDRESS\n} from \"../../utils\";\nimport {getSelectedShippingOptionId} from \"../../googlepay/helpers\";\nimport {usePaymentMethodDataContext} from \"../../context\";\n\nexport const usePayPalOptions = (\n    {\n        getData,\n        addNotice,\n        paypal,\n        paypalCheckoutInstance,\n        billing,\n        shippingData,\n        eventRegistration,\n        emitResponse,\n        onClick,\n        onClose\n    }) => {\n    const {cartTotal, currency} = billing;\n    const {needsShipping} = shippingData;\n    const {noticeContexts, responseTypes} = emitResponse;\n    const currentData = useRef({billing, shippingData});\n    const paymentData = useRef({});\n    const {\n        onSubmit,\n        onPaymentDataFilter,\n        setPaymentMethodData,\n    } = usePaymentMethodDataContext();\n    const {onCheckoutFail} = eventRegistration;\n\n    useEffect(() => {\n        const unsubscribe = onCheckoutFail(() => {\n            if (paymentData.current.incompleteBilling) {\n                return {\n                    type: responseTypes.ERROR,\n                    message: __('Please complete all required billing fields below then click Place Order.', 'woo-payment-gateway'),\n                    messageContext: noticeContexts.EXPRESS_PAYMENTS\n                };\n            }\n            return null;\n        });\n        return () => unsubscribe();\n    }, [\n        onCheckoutFail,\n        responseTypes,\n        noticeContexts\n    ]);\n\n    const getButtonStyle = useCallback((type) => {\n        const baseStyle = getData('buttonStyle');\n        switch (type) {\n            case paypal.FUNDING.PAYPAL:\n                return baseStyle;\n            case paypal.FUNDING.PAYLATER:\n                return {...baseStyle, ...getData('bnplButtonStyle')};\n            default:\n                return baseStyle;\n\n        }\n    }, [paypal]);\n\n    const getFormattedShippingOptions = (shippingRates) => {\n        let options = [];\n        shippingRates.forEach((shippingPackage, idx) => {\n            let rates = shippingPackage.shipping_rates.map(rate => {\n                let txt = document.createElement('textarea');\n                txt.innerHTML = rate.name;\n                return {\n                    id: getShippingOptionId(idx, rate.rate_id),\n                    label: txt.value,\n                    type: 'SHIPPING',\n                    selected: rate.selected,\n                    amount: {\n                        value: removeNumberPrecision(rate.price, rate.currency_minor_unit),\n                        currency_code: rate.currency_code\n                    }\n                }\n            });\n            options = [...options, ...rates];\n        });\n        return options;\n    };\n\n    useEffect(() => {\n        currentData.current = {billing, shippingData, onClick, onClose, onSubmit, addNotice};\n    }, [\n        billing,\n        shippingData,\n        onClick,\n        onClose,\n        onSubmit,\n        addNotice\n    ]);\n\n    useEffect(() => {\n        const unsubscribe = onPaymentDataFilter((data, {nonceKey, billing, shippingData}) => {\n            data.meta.paymentMethodData[nonceKey] = paymentData.current.nonce;\n            data.meta.billingAddress = {\n                ...DEFAULT_BILLING_ADDRESS,\n                ...billing.billingAddress,\n                ...paymentData.current.billingAddress\n            };\n            data.meta.shippingAddress = {\n                ...DEFAULT_SHIPPING_ADDRESS,\n                ...shippingData.shippingAddress,\n                ...paymentData.current.shippingAddress\n            }\n\n            return data;\n        }, 5);\n        return () => unsubscribe();\n    }, [onPaymentDataFilter]);\n\n    const onShippingChange = useCallback((address, selectedShippingOption) => {\n        return new Promise((resolve, reject) => {\n            $.ajax({\n                method: 'POST',\n                url: getData('routes').shipping,\n                data: {\n                    payment_method: 'braintree_paypal',\n                    address: address,\n                    shipping_method: selectedShippingOption\n                },\n                dataType: 'json',\n                success: function (result, status, jqXHR) {\n                    if (result.code) {\n                        reject(result);\n                    } else {\n                        resolve(result);\n                    }\n                }.bind(this),\n                error: function (xhr) {\n                    reject(xhr);\n                }.bind(this)\n            })\n        });\n    }, []);\n\n    const options = useMemo(() => {\n        if (paypal && paypalCheckoutInstance) {\n            const options = [];\n            const sources = [paypal.FUNDING.PAYPAL];\n            if (getData('bnplEnabled')) {\n                sources.push(paypal.FUNDING.PAYLATER);\n            }\n            for (let fundingSource of sources) {\n                const option = {\n                    fundingSource,\n                    style: getButtonStyle(fundingSource),\n                    onError: (error) => {\n                        currentData.current.onClose();\n                        currentData.current.addNotice(error);\n                    },\n                    onClick: () => {\n                        currentData.current.onClick();\n                    },\n                    onApprove: (data, actions) => {\n                        return paypalCheckoutInstance.tokenizePayment(data).then(response => {\n                            const {billingAddress} = currentData.current.billing;\n                            const {needsShipping} = currentData.current.shippingData;\n                            // set shipping address\n                            paymentData.current = {nonce: response.nonce, billingAddress: {}};\n                            if (response?.details?.billingAddress?.line1) {\n                                const address = response.details.billingAddress;\n                                paymentData.current.billingAddress = {\n                                    address_1: address.line1,\n                                    address_2: address.line2,\n                                    city: address.city,\n                                    state: address.state,\n                                    postcode: address.postalCode,\n                                    country: address.countryCode\n                                }\n                            }\n                            if (!isEmpty(response?.details?.shippingAddress)) {\n                                const {shippingAddress} = response.details;\n                                const [first_name, last_name] = extractFullName(shippingAddress.recipientName);\n                                paymentData.current.shippingAddress = {\n                                    first_name,\n                                    last_name,\n                                    address_1: shippingAddress.line1 || '',\n                                    address_2: shippingAddress.line2 || '',\n                                    city: shippingAddress.city || '',\n                                    state: shippingAddress.state || '',\n                                    postcode: shippingAddress.postalCode || '',\n                                    country: shippingAddress.countryCode || ''\n                                }\n                                if (isEmpty(paymentData.current.billingAddress)) {\n                                    paymentData.current.billingAddress = paymentData.current.shippingAddress;\n                                }\n                                if (response.details?.phone) {\n                                    paymentData.current.shippingAddress.phone = response.details.phone;\n                                }\n                            }\n                            if (response.details?.phone) {\n                                paymentData.current.billingAddress.phone = response.details.phone;\n                            }\n                            if (response.details?.email) {\n                                paymentData.current.billingAddress.email = response.details.email;\n                            }\n                            if (response.details?.firstName) {\n                                paymentData.current.billingAddress.first_name = response.details.firstName;\n                            }\n                            if (response.details?.lastName) {\n                                paymentData.current.billingAddress.last_name = response.details.lastName;\n                            }\n                            if (!paymentData.current.billingAddress.address_1 && !billingAddress.address_1) {\n                                paymentData.current.incompleteBilling = true;\n                            }\n                            if (cartContainsSubscription() && needsShipping) {\n                                currentData.current.addNotice(__('Please select a shipping option then click Place Order to complete your payment.', 'woo-payment-gateway'), 'info');\n                            } else {\n                                paymentData.current.nonce = response.nonce;\n                                setPaymentMethodData({\n                                    nonce: response.nonce\n                                });\n                            }\n                        });\n                    },\n                    createOrder: () => {\n                        return paypalCheckoutInstance.createPayment({\n                            flow: cartContainsSubscription() ? 'vault' : 'checkout',\n                            intent: getData('intent'),\n                            currency: currency.code,\n                            displayName: getData('displayName'),\n                            amount: removeNumberPrecision(cartTotal.value, currency.minorUnit),\n                            enableShippingAddress: needsShipping,\n                            shippingAddressEditable: needsShipping\n                        }).then(id => {\n                            return id;\n                        }).catch(error => {\n                            console.log(error);\n                        })\n                    },\n                    onCancel: () => {\n                        currentData.current.onClose();\n                    }\n                }\n                if (cartContainsSubscription()) {\n                    option.createBillingAgreement = option.createOrder;\n                    delete (option.createOrder);\n                }\n                // can't update shipping options when using billing agreements.\n                if (needsShipping && !option.hasOwnProperty('createBillingAgreement')) {\n                    option.onShippingChange = (data, actions) => {\n                        const {shipping_address: address, selected_shipping_option = null} = data;\n                        const selectedShippingOption = selected_shipping_option?.id || null;\n                        const shippingData = currentData.current.shippingData;\n                        const newAddress = {\n                            city: address.city || '',\n                            state: address.state || '',\n                            postcode: address.postal_code || '',\n                            country: address.country_code || ''\n                        }\n                        return onShippingChange(newAddress, selectedShippingOption).then(response => {\n                            const patch = response.data.braintree_paypal.patch;\n                            return actions.order.patch(patch).then(() => {\n                                return actions.resolve();\n                            });\n                        }).finally(() => {\n                            if (selectedShippingOption) {\n                                shippingData.setSelectedRates(...extractSelectedShippingOption(selectedShippingOption));\n                            }\n                        });\n                    }\n                }\n                let button = paypal.Buttons(option);\n                if (button.isEligible()) {\n                    options.push(option);\n                }\n            }\n            return options;\n        }\n    }, [\n        paypal,\n        needsShipping,\n        onShippingChange,\n        setPaymentMethodData,\n        paypalCheckoutInstance\n    ]);\n    return options;\n}\n\nexport default usePayPalOptions;","import {useState, useEffect, useRef, useCallback} from '@wordpress/element';\nimport {registerExpressPaymentMethod} from '@woocommerce/blocks-registry';\nimport {ExperimentalOrderMeta, TotalsWrapper} from '@woocommerce/blocks-checkout';\nimport {registerPlugin} from '@wordpress/plugins';\nimport {create as createPayPalCheckout} from '@braintree/paypal-checkout';\nimport {\n    getClientToken,\n    getSettings,\n    getMerchantAccount,\n    cartContainsSubscription,\n    isCartPage,\n    isCheckoutPage\n} from \"../utils\";\nimport {Notice, PaymentMethod} from \"../../components\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport {useLoadPayPal, usePayPalOptions} from \"./hooks\";\nimport {useExpressBreakpointWidth} from \"../hooks\";\nimport PayPalPreview from './preview';\n\nconst getData = getSettings('braintree_paypal');\n\nconst PayPalContainer = ({billing, shippingData, eventRegistration, emitResponse, onClick, onClose}) => {\n    const {currency} = billing;\n    const {notice} = usePaymentMethodDataContext();\n    const {addNotice} = notice;\n    const [paypalCheckoutInstance, setPayPalCheckoutInstance] = useState(null);\n    const buttonContainer = useRef();\n    useExpressBreakpointWidth({breakpoint: 375});\n    const paypal = useLoadPayPal({\n        paypalCheckoutInstance,\n        currency: currency.code,\n        clientToken: getClientToken(),\n        addNotice,\n        intent: getData('intent'),\n        flow: cartContainsSubscription() ? 'vault' : 'checkout',\n        partnerCode: getData('partnerCode')\n    });\n    const options = usePayPalOptions({\n        getData,\n        addNotice,\n        paypal,\n        paypalCheckoutInstance,\n        billing,\n        shippingData,\n        eventRegistration,\n        emitResponse,\n        onClick,\n        onClose\n    })\n    useEffect(() => {\n        createPayPalCheckout({\n            authorization: getClientToken(),\n            merchantAccountId: getMerchantAccount(currency.code)\n        }).then(instance => {\n            setPayPalCheckoutInstance(instance)\n        }).catch(error => {\n            addNotice(error)\n        });\n    }, []);\n\n    useEffect(() => {\n        if (paypal && options) {\n            options.forEach(option => {\n                const button = paypal.Buttons(option);\n                if (button && button.isEligible()) {\n                    button.render(buttonContainer.current);\n                }\n            });\n        }\n    }, [paypal, options]);\n\n    return (\n        <>\n            {notice?.notice && <Notice notice={notice.notice} onRemove={notice.removeNotice}/>}\n            <div ref={buttonContainer}/>\n        </>\n    )\n}\n\nregisterExpressPaymentMethod({\n    name: 'braintree_paypal_express',\n    gatewayId: 'braintree_paypal',\n    paymentMethodId: 'braintree_paypal',\n    canMakePayment: () => {\n        if (isCartPage()) {\n            return getData('expressCartEnabled')\n        } else if (isCheckoutPage()) {\n            return getData('expressCheckoutEnabled');\n        }\n    },\n    content: <PaymentMethod\n        content={PayPalContainer}\n        title={getData('title')}\n        name={'braintree_paypal_express'}\n        gatewayId={'braintree_paypal'}\n        icon={getData('icon')}\n        getData={getData}\n        isExpress={true}\n        advancedFraudOptions={{paypal: true}}/>,\n    edit: <PayPalPreview src={getData('editor').icon}/>,\n    supports: {\n        showSavedCards: getData('features').includes('tokenization'),\n        showSaveOption: true,\n        features: getData('features')\n    }\n});\n\nconst OrderItemMessaging = ({cart, extensions, context}) => {\n    const {cartTotals} = cart;\n    const {currency_code: currency, total_price} = cartTotals;\n    const [paypalCheckout, setPayPalCheckout] = useState();\n    const currencies = getData('payLaterMsgCurrencies');\n    const isAvailable = getData('paylaterMsgEnabled') && currencies.includes(currency) && !cartContainsSubscription();\n    const container = useRef(null);\n    if (!isAvailable) {\n        return null;\n    }\n    useEffect(() => {\n        createPayPalCheckout({\n            authorization: getClientToken(),\n            merchantAccountId: getMerchantAccount(currency)\n        }).then((instance) => setPayPalCheckout(instance)).catch(() => {\n        });\n    }, []);\n    const paypal = useLoadPayPal({\n        paypalCheckoutInstance: paypalCheckout,\n        currency,\n        addNotice: null,\n        clientToken: getClientToken(),\n        intent: getData('intent'),\n        flow: 'checkout',\n        partnerCode: getData('partnerCode')\n    });\n\n    useEffect(() => {\n        if (paypal) {\n            paypal.Messages({\n                amount: total_price / (10 ** cartTotals.currency_minor_unit),\n                currency,\n                placement: 'checkout',\n                style: {\n                    layout: 'text',\n                    logo: {\n                        type: 'primary',\n                        position: 'left'\n                    },\n                    text: {color: getData('paylaterTxtColor')}\n                }\n            }).render(container.current);\n        }\n    }, [paypal, total_price]);\n    return (\n        <TotalsWrapper>\n            <div className='wc-block-components-totals-item'>\n                <div ref={container} className='paypal-msg-container'></div>\n            </div>\n        </TotalsWrapper>\n    )\n}\n\nconst render = () => {\n    return (\n        <ExperimentalOrderMeta>\n            <OrderItemMessaging/>\n        </ExperimentalOrderMeta>\n    )\n}\n\n\nregisterPlugin('wc-braintree', {\n    render,\n    scope: 'woocommerce-checkout'\n});\n","export default function PayPalPreview({src}) {\n    return (\n        <div\n            className='paypal-block-editor'\n            style={{\n                height: '40px',\n                maxHeight: '40px',\n                backgroundColor: '#ffc439',\n                borderRadius: '4px',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center'\n            }}>\n            <img\n                src={src}\n                style={{\n                    width: '100%',\n                    height: '25px',\n                    objectFit: 'contain'\n                }}/>\n        </div>\n    )\n}","import {getSetting} from '@woocommerce/settings';\nimport apiFetch from '@wordpress/api-fetch';\nimport {create as createClient} from '@braintree/client';\nimport {getCurrency, formatPrice as wcFormatPrice} from '@woocommerce/price-format';\n\nconst wcBraintreeData = getSetting('wcBraintreeData');\n\nconst errorMessages = getSetting('wcBraintreeMessages');\n\nconst CACHE_PREFIX = 'wcBraintree:';\n\nconst SHIPPING_OPTION_REGEX = /^([\\w]+)\\:(.+)$/;\n\nexport const getSettings = (name) => {\n    name = `${name}_data`;\n    return (key) => {\n        if (key) {\n            return getSetting(name)[key];\n        }\n        return getSetting(name);\n    }\n}\n\nexport const getClientToken = () => wcBraintreeData.clientToken;\n\nexport const getMerchantAccount = (currency) => wcBraintreeData?.merchantAccounts?.[currency] ? wcBraintreeData.merchantAccounts[currency] : null\n\nexport const loadClient = new Promise((resolve, reject) => {\n    createClient({\n        authorization: wcBraintreeData.clientToken\n    }, (err, clientInstance) => {\n        if (err) {\n            reject(err);\n        } else {\n            resolve(clientInstance);\n        }\n    });\n});\n\nexport const canMakePayment = () => {\n    return new Promise((resolve, reject) => {\n        loadClient.then(() => resolve(true)).catch(error => {\n            console.log('Error loading client: ', error);\n            resolve({error});\n        });\n    });\n}\n\nexport const ensureSuccessResponse = (responseTypes, data = {}) => {\n    return {type: responseTypes.SUCCESS, ...data};\n}\n\nexport const ensureErrorResponse = (responseTypes, error) => {\n    return {type: responseTypes.ERROR, message: getErrorMessage(error)}\n};\n\nexport const getErrorMessage = (error) => {\n    let msg = error?.message;\n    if (typeof error == 'string') {\n        msg = error;\n    } else {\n        if (error.code && errorMessages[error.code]) {\n            msg = errorMessages[error.code];\n        }\n    }\n    return msg;\n}\n\nexport const removeNumberPrecision = (value, unit) => {\n    return value / 10 ** unit;\n}\n\nexport class BraintreeError extends Error {\n    constructor(error) {\n        super(error.message);\n        this.error = error;\n    }\n}\n\nconst getCacheKey = (key) => `${CACHE_PREFIX}${key}`;\n\nexport const storeInCache = (key, value) => {\n    const exp = Math.floor(new Date().getTime() / 1000) + (60 * 15);\n    if ('sessionStorage' in window) {\n        sessionStorage.setItem(getCacheKey(key), JSON.stringify({value, exp}));\n    }\n}\n\nexport const getFromCache = (key, defaultValue = null) => {\n    if ('sessionStorage' in window) {\n        try {\n            const item = JSON.parse(sessionStorage.getItem(getCacheKey(key)));\n            if (item) {\n                const {value, exp} = item;\n                if (Math.floor(new Date().getTime() / 1000) > exp) {\n                    deleteFromCache(getCacheKey(key));\n                } else {\n                    return value;\n                }\n            }\n        } catch (err) {\n        }\n    }\n    return defaultValue;\n}\n\nexport const deleteFromCache = (key) => {\n    if ('sessionStorage' in window) {\n        sessionStorage.removeItem(getCacheKey(key));\n    }\n}\n\nexport const formatPrice = (price, currencyCode) => {\n    const {prefix, suffix, decimalSeparator, minorUnit, thousandSeparator} = getCurrency(currencyCode);\n    if (price == '' || price === undefined) {\n        return price;\n    }\n\n    price = typeof price === 'string' ? parseInt(price, 10) : price;\n    price = price / 10 ** minorUnit;\n    price = price.toString().replace('.', decimalSeparator);\n    let fractional = '';\n    const index = price.indexOf(decimalSeparator);\n    if (index < 0) {\n        if (minorUnit > 0) {\n            price += `${decimalSeparator}${new Array(minorUnit + 1).join('0')}`;\n        }\n    } else {\n        const fractional = price.substr(index + 1);\n        if (fractional.length < minorUnit) {\n            price += new Array(minorUnit - fractional.length + 1).join('0');\n        }\n    }\n    // separate out price and decimals so thousands separator can be added.\n    const match = price.match(new RegExp(`(\\\\d+)\\\\${decimalSeparator}(\\\\d+)`));\n    if (match) {\n        ({1: price, 2: fractional} = match);\n    }\n    price = price.replace(new RegExp(`\\\\B(?=(\\\\d{3})+(?!\\\\d))`, 'g'), `${thousandSeparator}`);\n    price = fractional?.length > 0 ? price + decimalSeparator + fractional : price;\n    price = prefix + price + suffix;\n    return price;\n}\n\nexport const getShippingOptionId = (packageId, rateId) => `${packageId}:${rateId}`;\n\nexport const extractSelectedShippingOption = (id) => {\n    const result = id.match(SHIPPING_OPTION_REGEX);\n    if (result) {\n        const {1: packageIdx, 2: rate} = result;\n        return [rate, packageIdx];\n    }\n    return [];\n}\n\nexport const getSelectedShippingOptionId = (selectedRates) => {\n    for (let idx of Object.keys(selectedRates)) {\n        return getShippingOptionId(idx, selectedRates[idx]);\n    }\n}\n\nexport const extractFullName = (name) => {\n    const firstName = name.split(' ').slice(0, -1).join(' ');\n    const lastName = name.split(' ').pop();\n    return [firstName, lastName];\n}\n\nexport const extractAddressLines = (lines) => {\n    let address_1, address_2;\n    if (Array.isArray(lines)) {\n        address_1 = lines?.[0];\n        if (lines.length > 1) {\n            address_2 = lines?.[1];\n        }\n    }\n    return {address_1, address_2};\n}\n\nexport const getCartTotalItem = (key, cartTotalItems) => {\n    for (let item of cartTotalItems) {\n        if (item.key === key) {\n            return item.value;\n        }\n    }\n    return null;\n}\n\nexport const canShowSavedCard = () => {\n    return !cartContainsSubscription();\n}\n\nexport const cartContainsSubscription = () => wcBraintreeData?.hasSubscription == true;\n\nexport const isCartPage = () => wcBraintreeData.page === 'cart';\n\nexport const isCheckoutPage = () => wcBraintreeData.page === 'checkout';\n\nexport const DEFAULT_SHIPPING_ADDRESS = {\n    'first_name': '',\n    'last_name': '',\n    'company': '',\n    'address_1': '',\n    'address_2': '',\n    'city': '',\n    'state': '',\n    'postcode': '',\n    'country': '',\n    'phone': '',\n}\n\nexport const DEFAULT_BILLING_ADDRESS = {\n    ...DEFAULT_SHIPPING_ADDRESS,\n    'email': ''\n}\n\nexport const formatPaymentMethod = (format, data) => {\n    data = {\n        ...data,\n        card_type: data.brand,\n        last4: data.lastDigits\n    }\n\n    const replacementData = {};\n\n    // Create placeholders from the data object\n    Object.keys(data).forEach(key => {\n        replacementData[`{${key}}`] = data[key];\n    });\n\n    // Replace all placeholders with actual values\n    let result = format;\n    Object.keys(replacementData).forEach(placeholder => {\n        // Use split and join which is more efficient for simple replacements\n        while (result.includes(placeholder)) {\n            result = result.replace(placeholder, replacementData[placeholder]);\n        }\n    });\n\n    return result;\n}\n\nexport const fetchTokenNonce = async (token_id) => {\n    try {\n        let result = await apiFetch({\n            path: '/wc-braintree/v1/3ds/vaulted_nonce',\n            method: 'POST',\n            data: {token_id, version: 2}\n        });\n        return result;\n    } catch (error) {\n        console.info('Error fetching 3ds nonce. ', error);\n    }\n};\n","export * from './use-handle-tokenization';","import {useEffect, useCallback, useRef} from '@wordpress/element';\nimport {usePaymentMethodDataContext} from \"../../context\";\n\nexport const useHandleTokenization = ({venmoInstance, onSubmit}) => {\n    const paymentData = useRef(null);\n    const {\n        onPaymentDataFilter,\n        paymentMethodNonce,\n        setPaymentMethodNonce,\n        notice: {addNotice}\n    } = usePaymentMethodDataContext();\n    const handleClick = useCallback(async () => {\n        try {\n            if (paymentMethodNonce) {\n                onSubmit();\n            } else {\n                const result = await venmoInstance.tokenize();\n                paymentData.current = {nonce: result.nonce};\n                setPaymentMethodNonce(result.nonce);\n            }\n        } catch (error) {\n            addNotice(error);\n        }\n    }, [\n        venmoInstance,\n        onSubmit,\n        paymentMethodNonce\n    ]);\n\n    useEffect(() => {\n        const unsubscribe = onPaymentDataFilter((data, {nonceKey, gatewayId}) => {\n            data.meta.paymentMethodData[nonceKey] = paymentData.current.nonce;\n            return data;\n        }, 5);\n        return () => unsubscribe();\n    }, [onPaymentDataFilter]);\n\n    return {handleClick}\n}\n\nexport default useHandleTokenization;","import {create as createVenmo} from '@braintree/venmo';\nimport {useState, useEffect} from '@wordpress/element';\nimport {__} from '@wordpress/i18n';\nimport {registerPaymentMethod} from '@woocommerce/blocks-registry';\nimport {Notice, PaymentMethodLabel} from \"../../components\";\nimport {PaymentMethod} from \"../../components\";\nimport {SavedTokenProvider} from \"../../components\";\nimport {getSettings, getClientToken} from \"../utils\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport {useHandleTokenization} from \"./hooks\";\n\nconst getData = getSettings('braintree_venmo');\n\nconst loadVenmo = new Promise((resolve, reject) => {\n    createVenmo({\n        authorization: getClientToken(),\n        allowNewBrowserTab: true,\n        allowDesktop: true\n    }).then(instance => resolve(instance)).catch(error => reject(error));\n});\n\nconst VenmoComponent = ({onSubmit}) => {\n    const {notice} = usePaymentMethodDataContext();\n    const [venmoInstance, setVenmoInstance] = useState(null);\n    const {handleClick} = useHandleTokenization({\n        venmoInstance,\n        onSubmit\n    });\n\n    useEffect(() => {\n        loadVenmo.then(instance => setVenmoInstance(instance)).catch(error => notice.addNotice(error));\n    }, []);\n    return (\n        <>\n            {notice?.notice && <Notice notice={notice.notice} onRemove={notice.removeNotice}/>}\n            <div className={'wc-braintree-blocks-venmo-button__container'}>\n                <p>{__('Complete your order with', 'woo-payment-gateway')}</p>\n                {venmoInstance && <VenmoButton onClick={handleClick} src={getData('buttonIcon')}/>}\n            </div>\n        </>\n    )\n}\n\nconst VenmoButton = ({onClick, src}) => {\n    return (\n        <button\n            className={'wc-braintree-blocks-venmo__button'}\n            onClick={e => {\n                e.preventDefault();\n                onClick();\n            }}>\n            <img src={src}/>\n        </button>\n    )\n}\n\nregisterPaymentMethod({\n    name: getData('name'),\n    label: <PaymentMethodLabel\n        title={getData('title')}\n        paymentMethod={getData('name')}\n        icon={getData('icon')}/>,\n    ariaLabel: __('Venmo', 'woo-payment-gateway'),\n    placeOrderButtonLabel: getData('placeOrderButtonLabel'),\n    canMakePayment: () => new Promise((resolve, reject) => {\n        loadVenmo.then(instance => {\n            resolve(instance.isBrowserSupported());\n        }).catch(error => {\n            resolve(false);\n        });\n    }),\n    content: <PaymentMethod\n        content={VenmoComponent}\n        title={getData('title')}\n        description={getData('description')}\n        name={getData('name')}\n        gatewayId={getData('name')}\n        icon={getData('icon')}\n        getData={getData}/>,\n    savedTokenComponent: <SavedTokenProvider\n        getData={getData}\n        name={getData('name')}\n        gatewayId={getData('name')}\n        vaultedThreeDSecure={getData('vaultedThreeDSecure')}/>,\n    edit: <PaymentMethod content={VenmoComponent} getData={getData}/>,\n    supports: {\n        showSavedCards: getData('features').includes('tokenization'),\n        showSaveOption: false,\n        features: getData('features')\n    }\n});","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\tvar nativeCodeString = '[native code]';\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n"],"names":["ErrorBoundary","props","state","hasError","error","errorInfo","this","setState","className","toString","componentStack","children","Component","onClick","text","logo","src","i","i18n","open","onClose","fastlane","onTokenize","shippingData","useState","rendered","setRendered","currentData","useRef","useCallback","e","preventDefault","paymentComponent","current","getPaymentToken","response","console","log","useEffect","needsShipping","shippingAddress","firstName","first_name","lastName","last_name","streetAddress","address_1","extendedAddress","address_2","locality","city","region","postalCode","postcode","countryCodeAlpha2","country","phoneNumber","phone","FastlanePaymentComponent","then","instance","render","document","body","classList","add","setTimeout","remove","classnames","continue","cancel","Notice","notice","onRemove","classes","classNames","type","key","isDismissible","message","PaymentMethodLabel","title","components","paymentMethod","icon","Label","Icons","PaymentMethodIcons","Array","isArray","icons","align","PaymentMethod","content","description","el","container","setContainer","Content","ref","PaymentMethodDataProvider","PaymentMethodProviderContainer","name","onError","billing","gatewayId","eventRegistration","emitResponse","activePaymentMethod","isExpress","advancedFraudOptions","onPaymentSetup","onCheckoutFail","responseTypes","noticeContexts","usePaymentMethodDataContext","useProcessPayment","useFastlane","paymentToken","useProcessPaymentFailure","event","paymentMethodId","messageContext","EXPRESS_PAYMENTS","SavedTokenComponent","vaultedThreeDSecure","token","doPaymentDataFilter","useDeviceData","useThreeDSecure","vaulted","unsubscribe","fetchTokenNonce","result","success","BraintreeError","meta","paymentMethodData","data","ensureSuccessResponse","ensureErrorResponse","SET_FASTLANE","SET_PAYMENT_TOKEN","SET_CUSTOMER_CONTEXT","ADD_CANCELED_EMAIL","ACTION_TYPES","id","email","config","reducer","selectors","actions","store","createReduxStore","STORE_KEY","register","DEFAULT_STATE","action","newState","customerContextId","canceledEmails","useCreatePaymentRequest","applePayInstance","getData","useMemo","cartTotal","currency","cartTotalItems","billingAddress","shippingRates","request","total","label","amount","removeNumberPrecision","value","minorUnit","lineItems","formatLineItems","currencyCode","code","countryCode","requiredBillingContactFields","requiredShippingContactFields","fields","shippingMethods","formatShippingMethods","createPaymentRequest","useCreateSession","paymentRequest","addShippingHandler","usePaymentEventsHandler","onSubmit","setPaymentMethodNonce","onPaymentDataFilter","addNotice","applePayData","getApplePayVersion","range","version","ApplePaySession","supportsVersion","onSessionCancel","onValidateMerchant","session","performValidation","validationURL","displayName","merchantSession","completeMerchantValidation","catch","abort","onPaymentMethodSelected","address","billingContact","administrativeArea","apiFetch","method","url","payment_method","messages","completePaymentMethodSelection","xhr","onShippingContactSelected","shippingContact","newAddress","toUpperCase","shipping_address","completeShippingContactSelection","shippingContactUpdate","errors","ApplePayError","contactField","newTotal","newShippingMethods","finally","setShippingAddress","onShippingMethodSelected","shippingMethod","setSelectedRates","selectedRates","shipping_method","identifier","completeShippingMethodSelection","shippingMethodUpdate","extractSelectedShippingOption","onPaymentAuthorized","length","completePayment","status","STATUS_FAILURE","tokenize","payment","givenName","familyName","extractAddressLines","addressLines","emailAddress","nonce","STATUS_SUCCESS","nonceKey","isEmpty","DEFAULT_BILLING_ADDRESS","DEFAULT_SHIPPING_ADDRESS","createSession","onvalidatemerchant","onpaymentmethodselected","onpaymentauthorized","oncancel","onshippingcontactselected","onshippingmethodselected","handleClick","begin","alert","getSettings","loadApplePay","Promise","resolve","reject","createApplePay","authorization","getClientToken","ApplePayContainer","setApplePayInstance","ApplePayButton","style","rounded","styles","getButtonStyle","registerExpressPaymentMethod","canMakePayment","isCartPage","isCheckoutPage","window","canMakePayments","edit","supports","features","maxHeight","backgroundColor","borderRadius","width","height","objectFit","items","keys","forEach","item","includes","push","options","shippingPackage","idx","rates","shipping_rates","map","rate","txt","createElement","innerHTML","getShippingOptionId","rate_id","detail","price","currency_minor_unit","dispatch","callback","priority","ACTIONS","ADD_ACTION","uniqueId","REMOVE_ACTION","emittFilter","args","handlers","events","sortedEvents","from","values","sort","a","b","Map","set","delete","PaymentMethodDataContext","createContext","setExpressPaymentError","client","setClient","__setPaymentMethodData","useReducer","actionReducer","eventHandlers","useActionEmitter","currentEventHandlers","useNoticeHandler","removeNotice","useSelect","select","getFastlane","customerFound","isCustomerFound","setPaymentMethodData","prev","loadClient","paymentMethodDataContext","fraud","enabled","threeDSecureEnabled","Provider","useContext","CustomForm","getCustomFormConfig","breakpoint","fieldKeys","hostedFieldInstance","setHostedFieldsInstance","setFields","containerElement","setContainerElement","cardBrand","setCardBrand","fieldOrder","assertFieldsValid","reduce","acc","prop","hasOwnProperty","setFieldContainer","field","addClassToFields","payload","details","invalidFieldKeys","useBreakpointWidth","clientInstance","create","on","cards","emittedBy","isValid","indexOf","nextField","focus","cloneElement","setFieldOrder","CardIcon","getIconSrc","InvalidCustomForm","sprintf","__","forms","assertValidConfig","assertValidFormId","Error","assertConfigHasProperties","missingParams","TypeError","join","BootstrapForm","CardNumber","CardExpirationDate","CardCVV","registerCustomForm","SimpleForm","DropinForm","setDropinInstance","clientToken","locale","setError","element","setElement","setRef","node","createDropin","dropinInstance","display","justifyContent","maxWidth","onChange","getSetting","HostedFieldsContainer","DropinContainer","requestPaymentMethod","err","registerPaymentMethod","ariaLabel","openModal","setOpenModal","setPaymentToken","useDispatch","emails","getCanceledEmails","showSignup","dropinEnabled","FastlaneLink","fastLaneLogo","fastlane_signup","FastlaneModal","savedTokenComponent","SavedTokenProvider","showSavedCards","showSaveOption","canShowSavedCard","fastlane_icons","payment_format","shouldSavePayment","card","paymentSource","brand","last4","lastDigits","expiry","useProcessFastlanePaymentToken","useManageFastlanePaymentToken","onCancel","onChangePaymentMethod","toLowerCase","formatPaymentMethod","change","extensions","isInitialRender","wc_braintree","CART_STORE_KEY","getNeedsShipping","getCustomerData","debouncedEmail","setDebouncedEmail","dataCollector","skip","useCreateFastlane","fraudEnabled","useProcessFastlane","openFastlaneModal","triggerAuthentication","timer","clearTimeout","isEmail","fastlane_pageload","getElementById","FastlaneWatermarkComponent","includeAdditionalInfo","component","parentElement","append","registerCheckoutBlock","metadata","Block","authOnLoad","resolveRef","promiseRef","processing","disabled","setFastlane","deviceData","buttonRef","setProcessing","setBillingAddress","addCanceledEmail","setCustomerContextId","setActivePaymentMethod","PAYMENT_STORE_KEY","__internalSetActivePaymentMethod","removeEmptyValues","obj","Object","fromEntries","entries","filter","updateShippingAddress","updateBillingAddress","scrollToElement","selector","offset","querySelector","rect","getBoundingClientRect","scrollPosition","top","scrollY","scrollTo","behavior","left","profile","identity","lookupCustomerByEmail","triggerAuthenticationFlow","profileData","authenticationState","showShippingAddressSelector","selectedAddress","toBtSdkType","extractFullName","info","email_empty","email_invalid","ExpressPaymentComponent","unit","formatPrice","currency_code","defaultSelectedOptionId","selected","paymentsClient","setPaymentsClient","environment","merchantInfo","merchantName","merchantId","paymentDataCallbacks","transactionState","onPaymentDataChanged","shippingOptionData","shippingOptionId","shipping","braintree_googlepay","requestUpdate","google","payments","api","PaymentsClient","useHandleTokenization","googlePayInstance","payloadData","paymentMethodNonce","paymentDataRequestArgs","transactionInfo","totalPriceStatus","totalPrice","totalPriceLabel","displayItems","getDisplayItems","emailRequired","callbackIntents","shippingAddressRequired","shippingAddressParameters","shippingOptionRequired","shippingOptions","getShippingOptions","shippingOptionParameters","getSelectedShippingOptionId","paymentDataRequest","createPaymentDataRequest","allowedPaymentMethods","parameters","assuranceDetailsRequired","billingAddressRequired","billingAddressParameters","format","phoneNumberRequired","loadPaymentData","address1","address2","parseResponse","bin","statusCode","canPay","createGooglePay","googlePayVersion","googleMerchantId","isReadyToPay","apiVersion","apiVersionMinor","setGooglePayInstance","useExpressBreakpointWidth","useCreatePaymentsClient","removeButton","lastChild","removeChild","button","createButton","innerWidth","windowWidth","setWindowWidth","minWidth","getFromCache","storeInCache","clientWidth","onWindowResize","addEventListener","removeEventListener","parentNode","setDataCollector","kount","createErrorNotice","showCardSelector","selectedCard","selectionChanged","context","setNotice","getErrorMessage","onShippingRateSuccess","onShippingRateFail","onShippingRateSelectSuccess","handleShippingChange","handler","get","isSelectingRate","shippingRatesLoading","Boolean","pop","handleShippingRateFail","addPaymentEventHandler","execute","addShippingMethodHandler","addShippingAddressHandler","unsubscribeShippingRateSuccess","unsubscribeShippingRateSelectSuccess","unsubscribeShippingRateFail","processingResponse","paymentDetails","braintreeErrorMessage","ERROR","settings","setInstance","verifyCard","challengeRequested","collectDeviceData","surname","slice","additionalInformation","shippingGivenName","shippingSurname","ipAddress","onLookupComplete","next","threeDSecureInfo","teardown","useLoadPayPal","paypalCheckoutInstance","intent","flow","partnerCode","paypal","setPayPal","JSON","parse","atob","clientId","commit","vault","dataAttributes","loadPayPalSDK","usePayPalOptions","paymentData","incompleteBilling","baseStyle","FUNDING","PAYPAL","PAYLATER","onShippingChange","selectedShippingOption","$","ajax","dataType","jqXHR","bind","sources","fundingSource","option","onApprove","tokenizePayment","line1","line2","recipientName","cartContainsSubscription","createOrder","createPayment","enableShippingAddress","shippingAddressEditable","createBillingAgreement","selected_shipping_option","postal_code","country_code","patch","braintree_paypal","order","Buttons","isEligible","setPayPalCheckoutInstance","buttonContainer","createPayPalCheckout","merchantAccountId","getMerchantAccount","OrderItemMessaging","cart","cartTotals","total_price","paypalCheckout","setPayPalCheckout","currencies","isAvailable","Messages","placement","layout","position","color","TotalsWrapper","registerPlugin","ExperimentalOrderMeta","scope","alignItems","wcBraintreeData","errorMessages","SHIPPING_OPTION_REGEX","merchantAccounts","createClient","SUCCESS","msg","getCacheKey","exp","Math","floor","Date","getTime","sessionStorage","setItem","stringify","defaultValue","getItem","deleteFromCache","removeItem","getCurrency","prefix","suffix","decimalSeparator","thousandSeparator","undefined","parseInt","fractional","index","replace","substr","match","RegExp","packageId","rateId","packageIdx","split","lines","hasSubscription","page","card_type","replacementData","placeholder","token_id","path","venmoInstance","loadVenmo","createVenmo","allowNewBrowserTab","allowDesktop","VenmoComponent","setVenmoInstance","VenmoButton","placeOrderButtonLabel","isBrowserSupported","hasOwn","arguments","arg","argType","inner","apply","prototype","call","module","exports","default"],"sourceRoot":""}