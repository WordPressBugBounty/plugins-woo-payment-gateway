{"version":3,"file":"commons.js","mappings":"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","sources":["webpack://wcBraintree/./packages/blocks/assets/js/components/error-boundary/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/fastlane-link/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/fastlane-modal/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/notice/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/payment-method-label/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/payment-method/index.js","webpack://wcBraintree/./packages/blocks/assets/js/components/saved-token-component/index.js","webpack://wcBraintree/./packages/blocks/assets/js/data/checkout/action-types.js","webpack://wcBraintree/./packages/blocks/assets/js/data/checkout/actions.js","webpack://wcBraintree/./packages/blocks/assets/js/data/checkout/constants.js","webpack://wcBraintree/./packages/blocks/assets/js/data/checkout/index.js","webpack://wcBraintree/./packages/blocks/assets/js/data/checkout/reducers.js","webpack://wcBraintree/./packages/blocks/assets/js/data/checkout/selectors.js","webpack://wcBraintree/./packages/blocks/assets/js/data/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/applepay/hooks/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/applepay/hooks/use-create-payment-request.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/applepay/hooks/use-create-session.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/applepay/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/applepay/utils.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/context/action-emitter.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/context/action-reducer.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/context/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/context/payment-context.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/custom-form/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/custom-form/registry.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/custom-forms/bootstrap/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/custom-forms/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/custom-forms/simple/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/dropin-form/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/hosted-fields/card-cvv.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/hosted-fields/card-expiration-date.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/hosted-fields/card-number.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/hosted-fields/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/credit-card/tokenized-card.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/fastlane/checkout-block/block.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/fastlane/checkout-block/frontend.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/fastlane/express-payment-component.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/fastlane/hooks/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/fastlane/hooks/use-create-fastlane.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/fastlane/hooks/use-process-fastlane.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/fastlane/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/googlepay/helpers.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/googlepay/hooks/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/googlepay/hooks/use-create-payments-client.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/googlepay/hooks/use-handle-tokenization.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/googlepay/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-breakpoint-width.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-device-data.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-manage-fastlane-payment-token.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-notice-handler.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-payment-events-handler.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-process-fastlane-payment-token.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-process-payment-failure.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-process-payment.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/hooks/use-three-d-secure.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/paypal/hooks/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/paypal/hooks/use-load-paypal.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/paypal/hooks/use-paypal-options.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/paypal/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/utils.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/venmo/hooks/index.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/venmo/hooks/use-handle-tokenization.js","webpack://wcBraintree/./packages/blocks/assets/js/payment-methods/venmo/index.js","webpack://wcBraintree/./node_modules/classnames/index.js"],"sourcesContent":["import {Component} from '@wordpress/element';\n\nclass ErrorBoundary extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {hasError: false, error: null, errorInfo: null};\n    }\n\n    componentDidCatch(error, errorInfo) {\n        this.setState({\n            hasError: true,\n            error,\n            errorInfo\n        })\n    }\n\n    render() {\n        if (this.state.hasError) {\n            return (\n                <>\n                    {this.state.error &&\n                    <div className='wc-braintree-blocks__error'>{this.state.error.toString()}</div>}\n                    {this.state.errorInfo &&\n                    <div className='wc-braintree-blocks__error'>{this.state.errorInfo.componentStack}</div>}\n                </>\n            )\n        }\n        return this.props.children;\n    }\n}\n\nexport default ErrorBoundary;","export const FastlaneLink = ({onClick, text, logo}) => {\n    return (\n        <div\n            className=\"fastlane-signup-link-container\"\n            onClick={onClick}>\n            <span>{text}</span>\n            <img className=\"fastlane-signup-img\" src={logo}/>\n        </div>\n    )\n}","import {useEffect, useState, useRef, useCallback} from '@wordpress/element';\nimport classnames from 'classnames';\n\nexport const FastlaneModal = (\n    {\n        i18n,\n        open,\n        onClose,\n        fastlane,\n        onTokenize,\n        shippingData\n    }) => {\n    const [rendered, setRendered] = useState(false);\n    const currentData = useRef({fastlane, shippingData});\n\n    const onClick = useCallback(async (e) => {\n        e.preventDefault();\n        try {\n            const {\n                paymentComponent\n            } = currentData.current;\n\n            const response = await paymentComponent.getPaymentToken();\n\n            // call onTokenize\n            onTokenize(response);\n\n            // close modal\n            onClose(true);\n            setRendered(false);\n        } catch (error) {\n            console.log('Error tokenizing payment method. ', error);\n        }\n    }, []);\n\n    useEffect(() => {\n        currentData.current = {\n            ...currentData.current,\n            fastlane,\n            shippingData\n        };\n    }, [fastlane, shippingData]);\n\n    useEffect(() => {\n        if (open) {\n            const {\n                shippingData\n            } = currentData.current;\n            const {\n                needsShipping,\n                shippingAddress\n            } = shippingData;\n            const props = {\n                ...(needsShipping && {\n                    shippingAddress: {\n                        firstName: shippingAddress.first_name || '',\n                        lastName: shippingAddress.last_name || '',\n                        streetAddress: shippingAddress.address_1 || '',\n                        extendedAddress: shippingAddress.address_2 || '',\n                        locality: shippingAddress.city || '',\n                        region: shippingAddress.state || '',\n                        postalCode: shippingAddress.postcode || '',\n                        countryCodeAlpha2: shippingAddress.country || '',\n                        phoneNumber: shippingAddress.phone || '',\n                    }\n                })\n            }\n            fastlane.FastlanePaymentComponent(props).then(async instance => {\n                currentData.current.paymentComponent = instance;\n                await instance.render('.wc-ppcp-fastlane-modal-body');\n                document.body.classList.add('fastlane-modal-open');\n                setTimeout(() => {\n                    setRendered(true);\n                }, 250);\n            });\n        } else {\n            document.body.classList.remove('fastlane-modal-open');\n        }\n\n        return () => document.body.classList.remove('fastlane-modal-open');\n    }, [open]);\n\n    return (\n        <div className={classnames('wc-ppcp-fastlane-overlay', {'active': rendered})}>\n            <div className=\"wc-ppcp-fastlane-modal\">\n                <div className=\"wc-ppcp-fastlane-modal-body\">\n\n                </div>\n                <div className=\"wc-ppcp-fastlane-modal-buttons\">\n                    <button\n                        className=\"wc-ppcp-fastlane-tokenize\"\n                        onClick={onClick}>\n                        {i18n.continue}\n                    </button>\n                    <a\n                        className=\"wc-ppcp-fastlane-cancel\"\n                        onClick={() => {\n                            setRendered(false);\n                            onClose();\n                        }}>\n                        {i18n.cancel}\n                    </a>\n                </div>\n            </div>\n        </div>\n    )\n}","export * from './notice';\nexport * from './payment-method';\nexport * from './payment-method-label';\nexport * from './saved-token-component';\nexport * from './fastlane-link';\nexport * from './fastlane-modal';","import classNames from \"classnames\";\nimport {Notice as WordpressNotice} from '@wordpress/components';\n\nexport const Notice = ({notice, onRemove}) => {\n    const classes = classNames(`wc-braintree-blocks__notice ${notice.type}`);\n    return (\n        <WordpressNotice\n            key={`notice-${notice.type}`}\n            className={classes}\n            onRemove={() => {\n                if (notice.isDismissible) {\n                    onRemove();\n                }\n            }} {...notice}>\n            {notice.message}\n        </WordpressNotice>\n    )\n}\n\nexport default Notice;","export const PaymentMethodLabel = ({title, paymentMethod, components, icon = []}) => {\n    const {PaymentMethodLabel: Label, PaymentMethodIcons: Icons} = components;\n    if (!Array.isArray(icon)) {\n        icon = [icon];\n    }\n    return (\n        <span className={'wc-braintree-blocks-paymentMethod__label'}>\n            <Label text={title}/>\n            <Icons icons={icon} align='left'/>\n        </span>\n    )\n}\n\nexport default PaymentMethodLabel;","import {useRef, useState, useEffect} from '@wordpress/element';\nimport {PaymentMethodDataProvider, usePaymentMethodDataContext} from '../../payment-methods/context';\nimport {useProcessPayment, useProcessPaymentFailure} from \"../../payment-methods/hooks\";\n\nexport const PaymentMethod = ({content, description = '', icons, ...props}) => {\n    const el = useRef();\n    const [container, setContainer] = useState(null);\n    const Content = content;\n    useEffect(() => {\n        if (el.current) {\n            setContainer(el.current);\n        }\n    }, []);\n    return (\n        <div ref={el} className={\"wc-braintree-blocks-payment-method__container\"}>\n            {description &&\n                <div className=\"wc-braintree-blocks-payment-method__description\">\n                    {description}\n                </div>}\n            <PaymentMethodDataProvider container={container} {...props}>\n                <PaymentMethodProviderContainer {...props}>\n                    <Content {...props}/>\n                </PaymentMethodProviderContainer>\n            </PaymentMethodDataProvider>\n        </div>\n    )\n}\n\nconst PaymentMethodProviderContainer = (\n    {\n        children,\n        name,\n        billing,\n        shippingData,\n        eventRegistration,\n        emitResponse,\n        activePaymentMethod,\n        isExpress = false,\n        advancedFraudOptions = {}\n    }) => {\n    const {\n        onPaymentSetup,\n        onCheckoutFail\n    } = eventRegistration;\n    const {\n        responseTypes,\n        noticeContexts\n    } = emitResponse;\n\n    const {\n        fastlane\n    } = usePaymentMethodDataContext();\n\n    useProcessPayment({\n        name,\n        billing,\n        shippingData,\n        responseTypes,\n        onPaymentSetup,\n        useFastlane: fastlane.paymentToken !== null,\n        activePaymentMethod,\n        advancedFraudOptions\n    });\n\n    useProcessPaymentFailure({\n        event: onCheckoutFail,\n        responseTypes,\n        messageContext: isExpress ? noticeContexts.EXPRESS_PAYMENTS : null\n    });\n    return children;\n}\n\nexport default PaymentMethod;","import {useEffect, useRef, useCallback} from '@wordpress/element';\nimport {ensureSuccessResponse, ensureErrorResponse, BraintreeError, fetchTokenNonce} from \"../../payment-methods/utils\";\nimport {useThreeDSecure, useProcessPaymentFailure, useDeviceData} from \"../../payment-methods/hooks\";\nimport {usePaymentMethodDataContext, PaymentMethodDataProvider} from \"../../payment-methods/context\";\n\nexport const SavedTokenProvider = (props) => {\n    return (\n        <PaymentMethodDataProvider {...{...props}}>\n            <SavedTokenComponent {...{...props}}/>\n        </PaymentMethodDataProvider>\n    )\n}\nexport const SavedTokenComponent = (\n    {\n        name,\n        vaultedThreeDSecure = false,\n        token,\n        eventRegistration,\n        billing,\n        shippingData,\n        emitResponse\n    }) => {\n    const {responseTypes} = emitResponse;\n    const {onPaymentSetup, onCheckoutFail} = eventRegistration;\n    const currentData = useRef({billing, shippingData});\n    const {doPaymentDataFilter} = usePaymentMethodDataContext();\n    useDeviceData();\n    useThreeDSecure({name, vaulted: vaultedThreeDSecure});\n    useProcessPaymentFailure({\n        event: onCheckoutFail,\n        responseTypes\n    });\n\n    useEffect(() => {\n        currentData.current = {name, billing, shippingData};\n    });\n\n    useEffect(() => {\n        const unsubscribe = onPaymentSetup(async () => {\n            if (vaultedThreeDSecure) {\n                try {\n                    let result = await fetchTokenNonce(token);\n                    if (!result.success) {\n                        throw new BraintreeError({message: result.message});\n                    }\n                    result = await doPaymentDataFilter({\n                        meta: {\n                            paymentMethodData: {\n                                [`${name}_3ds_nonce_key`]: 'true'\n                            }\n                        }\n                    }, {...currentData.current, ...{result: result.data}});\n                    return ensureSuccessResponse(responseTypes, result);\n                } catch (error) {\n                    return ensureErrorResponse(responseTypes, error);\n                }\n            }\n            return null;\n        });\n        return () => unsubscribe();\n    }, [\n        onPaymentSetup,\n        vaultedThreeDSecure,\n        token,\n        name,\n        responseTypes\n    ]);\n    return null;\n}\n\nexport default SavedTokenComponent;","export const ACTION_TYPES = {\n    SET_FASTLANE: 'SET_FASTLANE',\n    SET_PAYMENT_TOKEN: 'SET_PAYMENT_TOKEN',\n    SET_CUSTOMER_CONTEXT: 'SET_CUSTOMER_CONTEXT',\n    ADD_CANCELED_EMAIL: 'ADD_CANCELED_EMAIL'\n}","import {ACTION_TYPES} from \"./action-types\";\n\nexport const setPaymentToken = (token) => ({\n    type: ACTION_TYPES.SET_PAYMENT_TOKEN,\n    token\n});\n\nexport const setFastlane = fastlane => ({\n    type: ACTION_TYPES.SET_FASTLANE,\n    fastlane\n});\n\nexport const setCustomerContextId = id => ({\n    type: ACTION_TYPES.SET_CUSTOMER_CONTEXT,\n    id\n});\n\nexport const addCanceledEmail = email => ({\n    type: ACTION_TYPES.ADD_CANCELED_EMAIL,\n    email\n})","export const STORE_KEY = 'wc-braintree/store/checkout';","import {createReduxStore, register, subscribe} from '@wordpress/data';\nimport {controls as dataControls} from '@wordpress/data-controls';\n\nimport {STORE_KEY} from \"./constants\";\nimport * as actions from './actions';\nimport reducer from './reducers';\nimport * as selectors from './selectors';\n\nconst config = {\n    reducer,\n    selectors,\n    actions\n}\n\nexport {\n    STORE_KEY\n};\n\nexport const store = createReduxStore(STORE_KEY, config);\n\nregister(store);","import {ACTION_TYPES} from \"./action-types\";\n\nconst DEFAULT_STATE = {\n    token: null,\n    fastlane: null,\n    canceledEmails: [],\n    customerContextId: null\n};\n\nexport default function reducer(state = DEFAULT_STATE, action) {\n    let newState = state;\n\n    switch (action.type) {\n        case ACTION_TYPES.SET_FASTLANE:\n            newState = {\n                ...state,\n                fastlane: action.fastlane\n            }\n            break;\n        case ACTION_TYPES.SET_PAYMENT_TOKEN:\n            newState = {\n                ...state,\n                token: action.token\n            }\n            break;\n        case ACTION_TYPES.SET_CUSTOMER_CONTEXT:\n            newState = {\n                ...state,\n                customerContextId: action.id\n            }\n            break;\n        case ACTION_TYPES.ADD_CANCELED_EMAIL:\n            newState = {\n                ...state,\n                canceledEmails: [...state.canceledEmails, action.email]\n            }\n            break;\n    }\n    return newState;\n}","export const getPaymentToken = (state) => {\n    return state.token;\n}\n\nexport const getFastlane = state => {\n    return state.fastlane;\n}\n\nexport const isCustomerFound = state => {\n    return !!state.customerContextId;\n}\n\nexport const getCanceledEmails = state => {\n    return state.canceledEmails;\n}","export * from './checkout';","export * from './use-create-payment-request';\nexport * from './use-create-session';","import {useEffect, useMemo, useRef, useCallback} from '@wordpress/element';\nimport {removeNumberPrecision} from \"../../utils\";\nimport {formatLineItems, formatShippingMethods} from \"../utils\";\n\nexport const useCreatePaymentRequest = (\n    {\n        applePayInstance,\n        billing,\n        shippingData,\n        getData\n    }) => {\n    const currentData = useRef({});\n\n    useEffect(() => {\n        currentData.current.billing = billing;\n        currentData.current.shippingData = shippingData;\n    }, [billing, shippingData]);\n\n    const request = useMemo(() => {\n        if (applePayInstance) {\n            const {cartTotal, currency, cartTotalItems, billingAddress} = currentData.current.billing;\n            const {needsShipping, shippingRates} = currentData.current.shippingData;\n            const request = {\n                total: {\n                    label: getData('displayName'),\n                    type: 'final',\n                    amount: removeNumberPrecision(cartTotal.value, currency.minorUnit).toString()\n                },\n                lineItems: formatLineItems(cartTotalItems, currency.minorUnit),\n                currencyCode: currency.code,\n                countryCode: getData('countryCode'),\n                requiredBillingContactFields: ['postalAddress'],\n                requiredShippingContactFields: (() => {\n                    let fields = needsShipping ? ['postalAddress'] : [];\n                    if (!billingAddress.email) {\n                        fields = [...fields, 'email'];\n                    }\n                    if (!billingAddress.phone) {\n                        fields = [...fields, 'phone'];\n                    }\n                    return fields;\n                })()\n            }\n            if (needsShipping) {\n                request.shippingMethods = formatShippingMethods(shippingRates);\n            }\n            const paymentRequest = applePayInstance.createPaymentRequest(request);\n            return paymentRequest;\n        }\n        return null;\n    }, [applePayInstance]);\n    return request;\n}\n\nexport default useCreatePaymentRequest;","import {useEffect, useRef, useCallback} from '@wordpress/element';\nimport {__} from '@wordpress/i18n';\nimport {range} from 'lodash';\nimport {usePaymentMethodDataContext} from \"../../context\";\nimport {usePaymentEventsHandler} from \"../../hooks\";\nimport apiFetch from '@wordpress/api-fetch';\nimport {isEqual, isEmpty} from 'lodash';\nimport {\n    extractSelectedShippingOption,\n    extractAddressLines,\n    DEFAULT_BILLING_ADDRESS,\n    DEFAULT_SHIPPING_ADDRESS\n} from \"../../utils\";\n\nexport const useCreateSession = (\n    {\n        applePayInstance,\n        billing,\n        shippingData,\n        paymentRequest,\n        eventRegistration,\n        onClick,\n        onClose,\n        getData\n    }) => {\n    const {addShippingHandler} = usePaymentEventsHandler({\n        billing,\n        shippingData,\n        eventRegistration\n    });\n    const {setPaymentMethodNonce, onPaymentDataFilter, notice: {addNotice}} = usePaymentMethodDataContext();\n    const applePayData = useRef({});\n    const currentData = useRef({\n        billing,\n        shippingData,\n        onClick,\n        onClose,\n        addNotice,\n        addShippingHandler,\n        setPaymentMethodNonce,\n        onPaymentDataFilter\n    });\n\n    const getApplePayVersion = useCallback(() => {\n        // always check support from highest version first\n        for (let version of range(10, 2, -1)) {\n            if (ApplePaySession.supportsVersion(version)) {\n                return version;\n            }\n        }\n        return 3;\n    }, []);\n\n    const onSessionCancel = useCallback(() => {\n        const {onClose} = currentData.current;\n        onClose();\n    }, []);\n\n    const onValidateMerchant = useCallback((event) => {\n        const {session} = currentData.current;\n        applePayInstance.performValidation({\n            validationURL: event.validationURL,\n            displayName: getData('displayName')\n        }).then(merchantSession => {\n            session.completeMerchantValidation(merchantSession);\n        }).catch(error => {\n            session.abort();\n            addNotice(error);\n        })\n    }, [applePayInstance, addNotice]);\n\n    const onPaymentMethodSelected = useCallback((event) => {\n        // update the cart billing address info\n        const {paymentMethod} = event;\n        const {session, addNotice} = currentData.current;\n        let address = null;\n        if (paymentMethod.billingContact) {\n            address = {\n                country: paymentMethod.billingContact?.countryCode || '',\n                state: paymentMethod.billingContact?.administrativeArea || '',\n                postcode: paymentMethod.billingContact?.postalCode || '',\n                city: paymentMethod.billingContact?.locality || ''\n            }\n        }\n        apiFetch({\n            method: 'POST',\n            url: getData('routes').payment_method,\n            data: {\n                address\n            }\n        }).then(response => {\n            if (response.code) {\n                session.abort();\n                addNotice(response.messages);\n            } else {\n                session.completePaymentMethodSelection(response.data);\n            }\n        }).catch((xhr) => {\n\n        });\n    }, []);\n\n    const onShippingContactSelected = useCallback((event) => {\n        const {session} = currentData.current;\n        const {shippingContact} = event;\n        const {shippingData} = currentData.current;\n        const {shippingAddress} = shippingData;\n        const {country, state, city, postcode} = shippingAddress;\n        const newAddress = {\n            country: shippingContact?.countryCode.toUpperCase(),\n            state: shippingContact?.administrativeArea.toUpperCase(),\n            city: shippingContact.locality,\n            postcode: shippingContact.postalCode\n        }\n        //const addressEqual = isEqual({country, state, city, postcode}, newAddress);\n\n        apiFetch({\n            method: 'POST',\n            url: getData('routes').shipping_address,\n            data: {\n                payment_method: 'braintree_applepay',\n                address: newAddress\n            }\n        }).then(response => {\n            if (response.code) {\n                if (response.code === 'addressUnserviceable') {\n                    session.completeShippingContactSelection(response.data.shippingContactUpdate);\n                } else {\n                    session.completeShippingContactSelection({\n                        errors: [new ApplePayError(\n                            response.code,\n                            response.data.contactField,\n                            response.message)],\n                        newTotal: response.data.newTotal,\n                        newShippingMethods: response.data.newShippingMethods\n                    });\n                }\n            } else {\n                session.completeShippingContactSelection(response.data.shippingContactUpdate)\n            }\n        }).finally(() => {\n            shippingData.setShippingAddress({...shippingAddress, ...newAddress});\n        });\n    }, []);\n\n    const onShippingMethodSelected = useCallback((event) => {\n        const {shippingMethod} = event;\n        const {session, shippingData, addNotice} = currentData.current;\n        const {setSelectedRates, selectedRates} = shippingData;\n\n        apiFetch({\n            method: 'POST',\n            url: getData('routes').shipping_method,\n            data: {\n                payment_method: 'braintree_applepay',\n                shipping_method: shippingMethod.identifier\n            }\n        }).then(response => {\n            if (response.code) {\n                session.abort();\n                //__('There was an error updating your cart totals.', 'woo-payment-gateway')\n            } else {\n                session.completeShippingMethodSelection(response.data.shippingMethodUpdate);\n            }\n        }).finally(() => {\n            setSelectedRates(...extractSelectedShippingOption(shippingMethod.identifier));\n        });\n    }, []);\n\n    const onPaymentAuthorized = useCallback((event) => {\n        const {session, setPaymentMethodNonce, errors = []} = currentData.current;\n        if (errors?.length > 0) {\n            session.completePayment({\n                status: ApplePaySession.STATUS_FAILURE,\n                errors\n            });\n        } else {\n            applePayInstance.tokenize({\n                token: event?.payment?.token\n            }).then(response => {\n                const {shippingContact = null, billingContact = null} = event.payment;\n                applePayData.current.billingAddress = {};\n\n                if (billingContact) {\n                    applePayData.current.billingAddress = {\n                        first_name: billingContact?.givenName,\n                        last_name: billingContact?.familyName,\n                        city: billingContact?.locality,\n                        state: billingContact?.administrativeArea,\n                        postcode: billingContact?.postalCode,\n                        country: billingContact?.countryCode,\n                        ...extractAddressLines(billingContact?.addressLines || ''),\n                        ...applePayData.current.billingAddress\n                    }\n                    if (billingContact.emailAddress) {\n                        applePayData.current.billingAddress.email = billingContact.emailAddress;\n                    }\n                    if (billingContact.phoneNumber) {\n                        applePayData.current.billingAddress.phone = billingContact.phoneNumber;\n                    }\n                }\n\n                if (shippingContact) {\n                    if (currentData.current.shippingData.needsShipping) {\n                        applePayData.current.shippingAddress = {\n                            first_name: shippingContact?.givenName,\n                            last_name: shippingContact?.familyName,\n                            city: shippingContact?.locality,\n                            state: shippingContact?.administrativeArea,\n                            postcode: shippingContact?.postalCode,\n                            country: shippingContact?.countryCode,\n                            ...extractAddressLines(shippingContact?.addressLines || [])\n                        }\n                        if (applePayData.current.billingAddress.phone) {\n                            applePayData.current.shippingAddress.phone = applePayData.current.billingAddress.phone;\n                        } else if (shippingContact?.phoneNumber) {\n                            applePayData.current.shippingAddress.phone = shippingContact.phoneNumber;\n                        }\n                    }\n                    if (shippingContact?.phoneNumber && !applePayData.current.billingAddress.phone) {\n                        applePayData.current.billingAddress.phone = shippingContact?.phoneNumber;\n                    }\n                    if (shippingContact?.emailAddress && !applePayData.current.billingAddress.email) {\n                        applePayData.current.billingAddress.email = shippingContact?.emailAddress;\n                    }\n                }\n\n                setPaymentMethodNonce(response.nonce);\n                session.completePayment(ApplePaySession.STATUS_SUCCESS);\n            }).catch(error => {\n                session.completePayment(ApplePaySession.STATUS_FAILURE);\n            })\n        }\n    }, [applePayInstance]);\n\n    useEffect(() => {\n        currentData.current = {\n            ...currentData.current,\n            billing,\n            shippingData,\n            onClick,\n            onClose,\n            addNotice,\n            addShippingHandler,\n            setPaymentMethodNonce\n        };\n    });\n\n    useEffect(() => {\n        const unsubscribe = onPaymentDataFilter((data, {billing, shippingData}) => {\n            if (!isEmpty(applePayData.current?.billingAddress)) {\n                data.meta.billingAddress = {\n                    ...DEFAULT_BILLING_ADDRESS,\n                    ...billing.billingAddress,\n                    ...applePayData.current.billingAddress\n                };\n            }\n            if (!isEmpty(applePayData.current?.shippingAddress)) {\n                data.meta.shippingAddress = {\n                    ...DEFAULT_SHIPPING_ADDRESS,\n                    ...shippingData.shippingAddress,\n                    ...applePayData.current.shippingAddress\n                };\n            }\n            return data;\n        });\n        return () => unsubscribe();\n    }, [onPaymentDataFilter]);\n\n    const createSession = useCallback(() => {\n        const {shippingData} = currentData.current;\n        const session = new ApplePaySession(getApplePayVersion(), paymentRequest);\n        session.onvalidatemerchant = onValidateMerchant;\n        session.onpaymentmethodselected = onPaymentMethodSelected;\n        session.onpaymentauthorized = onPaymentAuthorized;\n        session.oncancel = onSessionCancel;\n        if (shippingData.needsShipping) {\n            session.onshippingcontactselected = onShippingContactSelected;\n            session.onshippingmethodselected = onShippingMethodSelected;\n        }\n        currentData.current.session = session;\n        return session;\n    }, [\n        applePayInstance,\n        paymentRequest,\n        getApplePayVersion,\n        onValidateMerchant,\n        onPaymentMethodSelected,\n        onPaymentAuthorized,\n        onShippingContactSelected,\n        onShippingMethodSelected\n    ]);\n\n    const handleClick = useCallback((e) => {\n        e.preventDefault();\n        currentData.current.onClick();\n        try {\n            const session = createSession();\n            session.begin();\n        } catch (error) {\n            alert(error);\n        }\n    }, [createSession]);\n\n    return {handleClick};\n}\n\nexport default useCreateSession;","import {useState, useEffect} from '@wordpress/element';\nimport {registerExpressPaymentMethod} from '@woocommerce/blocks-registry';\nimport {create as createApplePay} from '@braintree/apple-pay';\nimport {getSettings, getClientToken, isCartPage, isCheckoutPage} from \"../utils\";\nimport {PaymentMethod} from \"../../components/payment-method\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport {useCreatePaymentRequest, useCreateSession} from \"./hooks\";\nimport ErrorBoundary from \"../../components/error-boundary\";\n\nconst getData = getSettings('braintree_applepay');\n\nconst loadApplePay = new Promise((resolve, reject) => {\n    createApplePay({\n        authorization: getClientToken()\n    }).then(instance => resolve(instance)).catch(error => reject(error));\n});\n\nconst Test = (props) => {\n    return (\n        <ErrorBoundary>\n            <ApplePayContainer {...props}/>\n        </ErrorBoundary>\n    )\n}\n\nconst ApplePayContainer = (\n    {\n        getData,\n        billing,\n        shippingData,\n        eventRegistration,\n        onClick,\n        onClose\n    }) => {\n    const [applePayInstance, setApplePayInstance] = useState(null);\n    const {notice: {addNotice}} = usePaymentMethodDataContext();\n    const paymentRequest = useCreatePaymentRequest({\n        applePayInstance,\n        billing,\n        shippingData,\n        getData\n    });\n    const {handleClick} = useCreateSession({\n        applePayInstance,\n        billing,\n        shippingData,\n        paymentRequest,\n        eventRegistration,\n        onClick,\n        onClose,\n        getData\n    });\n    useEffect(() => {\n        loadApplePay.then(instance => setApplePayInstance(instance)).catch(error => addNotice(error));\n    }, []);\n\n    return (\n        <div\n            className={'wc-braintree-blocks-apple-pay-button__container'}>\n            <ApplePayButton\n                onClick={handleClick}\n                type={getData('buttonType')}\n                style={getData('buttonStyle')}\n                rounded={getData('roundedButton')}/>\n        </div>\n    )\n}\n\nconst ApplePayButton = ({onClick, type, style, rounded = false}) => {\n    const getButtonStyle = (style) => {\n        switch (style) {\n            case 'apple-pay-button-black':\n                return 'black';\n            case 'apple-pay-button-white':\n                return 'white';\n            case 'apple-pay-button-white-with-line':\n                return 'white-outline';\n        }\n    }\n    const styles = {\n        'ApplePayButtonType': type,\n        'ApplePayButtonStyle': getButtonStyle(style)\n    }\n    return <button\n        className={`wc-braintree-blocks-apple-pay__button ${style} ${rounded ? 'apple-pay-button-rounded' : ''}`}\n        style={styles}\n        onClick={onClick}/>\n\n}\nif ((isCartPage() && getData('expressCartEnabled')) || (isCheckoutPage() && getData('expressCheckoutEnabled'))) {\n    registerExpressPaymentMethod({\n        name: getData('name'),\n        canMakePayment: async () => {\n            return window.ApplePaySession && ApplePaySession.canMakePayments();\n        },\n        content: <PaymentMethod content={Test}\n                                title={getData('title')}\n                                description={getData('description')}\n                                name={getData('name')}\n                                icon={getData('icon')}\n                                getData={getData}\n                                isExpress={true}/>,\n        edit: <PaymentMethod content={ApplePayContainer} getData={getData}/>,\n        supports: {\n            features: getData('features')\n        }\n    });\n}","import {getShippingOptionId, removeNumberPrecision} from \"../utils\";\n\nexport const formatLineItems = (lineItems, minorUnit) => {\n    let items = [];\n    const keys = ['total_tax', 'total_shipping'];\n    lineItems.forEach(item => {\n        if (0 < item.value || (item.key && keys.includes(item.key))) {\n            items.push({\n                label: item.label,\n                type: 'final',\n                amount: removeNumberPrecision(item.value, minorUnit).toString()\n            });\n        }\n    })\n    return items;\n}\n\nexport const formatShippingMethods = (shippingRates) => {\n    let options = [];\n    shippingRates.forEach((shippingPackage, idx) => {\n        let rates = shippingPackage.shipping_rates.map(rate => {\n            let txt = document.createElement('textarea');\n            txt.innerHTML = rate.name;\n            return {\n                identifier: getShippingOptionId(idx, rate.rate_id),\n                label: txt.value,\n                detail: '',\n                amount: removeNumberPrecision(rate.price, rate.currency_minor_unit)\n            }\n        });\n        options = [...options, ...rates];\n    });\n    return options;\n}","import {useMemo} from '@wordpress/element';\nimport {uniqueId} from 'lodash';\nimport {ACTIONS} from './action-reducer';\n\nexport const useActionEmitter = (dispatch) => {\n    const data = useMemo(() => ({\n        onPaymentDataFilter: (callback, priority = 10) => {\n            const action = {\n                action: ACTIONS.ADD_ACTION,\n                type: 'payment_data_filter',\n                id: uniqueId(),\n                callback,\n                priority\n            };\n            dispatch(action);\n            return () => dispatch({action: ACTIONS.REMOVE_ACTION, type: action.type, id: action.id})\n        }\n    }), [dispatch]);\n    return data;\n}\n\nexport const emittFilter = async (data, args, {handlers, type}) => {\n    const events = handlers[type];\n    const sortedEvents = Array.from(events.values()).sort((a, b) => a.priority - b.priority);\n    try {\n        for (const event of sortedEvents) {\n            data = await Promise.resolve(event.callback(data, args));\n        }\n    } catch (error) {\n        console.log(error);\n        throw error;\n    }\n    return data;\n}\n\n","export const ACTIONS = {\n    ADD_ACTION: 'add_action',\n    REMOVE_ACTION: 'remove_action'\n}\n\nexport const actionReducer = (state = {}, {action, type, id, callback, priority = 10}) => {\n    const event = state[type] ? state[type] : new Map();\n    switch (action) {\n        case ACTIONS.ADD_ACTION:\n            event.set(id, {callback, priority});\n            return {...state, [type]: event};\n        case ACTIONS.REMOVE_ACTION:\n            event.delete(id);\n            return {...state, [type]: event};\n    }\n    return state;\n}","export * from './payment-context';\nexport * from './action-reducer';\nexport * from './action-emitter';","import {useState, useRef, useEffect, useCallback, createContext, useContext, useReducer} from '@wordpress/element';\nimport {useSelect} from '@wordpress/data';\nimport {STORE_KEY} from '@wc-braintree/block-data';\nimport {actionReducer, useActionEmitter, emittFilter} from \"../context\";\nimport {loadClient} from \"../utils\";\nimport {useNoticeHandler} from \"../hooks\";\n\nconst PaymentMethodDataContext = createContext();\n\nexport const PaymentMethodDataProvider = (\n    {\n        children,\n        container,\n        onSubmit,\n        getData,\n        isExpress = null,\n        setExpressPaymentError\n    }) => {\n    const [client, setClient] = useState();\n    const [paymentMethodNonce, setPaymentMethodNonce] = useState(null);\n    const [eventHandlers, dispatch] = useReducer(actionReducer, {});\n    const {onPaymentDataFilter} = useActionEmitter(dispatch);\n    const currentEventHandlers = useRef(eventHandlers);\n    const currentData = useRef({onSubmit});\n    const paymentHandler = useRef(null);\n    const [notice, addNotice, removeNotice] = useNoticeHandler({isExpress, setExpressPaymentError});\n\n    const {\n        fastlane,\n        paymentToken,\n        customerFound\n    } = useSelect(select => {\n        const store = select(STORE_KEY);\n        return {\n            fastlane: store.getFastlane(),\n            paymentToken: store.getPaymentToken(),\n            customerFound: store.isCustomerFound()\n        };\n    });\n\n    const doPaymentDataFilter = useCallback(async (data, args) => {\n        return await emittFilter(data, args, {\n            handlers: currentEventHandlers.current,\n            type: 'payment_data_filter'\n        });\n    }, []);\n\n    const setPaymentHandler = useCallback((handler) => {\n        paymentHandler.current = handler;\n    }, []);\n    useEffect(() => {\n        currentEventHandlers.current = eventHandlers;\n    }, [eventHandlers]);\n\n    useEffect(() => {\n        loadClient.then(client => setClient(client)).catch(error => {\n            addNotice(error)\n        });\n    }, [addNotice]);\n\n    useEffect(() => {\n        currentData.current = {onSubmit};\n    }, [onSubmit]);\n\n    useEffect(() => {\n        if (paymentMethodNonce) {\n            currentData.current.onSubmit();\n        }\n    }, [paymentMethodNonce]);\n\n    const paymentMethodDataContext = {\n        container,\n        client,\n        paymentMethodNonce,\n        setPaymentMethodNonce,\n        onPaymentDataFilter,\n        doPaymentDataFilter,\n        setPaymentHandler,\n        onSubmit,\n        paymentHandler: paymentHandler.current,\n        notice: {\n            notice,\n            addNotice,\n            removeNotice\n        },\n        fraud: {\n            enabled: getData('advancedFraudEnabled')\n        },\n        threeDSecureEnabled: getData('threeDSecureEnabled'),\n        fastlane: {\n            fastlane,\n            paymentToken,\n            customerFound\n        }\n\n    };\n    return (\n        <PaymentMethodDataContext.Provider value={paymentMethodDataContext}>\n            {children}\n        </PaymentMethodDataContext.Provider>\n    )\n}\n\nexport const usePaymentMethodDataContext = () => {\n    return useContext(PaymentMethodDataContext);\n}","import {useState, useEffect, useCallback, useRef, cloneElement} from '@wordpress/element';\nimport {__, sprintf} from '@wordpress/i18n';\nimport {create} from '@braintree/hosted-fields';\nimport classnames from \"classnames\";\nimport {getCustomFormConfig} from \"./registry\";\nimport {useBreakpointWidth} from \"../../hooks\";\nimport '../custom-forms';\n\nexport const CustomForm = ({options, client, id, setPaymentHandler}) => {\n    const config = getCustomFormConfig(id);\n    const {breakpoint = 0, fields: fieldKeys = [], content: Content = null, className = ''} = config;\n    const [hostedFieldInstance, setHostedFieldsInstance] = useState(false);\n    const [fields, setFields] = useState({});\n    const [containerElement, setContainerElement] = useState();\n    const [cardBrand, setCardBrand] = useState(null);\n    const fieldOrder = useRef([]);\n    const currentData = useRef({fields});\n    const setFieldOrder = (id) => {\n        if (!fieldOrder.current.includes(id)) {\n            fieldOrder.current.push(id);\n        }\n    }\n    const getIconSrc = (type) => {\n        for (let icon of options.icons) {\n            if (icon.type === type) {\n                return icon.src;\n            }\n        }\n        return null;\n    };\n    const assertFieldsValid = useCallback(fields => {\n        const missingFields = fieldKeys.reduce((acc, prop) => {\n            if (!fields.hasOwnProperty(prop)) {\n                acc.push(prop);\n            }\n            return acc;\n        }, []);\n        return missingFields.length == 0;\n    }, []);\n    const setFieldContainer = useCallback((id) => (container) => {\n        const {fields} = currentData.current;\n        if (!fields?.[id]?.container && container !== null) {\n            const field = {\n                container,\n                ...options.fields[id]\n            }\n            setFields(prev => ({\n                ...prev,\n                [id]: field\n            }));\n        }\n    }, []);\n\n    const addClassToFields = useCallback((keys, className) => {\n        keys.forEach(key => {\n            fields?.[key]?.container.classList.add(className);\n        });\n    }, [fields]);\n\n    const paymentHandler = useCallback(({billing}) => new Promise((resolve, reject) => {\n        const {hostedFieldInstance} = currentData.current;\n        const options = {billingAddress: {}};\n        if (billing?.billingAddress?.address_1) {\n            options.billingAddress.streetAddress = billing.billingAddress.address_1;\n        }\n        if (billing?.billingAddress?.postcode) {\n            options.billingAddress.postalCode = billing.billingAddress.postcode;\n        }\n        hostedFieldInstance.tokenize(options, (error, payload) => {\n            if (error) {\n                if (error.code === 'HOSTED_FIELDS_FIELDS_INVALID') {\n                    addClassToFields(error?.details?.invalidFieldKeys || [], 'braintree-hosted-fields-invalid');\n                } else if (error.code === 'HOSTED_FIELDS_FIELDS_EMPTY') {\n                    addClassToFields(fieldKeys, 'braintree-hosted-fields-invalid');\n                }\n                reject(error);\n            } else {\n                resolve(payload);\n            }\n        });\n    }), []);\n\n    useEffect(() => {\n        setPaymentHandler(paymentHandler);\n\n        return () => setPaymentHandler(null);\n    }, [paymentHandler]);\n\n    useEffect(() => {\n        currentData.current = {fields};\n    }, [fields]);\n\n    useBreakpointWidth({key: id, el: containerElement, className, breakpoint});\n\n    useEffect(() => {\n        if (assertFieldsValid(fields)) {\n            client.then(clientInstance => {\n                create({\n                    client: clientInstance,\n                    fields,\n                    styles: options.styles\n                }).then(instance => {\n                    currentData.current.hostedFieldInstance = instance;\n                    setHostedFieldsInstance(instance);\n                }).catch(error => {\n\n                });\n            });\n        }\n    }, [fields]);\n\n    useEffect(() => {\n        if (hostedFieldInstance) {\n            hostedFieldInstance.on('cardTypeChange', (event) => {\n                if (event?.cards?.length == 1) {\n                    setCardBrand(event.cards[0].type);\n                } else {\n                    setCardBrand(null);\n                }\n            });\n            hostedFieldInstance.on('validityChange', (event) => {\n                const field = event.fields[event.emittedBy];\n                if (field.isValid) {\n                    const idx = fieldOrder.current.indexOf(event.emittedBy);\n                    if (fieldOrder.current?.[idx + 1]) {\n                        const nextField = fieldOrder.current[idx + 1];\n                        hostedFieldInstance.focus(nextField);\n                    }\n                }\n            });\n        }\n    }, [hostedFieldInstance]);\n    if (!Content) {\n        return <InvalidCustomForm id={id}/>;\n    }\n    return (\n        <div ref={setContainerElement} className='wc-braintree-blocks-custom__form'>\n            {cloneElement(Content, {\n                setFieldContainer,\n                setFieldOrder,\n                CardIcon: <CardIcon type={cardBrand} src={getIconSrc(cardBrand)}/>\n            })}\n        </div>\n    );\n}\n\nconst InvalidCustomForm = ({id}) => {\n    return (\n        <div className={'wc-braintree-blocks-notice__info'}>\n            {sprintf(__('%s is not a supported custom form.', 'woo-payment-gateway'), id)}\n        </div>\n    );\n};\n\nconst CardIcon = ({type, src}) => {\n    if (!type) {\n        return null;\n    }\n    const classes = classnames('wc-braintree-blocks-current-card__icon', type);\n    return (\n        <img className={classes} src={src}/>\n    )\n}\n\nexport default CustomForm;","const forms = {};\n\nexport const registerCustomForm = (config) => {\n    assertValidConfig(config);\n    forms[config.id] = config;\n}\n\nexport const getCustomFormConfig = (id) => {\n    if (assertValidFormId(id)) {\n        return forms[id];\n    }\n    return {};\n}\n\nconst assertValidFormId = (id) => {\n    return forms.hasOwnProperty(id);\n}\n\nconst assertValidConfig = (config) => {\n    if (!config.id) {\n        throw new Error('Custom forms must have a unique ID.');\n    }\n    assertConfigHasProperties(config, ['content', 'breakpoint']);\n}\n\nconst assertConfigHasProperties = (config, props = []) => {\n    const missingParams = props.reduce((acc, prop) => {\n        if (!config.hasOwnProperty(prop)) {\n            acc.push(prop);\n        }\n        return acc;\n    }, []);\n    if (missingParams.length > 0) {\n        throw new TypeError(`Custom form config missing params ${missingParams.join(', ')}`);\n    }\n}","import {__} from '@wordpress/i18n';\nimport {CardNumber, CardExpirationDate, CardCVV} from \"../../hosted-fields\";\nimport './style.scss';\n\nexport const BootstrapForm = (props) => {\n    return (\n        <div className='wc-braintree-blocks-bootstrap__form'>\n            <div className='row'>\n                <div className='col-md-6'>\n                    <div className={'form-group cardnumber-form-group'}>\n                        <label>{__('Card Number', 'woo-payment-gateway')}</label>\n                        <CardNumber className={'bootstrap-input'} {...props}/>\n                    </div>\n                </div>\n                <div className='col-md-3'>\n                    <div className={'form-group'}>\n                        <label>{__('Exp Date', 'woo-payment-gateway')}</label>\n                        <CardExpirationDate className={'bootstrap-input'} {...props}/>\n                    </div>\n                </div>\n                <div className='col-md-3'>\n                    <div className={'form-group'}>\n                        <label>{__('CVV', 'woo-payment-gateway')}</label>\n                        <CardCVV className={'bootstrap-input'} {...props}/>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default BootstrapForm;","import {registerCustomForm} from \"../custom-form/registry\";\nimport BootstrapForm from './bootstrap';\nimport SimpleForm from './simple';\n\nregisterCustomForm({\n    id: 'bootstrap_form',\n    content: <BootstrapForm/>,\n    breakpoint: 425,\n    fields: ['number', 'expirationDate', 'cvv'],\n    className: 'bootstrap-md'\n});\nregisterCustomForm({\n    id: 'simple_form',\n    content: <SimpleForm/>,\n    breakpoint: 425,\n    fields: ['number', 'expirationDate', 'cvv'],\n    className: 'simple-form-md'\n})","import {__} from '@wordpress/i18n';\nimport {CardNumber, CardExpirationDate, CardCVV} from \"../../hosted-fields\";\nimport './style.scss';\n\nexport const SimpleForm = (props) => {\n    return (\n        <div className='wc-braintree-blocks-simple__form'>\n            <div className='form-group'>\n                <label>{__('Card Number', 'woo-payment-gateway')}</label>\n                <CardNumber className='hosted-field braintree-card-number' {...props}/>\n            </div>\n            <div className='form-group'>\n                <label>{__('Exp Date', 'woo-payment-gateway')}</label>\n                <CardExpirationDate className='hosted-field' {...props}/>\n            </div>\n            <div className='form-group'>\n                <label>{__('CVV', 'woo-payment-gateway')}</label>\n                <CardCVV className='hosted-field' {...props}/>\n            </div>\n        </div>\n    )\n}\n\nexport default SimpleForm;","import {create as createDropin} from '@braintree/dropin';\nimport {useEffect, useState, useRef} from '@wordpress/element';\n\nexport const DropinForm = ({options, setDropinInstance}) => {\n    const {clientToken, locale = 'en_US'} = options;\n    const [error, setError] = useState(null);\n    const el = useRef(null);\n    useEffect(() => {\n        createDropin({\n            authorization: clientToken,\n            container: '.wc-braintree-blocks-dropin__form',\n            locale: locale\n        }, (error, dropinInstance) => {\n            if (error) {\n                setError(error?.message);\n            } else {\n                setDropinInstance(dropinInstance);\n            }\n        })\n    }, []);\n    return (\n        <>\n            {error && <div className={'wc-braintree-blocks__error'}>{error}</div>}\n            <div ref={el} className={'wc-braintree-blocks-dropin__form'}>\n\n            </div>\n        </>\n    )\n\n}\n\nexport default DropinForm;","import classnames from \"classnames\";\n\nexport const CardCVV = ({setFieldContainer, setFieldOrder, className}) => {\n    setFieldOrder('cvv');\n    const classes = classnames('braintree-web-hosted-field', className);\n    return <div ref={setFieldContainer('cvv')} id='braintree-cvv' className={classes}></div>\n}\n\nexport default CardCVV;","import classnames from \"classnames\";\n\nexport const CardExpirationDate = ({setFieldContainer, setFieldOrder, className}) => {\n    setFieldOrder('expirationDate');\n    const classes = classnames('braintree-web-hosted-field', className);\n    return (\n        <div ref={setFieldContainer('expirationDate')} id='braintree-exp-date'\n             className={classes}></div>\n    )\n}\n\nexport default CardExpirationDate;","import {useEffect, useRef} from \"@wordpress/element\";\nimport classnames from \"classnames\";\n\nexport const CardNumber = ({onChange, setFieldContainer, setFieldOrder, className, CardIcon}) => {\n    setFieldOrder('number');\n    const classes = classnames('braintree-web-hosted-field', className);\n    return (\n        <div ref={setFieldContainer('number')} id='braintree-number' className={classes}>\n            {CardIcon}\n        </div>\n    )\n}\n\nexport default CardNumber;","export * from './card-number';\nexport * from './card-expiration-date';\nexport * from './card-cvv';","import {useState, useEffect, useCallback} from '@wordpress/element';\nimport {registerPaymentMethod} from '@woocommerce/blocks-registry';\nimport {getSetting} from '@woocommerce/settings';\nimport {useDispatch, useSelect} from '@wordpress/data';\nimport classnames from 'classnames';\nimport {__} from '@wordpress/i18n';\nimport {STORE_KEY} from '@wc-braintree/block-data';\nimport {getSettings, loadClient, getClientToken, canShowSavedCard} from \"../utils\";\nimport {PaymentMethod, PaymentMethodLabel, SavedTokenProvider, Notice, FastlaneLink, FastlaneModal} from '../../components';\nimport DropinForm from \"./dropin-form\";\nimport CustomForm from \"./custom-form\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport TokenizedCard from './tokenized-card'\n\nconst getData = getSettings('braintree_cc');\nconst data = getSetting('braintree_cc_data');\n\nconst CreditCardComponent = (props) => {\n    const [openModal, setOpenModal] = useState(false);\n    const {\n        billing,\n        shippingData\n    } = props;\n    const {\n        email\n    } = billing.billingAddress;\n    const {\n        notice,\n        fastlane: {\n            fastlane,\n            paymentToken,\n            customerFound\n        },\n        setPaymentHandler\n    } = usePaymentMethodDataContext();\n\n    const {\n        setPaymentToken\n    } = useDispatch(STORE_KEY);\n\n    const {\n        emails\n    } = useSelect(select => {\n        return {\n            emails: select(STORE_KEY).getCanceledEmails()\n        }\n    });\n\n    const showSignup = data.showSignup && !emails.includes(email);\n\n    const dropinEnabled = getData('dropinEnabled');\n    const Content = dropinEnabled ? DropinContainer : HostedFieldsContainer;\n    const classes = classnames('wc-braintree-card-container', {\n        'dropin': dropinEnabled,\n        'customForm': !dropinEnabled\n    });\n\n    const onTokenize = useCallback((token) => {\n        setPaymentToken(token);\n    }, []);\n\n    if (paymentToken) {\n        return (\n            <TokenizedCard\n                data={data}\n                token={paymentToken}\n                fastlane={fastlane}\n                customerFound={customerFound}\n                {...props}/>\n        )\n    }\n\n    return (\n        <>\n            {showSignup &&\n                <FastlaneLink\n                    logo={data.fastLaneLogo}\n                    text={data.i18n.fastlane_signup}\n                    onClick={() => setOpenModal(true)}/>\n            }\n            {notice?.notice && <Notice notice={notice.notice} onRemove={notice.removeNotice}/>}\n            <div className={classes}>\n                <Content setPaymentHandler={setPaymentHandler}/>\n            </div>\n            <FastlaneModal\n                i18n={data.i18n}\n                open={openModal}\n                onClose={() => setOpenModal(false)}\n                fastlane={fastlane}\n                onTokenize={onTokenize}\n                shippingData={shippingData}\n            />\n        </>\n    )\n}\n\nconst HostedFieldsContainer = (props) => {\n    const options = {\n        fields: getData('hostedFieldsOptions'),\n        styles: getData('hostedFieldsStyles'),\n        icons: getData('icons')\n    };\n    return <CustomForm options={options} client={loadClient} id={getData('customForm')} {...props}/>\n}\n\nconst DropinContainer = ({setPaymentHandler}) => {\n    const [dropinInstance, setDropinInstance] = useState(null);\n    const handlePaymentProcessing = useCallback(() => {\n        return new Promise((resolve, reject) => {\n            dropinInstance.requestPaymentMethod((err, payload) => {\n                if (err) {\n                    reject(err);\n                } else {\n                    resolve(payload);\n                }\n            });\n        })\n    }, [dropinInstance]);\n\n    useEffect(() => {\n        setPaymentHandler(handlePaymentProcessing);\n    }, [handlePaymentProcessing]);\n\n    const options = {\n        clientToken: getClientToken(),\n        locale: 'en_US'\n    }\n    return (\n        <DropinForm options={options} setDropinInstance={setDropinInstance}/>\n    )\n}\n\nregisterPaymentMethod({\n    name: getData('name'),\n    label: <PaymentMethodLabel\n        title={getData('title')}\n        paymentMethod={getData('name')}\n        icon={getData('icon')}/>,\n    ariaLabel: __('Credit Cards', 'woo-payment-gateway'),\n    canMakePayment: () => true,\n    content: <PaymentMethod content={CreditCardComponent}\n                            title={getData('title')}\n                            description={getData('description')}\n                            name={getData('name')}\n                            icon={getData('icon')}\n                            getData={getData}/>,\n    savedTokenComponent: <SavedTokenProvider getData={getData}\n                                             name={getData('name')}\n                                             vaultedThreeDSecure={getData('vaultedThreeDSecure')}/>,\n    edit: <PaymentMethod content={CreditCardComponent} getData={getData}/>,\n    supports: {\n        showSavedCards: getData('features').includes('tokenization'),\n        showSaveOption: canShowSavedCard(),\n        features: getData('features')\n    }\n});","import classnames from 'classnames';\nimport {formatPaymentMethod} from '../utils';\nimport {useProcessFastlanePaymentToken, useManageFastlanePaymentToken} from \"../hooks\";\nimport {usePaymentMethodDataContext} from \"../context\";\n\nexport default function TokenizedCard(\n    {\n        data,\n        token,\n        fastlane,\n        customerFound,\n        ...props\n    }) {\n    const {\n        onPaymentDataFilter\n    } = usePaymentMethodDataContext();\n\n    const {\n        i18n,\n        fastlane_icons,\n        payment_format\n    } = data;\n\n    const {\n        emitResponse,\n        shouldSavePayment\n    } = props;\n\n    const {\n        responseTypes\n    } = emitResponse;\n\n    let {\n        card\n    } = token.paymentSource;\n\n    card = {\n        ...card,\n        brand: card.brand,\n        last4: card.lastDigits,\n        expiry: card.expiry\n    };\n\n    useProcessFastlanePaymentToken({\n        token,\n        responseTypes,\n        shouldSavePayment,\n        onPaymentDataFilter\n    });\n\n    const {\n        onCancel,\n        onChangePaymentMethod\n    } = useManageFastlanePaymentToken({\n        fastlane\n    });\n\n    return (\n        <div className={classnames('wc-ppcp-tokenized-card', {'has-customer-context': customerFound})}>\n            <CardIcon icons={fastlane_icons} brand={card.brand.toLowerCase()}/>\n            <div className=\"wc-ppcp-tokenized-card-format\">\n                {formatPaymentMethod(payment_format, card)}\n            </div>\n            <div className=\"wc-ppcp-tokenized-card-actions\">\n                <a\n                    className=\"wc-ppcp-tokenized-card-cancel\"\n                    onClick={onCancel}>\n                    {i18n.cancel}\n                </a>\n                {customerFound &&\n                    <a\n                        className=\"wc-ppcp-tokenized-card-change\"\n                        onClick={onChangePaymentMethod}>\n                        {i18n.change}\n                    </a>\n                }\n            </div>\n        </div>\n    )\n}\n\nconst CardIcon = ({icons, brand}) => {\n    let src = '';\n\n    if (icons[brand]) {\n        src = icons[brand];\n    }\n\n    return (\n        <div className=\"wc-ppcp-tokenized-card-icon-container\">\n            <img src={src}/>\n        </div>\n    )\n}","import {useState, useRef, useEffect, useCallback, useMemo} from \"@wordpress/element\";\nimport {useSelect, useDispatch} from '@wordpress/data';\nimport {CART_STORE_KEY} from '@woocommerce/block-data';\nimport {getSetting} from '@woocommerce/settings';\nimport {isEmail} from '@wordpress/url';\nimport {useCreateFastlane, useProcessFastlane} from \"../hooks\";\nimport {useDeviceData} from \"../../hooks\";\nimport {PaymentMethodDataProvider} from \"../../context\";\nimport {getSettings, getClientToken} from \"../../utils\";\n\nconst Component = ({extensions}) => {\n    const isInitialRender = useRef(true);\n    const currentData = useRef({});\n    const data = extensions.wc_braintree.fastlane;\n\n    const {\n        needsShipping,\n        billingAddress\n    } = useSelect(select => {\n        const store = select(CART_STORE_KEY);\n\n        return {\n            needsShipping: store.getNeedsShipping(),\n            ...store.getCustomerData()\n        }\n    });\n\n    const {\n        setShippingAddress\n    } = useDispatch(CART_STORE_KEY);\n\n    const {\n        email\n    } = billingAddress;\n\n    const [debouncedEmail, setDebouncedEmail] = useState(email);\n\n    const dataCollector = useDeviceData({skip: true});\n\n    const fastlane = useCreateFastlane({\n        clientToken: getClientToken(),\n        fraudEnabled: data.fraud.enabled,\n        dataCollector\n    });\n\n    const onError = useCallback(() => {\n\n    }, []);\n\n    const shippingData = useMemo(() => {\n        return {\n            needsShipping,\n            setShippingAddress\n        }\n    }, [needsShipping, setShippingAddress]);\n\n    const {\n        emails,\n        isCustomerFound,\n        triggerAuthentication\n    } = useProcessFastlane({\n        i18n: data.i18n,\n        email,\n        onError,\n        fastlane,\n        shippingData,\n        openFastlaneModal: null\n    });\n\n    useEffect(() => {\n        currentData.current = {emails, fastlane, isCustomerFound};\n    }, [emails, fastlane, isCustomerFound]);\n\n    useEffect(() => {\n        // Set a timer to update the debounced value after 500ms\n        const timer = setTimeout(() => {\n            setDebouncedEmail(email);\n        }, 500); // Adjust debounce time as needed (500ms is common)\n\n        // Clean up the timer if email changes before timeout completes\n        return () => clearTimeout(timer);\n    }, [email]);\n\n    // Effect for handling email changes\n    useEffect(() => {\n        const {\n            emails,\n            isCustomerFound\n        } = currentData.current;\n\n        // If customer cancelled, don't try to authenticate.\n        if (emails.includes(debouncedEmail) || isCustomerFound) {\n            return;\n        }\n        // Don't do anything if requirements aren't met\n        if (!fastlane || !triggerAuthentication || !isEmail(debouncedEmail)) {\n            return;\n        }\n\n        // Only trigger on first load if fastlane_pageload is true\n        if (isInitialRender.current) {\n            isInitialRender.current = false;\n            if (data.fastlane_pageload) {\n                triggerAuthentication(debouncedEmail, false);\n            }\n            return;\n        }\n\n        // If we get here, email has changed and is valid, so trigger authentication\n        triggerAuthentication(debouncedEmail, false);\n    }, [fastlane, debouncedEmail, triggerAuthentication]);\n\n    useEffect(() => {\n        const {\n            fastlane\n        } = currentData.current;\n\n        if (!fastlane) {\n            return;\n        }\n        let el = document.getElementById('email');\n        if (el) {\n            let container = document.getElementById('wc-ppcp-watermark-container');\n            if (container) {\n                return;\n            }\n            container = document.createElement('div');\n            container.id = 'wc-ppcp-watermark-container';\n\n            fastlane.FastlaneWatermarkComponent({includeAdditionalInfo: true}).then(component => {\n                el.parentElement.append(container);\n                component.render('#wc-ppcp-watermark-container');\n            });\n        }\n    });\n\n    return null;\n}\n\nexport const Block = (props) => {\n    const getData = getSettings('braintree_cc');\n    return (\n        <PaymentMethodDataProvider getData={getData}>\n            <Component {...props}/>\n        </PaymentMethodDataProvider>\n    );\n}","import {registerCheckoutBlock} from '@woocommerce/blocks-checkout';\n\nimport metadata from './block.json';\nimport {Block} from './block';\n\nregisterCheckoutBlock({\n    metadata,\n    component: Block\n});","import {useState, useEffect, useCallback, useRef} from '@wordpress/element';\nimport {isEmail} from '@wordpress/url';\nimport {useCreateFastlane, useProcessFastlane} from \"./hooks\";\nimport {FastlaneModal} from '../../components';\nimport {useDeviceData} from \"../hooks\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport {getClientToken} from \"../utils\";\n\nexport default function ExpressPaymentComponent({getData, ...props}) {\n    const {\n        billing,\n        shippingData,\n        setExpressPaymentError\n    } = props;\n\n    const {\n        billingAddress\n    } = billing;\n\n    const {\n        email\n    } = billingAddress;\n\n    const authOnLoad = getData('fastlane_pageload');\n\n    const isInitialRender = useRef(true);\n    const [openModal, setOpenModal] = useState(false);\n    const resolveRef = useRef(null);\n    const promiseRef = useRef(null);\n\n    const {\n        fraud\n    } = usePaymentMethodDataContext();\n\n    const dataCollector = useDeviceData({skip: true});\n\n    const openFastlaneModal = useCallback(() => {\n        promiseRef.current = new Promise(resolve => {\n            resolveRef.current = resolve;\n        });\n        setOpenModal(true);\n        return promiseRef.current;\n    }, []);\n\n    const onClose = useCallback((skip = false) => {\n        setOpenModal(false);\n        if (!skip) {\n            resolveRef.current(null);\n        }\n    }, []);\n\n    const onTokenize = useCallback((data) => {\n        resolveRef.current(data);\n    }, []);\n\n    const fastlane = useCreateFastlane({\n        clientToken: getClientToken(),\n        fraudEnabled: fraud.enabled,\n        dataCollector\n    });\n\n    const {\n        onClick,\n        processing,\n        triggerAuthentication\n    } = useProcessFastlane({\n        i18n: getData('i18n'),\n        email,\n        onError: setExpressPaymentError,\n        fastlane,\n        shippingData,\n        openFastlaneModal\n    });\n\n    useEffect(() => {\n        if (!fastlane || !triggerAuthentication || !isEmail(email)) {\n            return;\n        }\n        // Only trigger on first load if fastlane_pageload is true\n        if (authOnLoad && isInitialRender.current) {\n            isInitialRender.current = false;\n            triggerAuthentication(email, false);\n            return;\n        }\n    }, [email, fastlane, triggerAuthentication]);\n\n\n    return (\n        <>\n            <button\n                id=\"wc-ppcp-fastlane-checkout\"\n                className=\"wc-ppcp-fastlane-button\"\n                disabled={openModal || processing}\n                onClick={onClick}>\n                <img className={'wc-ppcp-fastlane-icon'} src={getData('icon_url')}/>\n            </button>\n            <FastlaneModal\n                i18n={getData('i18n')}\n                open={openModal}\n                onClose={onClose}\n                fastlane={fastlane}\n                onTokenize={onTokenize}\n                shippingData={shippingData}/>\n        </>\n    );\n}","export * from './use-create-fastlane';\nexport * from './use-process-fastlane'","import {useEffect} from '@wordpress/element';\nimport {useSelect, useDispatch} from '@wordpress/data';\nimport {create} from '@braintree/fastlane';\nimport {STORE_KEY} from '@wc-braintree/block-data';\n\nexport const useCreateFastlane = ({clientToken, fraudEnabled, dataCollector}) => {\n\n    const fastlane = useSelect(select => {\n        return select(STORE_KEY).getFastlane();\n    });\n\n    const {\n        setFastlane,\n    } = useDispatch(STORE_KEY);\n\n    useEffect(() => {\n        create({\n            authorization: clientToken,\n            ...(dataCollector && {\n                deviceData: dataCollector.deviceData\n            }),\n        }).then(result => {\n            setFastlane(result);\n        });\n    }, [fraudEnabled, dataCollector]);\n\n    useEffect(() => {\n        setFastlane(fastlane);\n    }, []);\n\n    return fastlane;\n}","import {useEffect, useState, useCallback, useRef} from '@wordpress/element';\nimport {isEmail} from '@wordpress/url';\nimport {CART_STORE_KEY, PAYMENT_STORE_KEY} from '@woocommerce/block-data';\nimport {STORE_KEY} from '@wc-braintree/block-data';\nimport {useDispatch, useSelect} from '@wordpress/data';\nimport {extractFullName} from \"../../utils\";\n\nexport const useProcessFastlane = (\n    {\n        i18n,\n        email,\n        onError,\n        fastlane,\n        buttonRef,\n        shippingData,\n        openFastlaneModal\n    }) => {\n\n    const [processing, setProcessing] = useState(false);\n    const currentData = useRef({email, fastlane, buttonRef, onError, shippingData});\n\n    const {\n        emails,\n        isCustomerFound\n    } = useSelect(select => {\n        const store = select(STORE_KEY);\n        return {\n            emails: store.getCanceledEmails(),\n            isCustomerFound: store.isCustomerFound()\n        }\n    })\n\n    const {\n        setBillingAddress\n    } = useDispatch(CART_STORE_KEY);\n\n    const {\n        setPaymentToken,\n        addCanceledEmail,\n        setCustomerContextId\n    } = useDispatch(STORE_KEY);\n\n    const {\n        __internalSetActivePaymentMethod: setActivePaymentMethod\n    } = useDispatch(PAYMENT_STORE_KEY);\n\n    useEffect(() => {\n        currentData.current = {\n            ...currentData.current,\n            email,\n            onError,\n            fastlane,\n            buttonRef,\n            shippingData\n        }\n    }, [email, onError, fastlane, buttonRef, shippingData]);\n\n    const removeEmptyValues = (obj) => {\n        return Object.fromEntries(\n            Object.entries(obj).filter(([_, value]) =>\n                value !== undefined && value !== null && value !== ''\n            )\n        );\n    }\n\n    const updateShippingAddress = useCallback((address) => {\n        const {\n            shippingData\n        } = currentData.current;\n\n        const {\n            setShippingAddress\n        } = shippingData;\n\n        setShippingAddress(removeEmptyValues({\n            first_name: address?.firstName || '',\n            last_name: address?.lastName,\n            address_1: address?.streetAddress,\n            address_2: address?.extendedAddress,\n            city: address?.locality || '',\n            state: address?.region || '',\n            postcode: address?.postalCode || '',\n            country: address?.countryCodeAlpha2 || '',\n            phone: address?.phoneNumber || ''\n        }));\n    }, []);\n\n    const updateBillingAddress = useCallback((address) => {\n        setBillingAddress(removeEmptyValues({\n            first_name: address?.firstName || '',\n            last_name: address?.lastName,\n            address_1: address?.streetAddress,\n            address_2: address?.extendedAddress,\n            city: address?.locality || '',\n            state: address?.region || '',\n            postcode: address?.postalCode || '',\n            country: address?.countryCodeAlpha2 || '',\n            phone: address?.phoneNumber || ''\n        }));\n    }, [setBillingAddress]);\n\n    const scrollToElement = useCallback((selector, offset = 100) => {\n        const el = document.querySelector(selector);\n        if (!el) {\n            return;\n        }\n        const rect = el.getBoundingClientRect();\n        const scrollPosition = rect.top + window.scrollY - offset;\n        window.scrollTo({\n            behavior: 'smooth',\n            left: 0,\n            top: scrollPosition\n        });\n    }, []);\n\n    const triggerAuthentication = useCallback(async (email, showSignup = true) => {\n        const {\n            fastlane,\n            shippingData,\n        } = currentData.current;\n        const {\n            needsShipping\n        } = shippingData;\n        const {\n            profile,\n            identity\n        } = fastlane;\n\n        try {\n            setProcessing(true);\n            const {\n                customerContextId\n            } = await identity.lookupCustomerByEmail(email);\n\n            if (customerContextId) {\n                const {\n                    profileData,\n                    authenticationState\n                } = await identity.triggerAuthenticationFlow(customerContextId);\n                if (authenticationState === 'canceled') {\n                    addCanceledEmail(email);\n                    setCustomerContextId(null);\n                } else if (authenticationState === 'succeeded') {\n                    let {\n                        name,\n                        card,\n                        shippingAddress\n                    } = profileData;\n                    setCustomerContextId(customerContextId);\n\n                    if (needsShipping) {\n                        const {\n                            selectedAddress\n                        } = await profile.showShippingAddressSelector();\n                        if (!selectedAddress) {\n                            addCanceledEmail(email);\n                            setCustomerContextId(null);\n                            return;\n                        }\n                        shippingAddress = selectedAddress;\n                        updateShippingAddress(shippingAddress);\n                    }\n\n                    if (card?.paymentSource?.card?.billingAddress) {\n                        updateBillingAddress({\n                            ...name,\n                            ...card.paymentSource.card.billingAddress,\n                            phoneNumber: shippingAddress?.phoneNumber || null\n                        });\n                    }\n\n                    setPaymentToken(card);\n                    setActivePaymentMethod('braintree_cc');\n                    scrollToElement('#radio-control-wc-payment-method-options-braintree_cc');\n                }\n            } else if (showSignup) {\n                setCustomerContextId(null);\n                // display the Fastlane modal\n                const token = await openFastlaneModal();\n\n                if (token) {\n                    if (token?.paymentSource?.card?.billingAddress) {\n                        let address = token.paymentSource.card.billingAddress;\n                        if (token.paymentSource.card.billingAddress.toBtSdkType) {\n                            address = token.paymentSource.card.billingAddress.toBtSdkType();\n                        } else {\n                            const name = extractFullName(token.paymentSource.card.name);\n                            address = {\n                                firstName: name[0],\n                                lastName: name[1],\n                                ...address\n                            }\n                            updateShippingAddress(address);\n                        }\n                        updateBillingAddress(address);\n                    }\n\n                    setPaymentToken(token);\n                    setActivePaymentMethod('braintree_cc');\n                    scrollToElement('#radio-control-wc-payment-method-options-braintree_cc');\n                }\n            }\n        } catch (error) {\n            console.info(error);\n        } finally {\n            setProcessing(false);\n        }\n\n    }, [\n        scrollToElement,\n        openFastlaneModal,\n        updateBillingAddress,\n        updateShippingAddress\n    ]);\n\n    const onClick = useCallback(async (e) => {\n        e.preventDefault();\n        const {\n            email,\n            onError\n        } = currentData.current;\n\n        if (!email) {\n            return onError(i18n.email_empty);\n        }\n        if (!isEmail(email)) {\n            return onError(i18n.email_invalid);\n        }\n\n        await triggerAuthentication(email);\n\n    }, [\n        scrollToElement,\n        updateBillingAddress,\n        updateShippingAddress,\n        triggerAuthentication\n    ]);\n\n    return {\n        emails,\n        onClick,\n        processing,\n        isCustomerFound,\n        triggerAuthentication\n    }\n}","import {registerExpressPaymentMethod} from '@woocommerce/blocks-registry';\nimport {getSetting} from '@woocommerce/settings';\nimport ExpressPaymentComponent from \"./express-payment-component\";\nimport {PaymentMethod} from \"../../components\";\nimport {getSettings, isCheckoutPage} from \"../utils\";\n\nconst getData = getSettings('braintree_fastlane');\n\nconst data = getSetting('braintree_fastlane_data');\n\nif (isCheckoutPage()) {\n    registerExpressPaymentMethod({\n        name: 'braintree_fastlane',\n        canMakePayment: async () => {\n            return true;\n        },\n        content: <PaymentMethod content={ExpressPaymentComponent} getData={getData}/>,\n        edit: <PaymentMethod content={ExpressPaymentComponent} getData={getData}/>,\n        supports: {\n            features: data.features\n        }\n    })\n}","import {removeNumberPrecision, formatPrice, getShippingOptionId} from \"../utils\";\n\n\nexport const getDisplayItems = (cartTotalItems, unit = 2) => {\n    let items = [];\n    const keys = ['total_tax', 'total_shipping'];\n    cartTotalItems.forEach(item => {\n        if (0 < item.value || (item.key && keys.includes(item.key))) {\n            items.push({\n                label: item.label,\n                type: 'LINE_ITEM',\n                price: removeNumberPrecision(item.value, unit).toString()\n            });\n        }\n    })\n    return items;\n}\n\nexport const getShippingOptions = (shippingRates) => {\n    let options = [];\n    shippingRates.forEach((shippingPackage, idx) => {\n        let rates = shippingPackage.shipping_rates.map(rate => {\n            let txt = document.createElement('textarea');\n            txt.innerHTML = rate.name;\n            let price = formatPrice(rate.price, rate.currency_code);\n            return {\n                id: getShippingOptionId(idx, rate.rate_id),\n                label: txt.value,\n                description: `${price}`\n            }\n        });\n        options = [...options, ...rates];\n    });\n    return options;\n}\n\nexport const getSelectedShippingOptionId = (shippingRates) => {\n    let defaultSelectedOptionId = '';\n    shippingRates.forEach((shippingPackage, idx) => {\n        shippingPackage.shipping_rates.forEach(rate => {\n            if (rate.selected) {\n                defaultSelectedOptionId = getShippingOptionId(idx, rate.rate_id);\n            }\n        });\n    });\n    return defaultSelectedOptionId;\n}","export * from './use-create-payments-client';\nexport * from './use-handle-tokenization';","import {useState, useEffect, useRef} from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport google from '@googlepay';\nimport {usePaymentEventsHandler} from \"../../hooks\";\nimport {extractSelectedShippingOption} from \"../../utils\";\n\nexport const useCreatePaymentsClient = ({getData, shippingData, billing, eventRegistration}) => {\n    const {needsShipping} = shippingData;\n    const [paymentsClient, setPaymentsClient] = useState(null);\n    const {addShippingHandler} = usePaymentEventsHandler({billing, shippingData, eventRegistration});\n    const currentData = useRef({billing, shippingData});\n    useEffect(() => {\n        currentData.current = {billing, shippingData};\n    }, [billing, shippingData]);\n    useEffect(() => {\n        const args = {\n            environment: getData('googleEnvironment'),\n            merchantInfo: {\n                merchantName: getData('merchantName'),\n                merchantId: getData('googleMerchantId')\n            },\n            paymentDataCallbacks: {\n                onPaymentAuthorized: () => Promise.resolve({\n                    transactionState: \"SUCCESS\"\n                })\n            }\n        }\n        if (needsShipping) {\n            args.paymentDataCallbacks.onPaymentDataChanged = (data) => {\n                return new Promise((resolve, reject) => {\n                    const {shippingAddress, shippingOptionData} = data;\n                    const {shippingData} = currentData.current;\n                    let shippingOptionId = shippingOptionData?.id;\n                    const newAddress = {\n                        city: shippingAddress?.locality || '',\n                        state: shippingAddress?.administrativeArea || '',\n                        postcode: shippingAddress?.postalCode || '',\n                        country: shippingAddress?.countryCode || ''\n                    };\n\n                    apiFetch({\n                        method: 'POST',\n                        url: getData('routes').shipping,\n                        data: {\n                            payment_method: 'braintree_googlepay',\n                            address: newAddress,\n                            shipping_method: shippingOptionId\n                        }\n                    }).then(response => {\n                        if (response.code) {\n                            shippingOptionId = null;\n                            resolve(response.data.braintree_googlepay);\n                        } else {\n                            resolve(response.data.braintree_googlepay.requestUpdate);\n                        }\n                    }).catch(response => {\n                        resolve(response.data.braintree_googlepay);\n                    }).finally(() => {\n                        shippingData.setShippingAddress({...shippingData.shippingAddress, ...newAddress});\n                        if (shippingOptionId && shippingOptionId !== 'shipping_option_unselected') {\n                            shippingData.setSelectedRates(...extractSelectedShippingOption(shippingOptionId));\n                        }\n                    });\n                });\n            }\n        }\n        setPaymentsClient(new google.payments.api.PaymentsClient(args));\n    }, [\n        needsShipping,\n        addShippingHandler\n    ]);\n    return paymentsClient;\n}","import {useRef, useCallback, useEffect} from '@wordpress/element';\nimport {getDisplayItems, getShippingOptions, getSelectedShippingOptionId} from \"../helpers\";\nimport {\n    removeNumberPrecision,\n    extractFullName,\n    DEFAULT_BILLING_ADDRESS,\n    DEFAULT_SHIPPING_ADDRESS\n} from \"../../utils\";\nimport {usePaymentMethodDataContext} from \"../../context\";\n\nexport const useHandleTokenization = (\n    {\n        getData,\n        onClick,\n        onClose,\n        googlePayInstance,\n        paymentsClient,\n        billing,\n        shippingData\n    }) => {\n    const currentData = useRef({billing, shippingData});\n    const payloadData = useRef({});\n    const {setPaymentMethodNonce, onPaymentDataFilter} = usePaymentMethodDataContext();\n    useEffect(() => {\n        currentData.current = {billing, shippingData, onClick, onClose};\n    }, [\n        onClick,\n        onClose,\n        shippingData,\n        billing\n    ]);\n\n    useEffect(() => {\n        const unsubscribe = onPaymentDataFilter((data, {billing, shippingData}) => {\n            if (payloadData.current?.billingAddress) {\n                data.meta.billingAddress = {\n                    ...DEFAULT_BILLING_ADDRESS,\n                    ...payloadData.current.billingAddress,\n                    email: billing.billingAddress.email\n                };\n                if (payloadData.current.email) {\n                    data.meta.billingAddress.email = payloadData.current.email;\n                }\n            }\n            if (payloadData.current?.shippingAddress) {\n                data.meta.shippingAddress = {\n                    ...DEFAULT_SHIPPING_ADDRESS,\n                    ...shippingData.shippingAddress,\n                    ...payloadData.current.shippingAddress\n                }\n            }\n            return data;\n        });\n        return () => unsubscribe();\n    }, [onPaymentDataFilter]);\n\n    const handleClick = useCallback(() => {\n        const {billing, shippingData} = currentData.current;\n        const {billingAddress, currency, cartTotal, cartTotalItems} = billing;\n        const {needsShipping, shippingRates} = shippingData;\n        currentData.current.onClick();\n        const paymentDataRequestArgs = {\n            merchantInfo: {\n                merchantName: getData('googleMerchantName'),\n                merchantId: getData('googleMerchantId')\n            },\n            transactionInfo: {\n                countryCode: getData('countryCode'),\n                currencyCode: currency.code,\n                totalPriceStatus: 'FINAL',\n                totalPrice: removeNumberPrecision(cartTotal.value, currency.minorUnit).toString(),\n                totalPriceLabel: getData('totalPriceLabel'),\n                displayItems: getDisplayItems(cartTotalItems, currency.minorUnit)\n            },\n            emailRequired: !billingAddress.email,\n            callbackIntents: ['PAYMENT_AUTHORIZATION'],\n            shippingAddressRequired: needsShipping\n        };\n        if (needsShipping) {\n            paymentDataRequestArgs.shippingAddressParameters = {};\n            paymentDataRequestArgs.shippingOptionRequired = true;\n            paymentDataRequestArgs.callbackIntents = [...paymentDataRequestArgs.callbackIntents, 'SHIPPING_ADDRESS', 'SHIPPING_OPTION'];\n            const shippingOptions = getShippingOptions(shippingRates);\n            if (shippingOptions.length) {\n                paymentDataRequestArgs.shippingOptionParameters = {\n                    shippingOptions,\n                    defaultSelectedOptionId: getSelectedShippingOptionId(shippingRates)\n                }\n            }\n        }\n        const paymentDataRequest = googlePayInstance.createPaymentDataRequest(paymentDataRequestArgs);\n        paymentDataRequest.allowedPaymentMethods[0].parameters.assuranceDetailsRequired = true;\n        paymentDataRequest.allowedPaymentMethods[0].parameters.billingAddressRequired = true;\n        paymentDataRequest.allowedPaymentMethods[0].parameters.billingAddressParameters = {\n            format: 'FULL',\n            phoneNumberRequired: true\n        }\n        paymentsClient.loadPaymentData(paymentDataRequest).then(async (payload) => {\n            // parse the payload\n            if (payload?.paymentMethodData?.info?.billingAddress) {\n                const address = payload.paymentMethodData.info.billingAddress;\n                const [first_name, last_name] = extractFullName(address.name);\n                payloadData.current.billingAddress = {\n                    first_name,\n                    last_name,\n                    address_1: address.address1,\n                    address_2: address.address2,\n                    city: address.locality,\n                    state: address.administrativeArea,\n                    postcode: address.postalCode,\n                    country: address.countryCode,\n                    phone: billingAddress.phone\n                }\n                if (address.phoneNumber && !billingAddress.phone) {\n                    payloadData.current.billingAddress.phone = address.phoneNumber;\n                }\n            }\n            if (payload.shippingAddress) {\n                const address = payload.shippingAddress;\n                const [first_name, last_name] = extractFullName(address.name);\n                payloadData.current.shippingAddress = {\n                    first_name,\n                    last_name,\n                    address_1: address.address1,\n                    address_2: address.address2,\n                    city: address.locality,\n                    state: address.administrativeArea,\n                    postcode: address.postalCode,\n                    country: address.countryCode\n                };\n                if (payloadData.current?.billingAddress?.phone) {\n                    payloadData.current.shippingAddress.phone = payloadData.current.billingAddress.phone;\n                }\n            }\n            if (payload.email) {\n                payloadData.current.email = payload.email;\n            }\n            const data = await googlePayInstance.parseResponse(payload);\n            // set payment method\n            payloadData.current.paymentMethodNonce = data.nonce;\n            setPaymentMethodNonce(data.nonce);\n        }).catch(error => {\n            if (error?.statusCode === 'CANCELED') {\n                currentData.current.onClose();\n                return;\n            }\n            console.log(error);\n        });\n    }, [\n        paymentsClient,\n        googlePayInstance,\n        setPaymentMethodNonce\n    ]);\n    return handleClick;\n}\n\nexport default useHandleTokenization;","import {useState, useEffect, useRef, useCallback} from '@wordpress/element';\nimport {create as createGooglePay} from '@braintree/google-payment';\nimport {registerExpressPaymentMethod} from '@woocommerce/blocks-registry';\nimport {PaymentMethod} from \"../../components\";\nimport {getSettings, getClientToken, isCartPage, isCheckoutPage} from \"../utils\";\nimport google from '@googlepay';\nimport {useCreatePaymentsClient, useHandleTokenization} from \"./hooks\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport {useExpressBreakpointWidth} from \"../hooks\";\n\nconst getData = getSettings('braintree_googlepay');\nlet canPay = null;\nconst paymentsClient = new google.payments.api.PaymentsClient({\n    environment: getData('googleEnvironment'),\n    merchantInfo: {\n        merchantName: getData('googleMerchantName'),\n        merchantId: getData('googleMerchantId')\n    }\n});\nconst GooglePayContainer = ({getData, billing, shippingData, eventRegistration, onClick, onClose}) => {\n    const el = useRef(null);\n    const [googlePayInstance, setGooglePayInstance] = useState(null);\n    useExpressBreakpointWidth({breakpoint: 375});\n    const {notice} = usePaymentMethodDataContext();\n    const paymentsClient = useCreatePaymentsClient({getData, billing, shippingData, eventRegistration});\n    const handleClick = useHandleTokenization({\n        getData,\n        onClick,\n        onClose,\n        googlePayInstance,\n        paymentsClient,\n        billing,\n        shippingData\n    });\n\n    const removeButton = useCallback((el) => {\n        while (el.lastChild) {\n            el.removeChild(el.lastChild);\n        }\n    }, []);\n\n    useEffect(() => {\n        createGooglePay({\n            authorization: getClientToken(),\n            googlePayVersion: 2,\n            googleMerchantId: getData('googleMerchantId')\n        }).then(instance => {\n            setGooglePayInstance(instance);\n        }).catch(error => notice.addNotice(error));\n    }, []);\n    useEffect(() => {\n        if (el.current && paymentsClient) {\n            removeButton(el.current);\n            const button = paymentsClient.createButton({\n                ...getData('buttonOptions'), ...{\n                    onClick: handleClick\n                }\n            });\n            if (getData('buttonShape') === 'rect') {\n                button.querySelector('button')?.classList?.remove('new_style');\n            } else {\n                button.querySelector('button')?.classList?.add('gpay-button-round');\n            }\n            el.current.append(button);\n        }\n    }, [\n        paymentsClient,\n        removeButton,\n        handleClick\n    ]);\n    return (\n        <div ref={el} className={'wc-braintree-blocks-gpay-button'}>\n\n        </div>\n    );\n}\nif ((isCartPage() && getData('expressCartEnabled')) || (isCheckoutPage() && getData('expressCheckoutEnabled'))) {\n    registerExpressPaymentMethod({\n        name: getData('name'),\n        canMakePayment: async () => {\n            if (canPay !== null) {\n                return canPay;\n            }\n            try {\n                const googlePayInstance = await createGooglePay({\n                    authorization: getClientToken(),\n                    googlePayVersion: 2,\n                    googleMerchantId: getData('googleMerchantId')\n                });\n                let result = await paymentsClient.isReadyToPay({\n                    apiVersion: 2,\n                    apiVersionMinor: 0,\n                    allowedPaymentMethods: googlePayInstance.createPaymentDataRequest().allowedPaymentMethods\n                });\n                if (result.result) {\n                    canPay = true;\n                } else {\n                    canPay = false;\n                }\n                return canPay;\n            } catch (error) {\n                return error;\n            }\n        },\n        content: <PaymentMethod content={GooglePayContainer}\n                                title={getData('title')}\n                                description={getData('description')}\n                                name={getData('name')}\n                                icon={getData('icon')}\n                                getData={getData}\n                                isExpress={true}/>,\n        edit: <PaymentMethod content={GooglePayContainer} getData={getData}/>,\n        supports: {\n            showSavedCards: getData('features').includes('tokenization'),\n            showSaveOption: true,\n            features: getData('features')\n        }\n    });\n}\n","export * from './use-process-payment';\nexport * from './use-three-d-secure';\nexport * from './use-process-payment-failure';\nexport * from './use-device-data';\nexport * from './use-notice-handler';\nexport * from './use-payment-events-handler';\nexport * from './use-breakpoint-width'\nexport * from './use-manage-fastlane-payment-token';\nexport * from './use-process-fastlane-payment-token';","import {useEffect, useState, useRef} from '@wordpress/element';\nimport {getFromCache, storeInCache} from \"../utils\";\nimport {usePaymentMethodDataContext} from \"../context\";\n\nexport const useBreakpointWidth = (\n    {\n        key,\n        el,\n        className = '',\n        breakpoint = 0\n    }) => {\n    const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n    key = `${key}:breakpoint`;\n    useEffect(() => {\n        if (el) {\n            let minWidth = getFromCache(key, 0);\n            if (breakpoint < minWidth || !minWidth) {\n                minWidth = breakpoint;\n                storeInCache(key, minWidth);\n            }\n            if (el.clientWidth < minWidth) {\n                el.classList.add(className);\n            } else {\n                el.classList.remove(className);\n            }\n        }\n    }, [el, windowWidth]);\n\n    useEffect(() => {\n        const onWindowResize = (e) => setWindowWidth(window.innerWidth);\n        window.addEventListener('resize', onWindowResize);\n        return () => window.removeEventListener('resize', onWindowResize);\n    });\n}\n\nexport const useExpressBreakpointWidth = (\n    {\n        breakpoint,\n        className = 'wc-braintree-blocks-express-sm'\n    }) => {\n    const [element, setElement] = useState(null);\n    const {container} = usePaymentMethodDataContext();\n\n    useEffect(() => {\n        if (container) {\n            setElement(container.parentNode?.parentNode);\n        }\n    }, [container])\n\n    useBreakpointWidth({\n        key: 'express',\n        el: element,\n        breakpoint,\n        className\n    })\n}","import {useState, useEffect} from '@wordpress/element';\nimport {create} from '@braintree/data-collector';\nimport {usePaymentMethodDataContext} from \"../context\";\n\nexport const useDeviceData = (options = {}, skip = false) => {\n    const {client, notice, onPaymentDataFilter, fraud} = usePaymentMethodDataContext();\n    const enabled = fraud.enabled;\n    const {addNotice} = notice;\n    const [dataCollector, setDataCollector] = useState(null);\n\n    useEffect(() => {\n        if (enabled && client) {\n            create({\n                client,\n                kount: true, ...options\n            }, (error, instance) => {\n                if (error) {\n                    addNotice(error);\n                } else {\n                    setDataCollector(instance);\n                }\n            });\n        }\n    }, [enabled, client, addNotice]);\n\n    useEffect(() => {\n        if (!skip) {\n            const unsubscribe = onPaymentDataFilter((data, {name}) => {\n                data.meta.paymentMethodData[`${name}_device_data`] = dataCollector?.deviceData;\n                return data;\n            }, 10);\n            return () => unsubscribe();\n        }\n    }, [skip, dataCollector, onPaymentDataFilter]);\n\n    return dataCollector;\n}\n\nexport default useDeviceData;","import {useCallback} from '@wordpress/element';\nimport {useDispatch} from '@wordpress/data';\nimport {CART_STORE_KEY} from '@woocommerce/block-data';\nimport {STORE_KEY} from '@wc-braintree/block-data';\nimport {extractFullName} from '../utils';\nimport {setCustomerContextId} from \"../../data/checkout/actions\";\n\nexport const useManageFastlanePaymentToken = (\n    {\n        fastlane\n    }) => {\n\n    const {\n        setPaymentToken,\n        setCustomerContextId\n    } = useDispatch(STORE_KEY);\n\n    const {\n        setBillingAddress\n    } = useDispatch(CART_STORE_KEY);\n\n    const {\n        createErrorNotice\n    } = useDispatch('core/notices');\n\n    const onCancel = useCallback(() => {\n        setPaymentToken(null);\n        setCustomerContextId(null);\n    }, []);\n\n    const onChangePaymentMethod = useCallback(async () => {\n        try {\n            const {\n                selectedCard,\n                selectionChanged\n            } = await fastlane.profile.showCardSelector();\n\n            if (selectedCard && selectionChanged) {\n                setPaymentToken(selectedCard);\n\n                if (selectedCard?.paymentSource?.card?.billingAddress) {\n                    const name = selectedCard.paymentSource.card.name;\n                    const [firstName, lastName] = extractFullName(name);\n                    const address = {\n                        firstName,\n                        lastName,\n                        ...selectedCard.paymentSource.card.billingAddress\n                    };\n\n                    setBillingAddress({\n                        first_name: address.firstName || '',\n                        last_name: address.lastName || '',\n                        address_1: address?.streetAddress || '',\n                        address_2: address?.extendedAddress || '',\n                        city: address?.locality || '',\n                        state: address?.region || '',\n                        postcode: address?.postalCode || '',\n                        country: address?.countryCodeAlpha2 || '',\n                    });\n                }\n            }\n        } catch (error) {\n            createErrorNotice(error.message, {\n                id: 'wc-ppcp-tokenize-error',\n                context: 'wc/checkout/payments'\n            });\n        }\n    }, [fastlane]);\n\n    return {\n        onCancel,\n        onChangePaymentMethod\n    }\n\n}","import {useState, useCallback} from '@wordpress/element';\nimport {getErrorMessage} from \"../utils\";\n\nexport const useNoticeHandler = ({isExpress, setExpressPaymentError}) => {\n    const [notice, setNotice] = useState(null);\n    const addNotice = useCallback((error, type = 'error', isDismissible = true) => {\n        if (isExpress && type == 'error') {\n            setExpressPaymentError(getErrorMessage(error));\n        } else {\n            setNotice({\n                message: getErrorMessage(error),\n                type,\n                isDismissible\n            });\n        }\n\n    }, [setNotice, isExpress, setExpressPaymentError]);\n    const removeNotice = useCallback(() => setNotice(null), [setNotice]);\n    return [\n        notice,\n        addNotice,\n        removeNotice\n    ]\n}\n\nexport default useNoticeHandler;","import {useEffect, useRef, useCallback, useMemo} from '@wordpress/element';\n\nexport const usePaymentEventsHandler = (\n    {\n        billing,\n        shippingData,\n        eventRegistration\n    }) => {\n    const currentData = useRef({billing, shippingData});\n    const {onShippingRateSuccess, onShippingRateFail, onShippingRateSelectSuccess} = eventRegistration;\n    const handlers = useRef(new Map([\n        ['shippingHandler', []],\n        ['shippingMethodHandler', []],\n        ['shippingAddressHandler', []]\n    ]));\n    useEffect(() => {\n        currentData.current = {billing, shippingData};\n    });\n\n    const hasShippingOptions = (shippingRates) => shippingRates.map(rate => rate?.shipping_rates.length > 0).filter(Boolean).length > 0;\n\n    const handleShippingChange = useCallback(async () => {\n        const {billing, shippingData} = currentData.current;\n        const handler = handlers.current.get('shippingHandler');\n        if (handler.length > 0 && !shippingData.isSelectingRate && !shippingData.shippingRatesLoading) {\n            const success = hasShippingOptions(shippingData.shippingRates);\n            while (handler.length) {\n                const callback = handler.pop();\n                await Promise.resolve(callback(success, {billing, shippingData}));\n            }\n        }\n    }, []);\n\n    const handleShippingRateFail = useCallback(() => {\n        const {billing, shippingData} = currentData.current;\n        const handler = handlers.current.get('shippingHandler');\n        while (handler.length) {\n            const callback = handler.pop();\n            callback(false, {billing, shippingData});\n        }\n    }, []);\n\n    const addPaymentEventHandler = useCallback(type => (callback, execute = false) => {\n        const handler = handlers.current.get(type);\n        handler.push(callback);\n        if (execute) {\n            handleShippingChange();\n        }\n    }, [\n        handleShippingChange,\n        handlers.current\n    ]);\n\n    const addShippingHandler = useCallback(addPaymentEventHandler('shippingHandler'), [addPaymentEventHandler]);\n    const addShippingMethodHandler = useCallback(addPaymentEventHandler('shippingMethodHandler'), [addPaymentEventHandler]);\n    const addShippingAddressHandler = useCallback(addPaymentEventHandler('shippingAddressHandler'), [addPaymentEventHandler]);\n\n    useEffect(() => {\n        const unsubscribeShippingRateSuccess = onShippingRateSuccess(handleShippingChange);\n        const unsubscribeShippingRateSelectSuccess = onShippingRateSelectSuccess(handleShippingChange);\n        const unsubscribeShippingRateFail = onShippingRateFail(handleShippingRateFail);\n        return () => {\n            unsubscribeShippingRateSuccess();\n            unsubscribeShippingRateSelectSuccess();\n            unsubscribeShippingRateFail();\n        }\n    }, [\n        onShippingRateSuccess,\n        onShippingRateSelectSuccess,\n        onShippingRateFail\n    ]);\n\n    return {\n        addShippingHandler,\n        addShippingMethodHandler,\n        addShippingAddressHandler\n    }\n}","import {useEffect, useRef, useCallback} from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport {BraintreeError, ensureErrorResponse} from \"../utils\";\n\nexport const useProcessFastlanePaymentToken = (\n    {\n        token,\n        responseTypes,\n        shouldSavePayment,\n        onPaymentDataFilter\n    }) => {\n\n    const currentData = useRef({token});\n\n    useEffect(() => {\n        currentData.current = {token, responseTypes};\n    }, [token, responseTypes]);\n\n    useEffect(() => {\n        const unsubscribe = onPaymentDataFilter(async (data) => {\n            const {\n                token,\n                responseTypes\n            } = currentData.current;\n            try {\n                return {\n                    meta: {\n                        ...data.meta,\n                        paymentMethodData: {\n                            braintree_cc_nonce_key: token.id,\n                            braintree_cc_save_method: shouldSavePayment\n                        }\n                    }\n                }\n            } catch (error) {\n                return ensureErrorResponse(responseTypes, error);\n            }\n        });\n        return unsubscribe;\n    }, [shouldSavePayment, onPaymentDataFilter]);\n\n}","import {useEffect} from '@wordpress/element';\n\nexport const useProcessPaymentFailure = ({event, responseTypes, messageContext = null}) => {\n    useEffect(() => {\n        const unsubscribe = event((data) => {\n            if (data?.processingResponse?.paymentDetails?.braintreeErrorMessage) {\n                const message = data.processingResponse.paymentDetails.braintreeErrorMessage;\n                return {\n                    type: responseTypes.ERROR,\n                    message,\n                    messageContext\n                }\n            }\n            return null;\n        });\n        return () => unsubscribe();\n    }, [event]);\n}\n\nexport default useProcessPaymentFailure;","import {useEffect, useRef} from '@wordpress/element';\nimport {ensureErrorResponse, ensureSuccessResponse} from \"../utils\";\nimport {useThreeDSecure} from \"./use-three-d-secure\";\nimport {useDeviceData} from \"./use-device-data\";\nimport {usePaymentMethodDataContext} from '../context';\n\nexport const useProcessPayment = (\n    {\n        name,\n        billing,\n        useFastlane = false,\n        shippingData,\n        responseTypes,\n        onPaymentSetup,\n        activePaymentMethod,\n        advancedFraudOptions = {}\n    }) => {\n    const currentData = useRef({shippingData, billing, name, activePaymentMethod});\n    const {\n        paymentMethodNonce,\n        paymentHandler,\n        doPaymentDataFilter\n    } = usePaymentMethodDataContext();\n\n    useThreeDSecure({name, skip: useFastlane});\n\n    useDeviceData(advancedFraudOptions);\n\n    useEffect(() => {\n        currentData.current = {shippingData, billing, name, activePaymentMethod, paymentMethodNonce};\n    });\n\n    useEffect(() => {\n        const unsubscribe = onPaymentSetup(async () => {\n            if (currentData.current.activePaymentMethod == currentData.current.name) {\n                try {\n                    const nonce = currentData.current?.paymentMethodNonce || '';\n                    let data = {meta: {paymentMethodData: {[`${name}_nonce_key`]: nonce}}}, result;\n                    if (paymentHandler) {\n                        result = await Promise.resolve(paymentHandler(currentData.current));\n                        if (result?.nonce) {\n                            data.meta.paymentMethodData[`${name}_nonce_key`] = result.nonce;\n                        }\n                    }\n                    result = await doPaymentDataFilter(data, {...currentData.current, ...{result}});\n                    return ensureSuccessResponse(responseTypes, result);\n                } catch (error) {\n                    return ensureErrorResponse(responseTypes, error);\n                }\n            }\n        });\n        return () => unsubscribe();\n    }, [\n        onPaymentSetup,\n        doPaymentDataFilter,\n        paymentHandler\n    ]);\n}\n\nexport default useProcessPayment;","import {useState, useEffect, useCallback} from '@wordpress/element';\nimport {__} from '@wordpress/i18n';\nimport {create} from '@braintree/three-d-secure';\nimport {removeNumberPrecision} from \"../utils\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport {getSettings} from '../utils';\n\nexport const useThreeDSecure = ({name, skip = false, vaulted = false}) => {\n    const settings = getSettings(name);\n    const {client, notice, onPaymentDataFilter, threeDSecureEnabled} = usePaymentMethodDataContext();\n    const {addNotice} = notice;\n    const [instance, setInstance] = useState(null);\n    useEffect(() => {\n        if ((threeDSecureEnabled || vaulted) && client && !instance) {\n            try {\n                create({\n                    version: 2,\n                    client\n                }, (error, instance) => {\n                    if (!error) {\n                        setInstance(instance);\n                    } else {\n                        addNotice(error);\n                    }\n                });\n            } catch (error) {\n                console.log(error);\n            }\n        }\n    }, [\n        instance,\n        threeDSecureEnabled,\n        vaulted,\n        client,\n        addNotice\n    ]);\n\n    useEffect(() => {\n        if (!skip && instance) {\n            const unsubscribe = onPaymentDataFilter((data, {result, name, shippingData, billing}) => {\n                return new Promise((resolve, reject) => {\n                    const {needsShipping, shippingAddress} = shippingData;\n                    const {billingAddress, cartTotal, currency} = billing;\n                    instance.verifyCard({\n                        amount: removeNumberPrecision(cartTotal.value, currency.minorUnit),\n                        nonce: result.nonce,\n                        bin: result?.details?.bin,\n                        email: billingAddress.email || '',\n                        challengeRequested: settings('challengeRequested'),\n                        collectDeviceData: true,\n                        billingAddress: {\n                            givenName: billingAddress.first_name,\n                            surname: billingAddress.last_name,\n                            phoneNumber: billingAddress.phone,\n                            streetAddress: billingAddress.address_1?.slice(0, 50),\n                            extendedAddress: billingAddress.address_2?.slice(0, 50),\n                            locality: billingAddress.city?.slice(0, 50),\n                            region: billingAddress.state,\n                            postalCode: billingAddress.postcode,\n                            countryCodeAlpha2: billingAddress.country\n                        },\n                        additionalInformation: needsShipping ? {\n                            shippingGivenName: shippingAddress.first_name,\n                            shippingSurname: shippingAddress.last_name,\n                            shippingAddress: {\n                                streetAddress: shippingAddress.address_1?.slice(0, 50),\n                                extendedAddress: shippingAddress.address_2?.slice(0, 50),\n                                locality: shippingAddress.city?.slice(0, 50),\n                                region: shippingAddress.state,\n                                postalCode: shippingAddress.postcode,\n                                countryCodeAlpha2: shippingAddress.country\n                            },\n                            ipAddress: settings('ipAddress')\n                        } : {\n                            ipAddress: settings('ipAddress')\n                        },\n                        onLookupComplete: (data, next) => next()\n                    }, (error, payload) => {\n                        if (error) {\n                            reject(error);\n                        } else if (payload?.threeDSecureInfo?.status === 'challenge_required') {\n                            // 3DS was cancelled so teardown and set to null.\n                            instance.teardown().then(() => setInstance(null));\n                            reject({\n                                message: __('3DS authorization cancelled.', 'woo-payment-gateway')\n                            });\n                        } else {\n                            data.meta.paymentMethodData[`${name}_nonce_key`] = payload.nonce;\n                            resolve(data);\n                        }\n                    });\n                })\n            }, 20);\n            return () => unsubscribe();\n        }\n    }, [skip, instance]);\n\n    return instance;\n}\n\nexport default useThreeDSecure;","export * from './use-load-paypal';\nexport * from './use-paypal-options';","import {useState, useEffect, useRef} from '@wordpress/element';\n\nexport const useLoadPayPal = (\n    {\n        paypalCheckoutInstance,\n        currency,\n        addNotice,\n        clientToken,\n        intent,\n        flow,\n        partnerCode\n    }) => {\n    const [paypal, setPayPal] = useState(null);\n    const currentData = useRef({});\n    useEffect(() => {\n        currentData.current.addNotice = addNotice;\n    }, [\n        addNotice\n    ]);\n    useEffect(() => {\n        if (paypalCheckoutInstance) {\n            if (window.paypal) {\n                setPayPal(window.paypal)\n            } else {\n                clientToken = JSON.parse(window.atob(clientToken));\n                const args = {\n                    'client-id': clientToken?.paypal?.clientId,\n                    commit: true,\n                    intent: flow === 'vault' ? 'tokenize' : intent,\n                    currency,\n                    vault: flow === 'vault' ? true : false,\n                    components: 'buttons,messages',\n                    dataAttributes: {\n                        'partner-attribution-id': partnerCode\n                    }\n                };\n                paypalCheckoutInstance.loadPayPalSDK(args).then(() => {\n                    setPayPal(window.paypal)\n                }).catch(error => {\n                    currentData.current.addNotice(error);\n                });\n            }\n        }\n    }, [paypalCheckoutInstance]);\n    return paypal;\n}\n\nexport default useLoadPayPal;","import {useEffect, useMemo, useCallback, useRef} from '@wordpress/element';\nimport {__} from '@wordpress/i18n';\nimport {isEqual, isEmpty} from 'lodash';\nimport {getSetting} from '@woocommerce/settings';\nimport {\n    extractSelectedShippingOption,\n    removeNumberPrecision,\n    getCartTotalItem,\n    extractFullName,\n    getShippingOptionId,\n    cartContainsSubscription,\n    DEFAULT_BILLING_ADDRESS,\n    DEFAULT_SHIPPING_ADDRESS\n} from \"../../utils\";\nimport {usePaymentEventsHandler} from \"../../hooks\";\nimport {getSelectedShippingOptionId} from \"../../googlepay/helpers\";\nimport {usePaymentMethodDataContext} from \"../../context\";\n\nexport const usePayPalOptions = (\n    {\n        getData,\n        addNotice,\n        paypal,\n        paypalCheckoutInstance,\n        billing,\n        shippingData,\n        eventRegistration,\n        emitResponse,\n        onClick,\n        onClose\n    }) => {\n    const {cartTotal, currency} = billing;\n    const {needsShipping} = shippingData;\n    const {noticeContexts, responseTypes} = emitResponse;\n    const currentData = useRef({billing, shippingData});\n    const paymentData = useRef({});\n    const {addShippingHandler} = usePaymentEventsHandler({billing, shippingData, eventRegistration});\n    const {setPaymentMethodNonce, onPaymentDataFilter, onSubmit} = usePaymentMethodDataContext();\n    const {onCheckoutFail} = eventRegistration;\n\n    useEffect(() => {\n        const unsubscribe = onCheckoutFail(() => {\n            if (paymentData.current.incompleteBilling) {\n                return {\n                    type: responseTypes.ERROR,\n                    message: __('Please complete all required billing fields below then click Place Order.', 'woo-payment-gateway'),\n                    messageContext: noticeContexts.EXPRESS_PAYMENTS\n                };\n            }\n            return null;\n        });\n        return () => unsubscribe();\n    }, [\n        onCheckoutFail,\n        responseTypes,\n        noticeContexts\n    ]);\n\n    const getButtonStyle = useCallback((type) => {\n        const baseStyle = getData('buttonStyle');\n        switch (type) {\n            case paypal.FUNDING.PAYPAL:\n                return baseStyle;\n            case paypal.FUNDING.PAYLATER:\n                return {...baseStyle, ...getData('bnplButtonStyle')};\n            default:\n                return baseStyle;\n\n        }\n    }, [paypal]);\n\n    const getFormattedShippingOptions = (shippingRates) => {\n        let options = [];\n        shippingRates.forEach((shippingPackage, idx) => {\n            let rates = shippingPackage.shipping_rates.map(rate => {\n                let txt = document.createElement('textarea');\n                txt.innerHTML = rate.name;\n                return {\n                    id: getShippingOptionId(idx, rate.rate_id),\n                    label: txt.value,\n                    type: 'SHIPPING',\n                    selected: rate.selected,\n                    amount: {\n                        value: removeNumberPrecision(rate.price, rate.currency_minor_unit),\n                        currency_code: rate.currency_code\n                    }\n                }\n            });\n            options = [...options, ...rates];\n        });\n        return options;\n    };\n\n    useEffect(() => {\n        currentData.current = {billing, shippingData, onClick, onClose, onSubmit, addNotice};\n    }, [\n        billing,\n        shippingData,\n        onClick\n    ]);\n\n    useEffect(() => {\n        const unsubscribe = onPaymentDataFilter((data, {billing, shippingData}) => {\n            data.meta.paymentMethodData[`${getData('name')}_nonce_key`] = paymentData.current.nonce;\n            data.meta.billingAddress = {\n                ...DEFAULT_BILLING_ADDRESS,\n                ...billing.billingAddress,\n                ...paymentData.current.billingAddress\n            };\n            data.meta.shippingAddress = {\n                ...DEFAULT_SHIPPING_ADDRESS,\n                ...shippingData.shippingAddress,\n                ...paymentData.current.shippingAddress\n            }\n\n            return data;\n        }, 5);\n        return () => unsubscribe();\n    }, [onPaymentDataFilter]);\n\n    const onShippingChange = useCallback((actions, selectedShippingOption, shippingDataEqual, resolve) => (success, {billing, shippingData}) => {\n        const {currency, cartTotal, cartTotalItems} = billing;\n        const {shippingRates} = shippingData;\n        if (success) {\n            // create the patch\n            const patch = [{\n                'op': 'replace',\n                'path': '/purchase_units/@reference_id==\\'default\\'/amount',\n                'value': {\n                    'currency_code': currency.code,\n                    'value': removeNumberPrecision(cartTotal.value, 2),\n                    'breakdown': {\n                        'item_total': {\n                            'currency_code': currency.code,\n                            'value': removeNumberPrecision(getCartTotalItem('total_items', cartTotalItems), currency.minorUnit) +\n                                removeNumberPrecision(getCartTotalItem('total_fees', cartTotalItems), currency.minorUnit)\n                        },\n                        'shipping': {\n                            'currency_code': currency.code,\n                            'value': removeNumberPrecision(getCartTotalItem('total_shipping', cartTotalItems), currency.minorUnit)\n                        },\n                        'tax_total': {\n                            'currency_code': currency.code,\n                            'value': removeNumberPrecision(getCartTotalItem('total_tax', cartTotalItems), currency.minorUnit)\n                        },\n                        'shipping_discount': {\n                            'currency_code': currency.code,\n                            'value': removeNumberPrecision(getCartTotalItem('total_discount', cartTotalItems), currency.minorUnit)\n                        }\n                    }\n                }\n            }, {\n                'op': !selectedShippingOption ? 'add' : 'replace',\n                'path': '/purchase_units/@reference_id==\\'default\\'/shipping/options',\n                'value': getFormattedShippingOptions(shippingRates)\n            }];\n            return actions.order.patch(patch).then(() => {\n                resolve();\n                actions.resolve()\n            });\n        } else {\n            resolve();\n            return actions.reject();\n        }\n    }, []);\n\n    const options = useMemo(() => {\n        if (paypal && paypalCheckoutInstance) {\n            const options = [];\n            const sources = [paypal.FUNDING.PAYPAL];\n            if (getData('bnplEnabled')) {\n                sources.push(paypal.FUNDING.PAYLATER);\n            }\n            for (let fundingSource of sources) {\n                const option = {\n                    fundingSource,\n                    style: getButtonStyle(fundingSource),\n                    onError: (error) => currentData.current.addNotice(error),\n                    onClick: () => {\n                        currentData.current.onClick();\n                    },\n                    onApprove: (data, actions) => {\n                        return paypalCheckoutInstance.tokenizePayment(data).then(response => {\n                            const {billingAddress} = currentData.current.billing;\n                            const {needsShipping} = currentData.current.shippingData;\n                            // set shipping address\n                            paymentData.current = {nonce: response.nonce, billingAddress: {}};\n                            if (response?.details?.billingAddress) {\n                                const address = response.details.billingAddress;\n                                paymentData.current.billingAddress = {\n                                    address_1: address.line1,\n                                    address_2: address.line2,\n                                    city: address.city,\n                                    state: address.state,\n                                    postcode: address.postalCode,\n                                    country: address.countryCode\n                                }\n                            }\n                            if (!isEmpty(response?.details?.shippingAddress)) {\n                                const {shippingAddress} = response.details;\n                                const [first_name, last_name] = extractFullName(shippingAddress.recipientName);\n                                paymentData.current.shippingAddress = {\n                                    first_name,\n                                    last_name,\n                                    address_1: shippingAddress.line1 || '',\n                                    address_2: shippingAddress.line2 || '',\n                                    city: shippingAddress.city || '',\n                                    state: shippingAddress.state || '',\n                                    postcode: shippingAddress.postalCode || '',\n                                    country: shippingAddress.countryCode || ''\n                                }\n                                if (isEmpty(paymentData.current.billingAddress)) {\n                                    paymentData.current.billingAddress = paymentData.current.shippingAddress;\n                                }\n                                if (response.details?.phone) {\n                                    paymentData.current.shippingAddress.phone = response.details.phone;\n                                }\n                            }\n                            if (response.details?.phone) {\n                                paymentData.current.billingAddress.phone = response.details.phone;\n                            }\n                            if (response.details?.email) {\n                                paymentData.current.billingAddress.email = response.details.email;\n                            }\n                            if (response.details?.firstName) {\n                                paymentData.current.billingAddress.first_name = response.details.firstName;\n                            }\n                            if (response.details?.lastName) {\n                                paymentData.current.billingAddress.last_name = response.details.lastName;\n                            }\n                            if (!paymentData.current.billingAddress.address_1 && !billingAddress.address_1) {\n                                paymentData.current.incompleteBilling = true;\n                            }\n                            if (cartContainsSubscription() && needsShipping) {\n                                currentData.current.addNotice(__('Please select a shipping option then click Place Order to complete your payment.', 'woo-payment-gateway'), 'info');\n                            } else {\n                                setPaymentMethodNonce(response.nonce);\n                            }\n                        });\n                    },\n                    createOrder: () => {\n                        return paypalCheckoutInstance.createPayment({\n                            flow: cartContainsSubscription() ? 'vault' : 'checkout',\n                            intent: getData('intent'),\n                            currency: currency.code,\n                            displayName: getData('displayName'),\n                            amount: removeNumberPrecision(cartTotal.value, currency.minorUnit),\n                            enableShippingAddress: needsShipping,\n                            shippingAddressEditable: needsShipping\n                        }).then(id => {\n                            return id;\n                        }).catch(error => {\n                            console.log(error);\n                        })\n                    },\n                    onCancel: () => {\n                        currentData.current.onClose();\n                    }\n                }\n                if (cartContainsSubscription()) {\n                    option.createBillingAgreement = option.createOrder;\n                    delete (option.createOrder);\n                }\n                // can't update shipping options when using billing agreements.\n                if (needsShipping && !option.hasOwnProperty('createBillingAgreement')) {\n                    option.onShippingChange = (data, actions) => {\n                        const {shipping_address: address, selected_shipping_option} = data;\n                        const selectedShippingOption = selected_shipping_option?.id;\n                        const shippingData = currentData.current.shippingData;\n                        const {shippingAddress} = shippingData;\n                        const {city, state, postcode, country} = shippingAddress;\n                        const shippingOptionId = getSelectedShippingOptionId(currentData.current.shippingData.shippingRates);\n                        const newAddress = {\n                            city: address.city || '',\n                            state: address.state || '',\n                            postcode: address.postal_code || '',\n                            country: address.country_code || ''\n                        }\n                        const isShippingOptionEqual = selectedShippingOption == null || selectedShippingOption == shippingOptionId;\n                        const isAddressEqual = isEqual({\n                            city, state, postcode, country\n                        }, newAddress);\n                        const shippingDataEqual = isAddressEqual && isShippingOptionEqual;\n                        if (selectedShippingOption) {\n                            shippingData.setSelectedRates(...extractSelectedShippingOption(selectedShippingOption));\n                        }\n                        shippingData.setShippingAddress({...shippingAddress, ...newAddress});\n                        return new Promise(resolve => {\n                            addShippingHandler(onShippingChange(actions, selected_shipping_option?.id, shippingDataEqual, resolve), shippingDataEqual);\n                        });\n                    }\n                }\n                let button = paypal.Buttons(option);\n                if (button.isEligible()) {\n                    options.push(option);\n                }\n            }\n            return options;\n        }\n    }, [\n        paypal,\n        paypalCheckoutInstance,\n        needsShipping,\n        onShippingChange,\n        addShippingHandler,\n        setPaymentMethodNonce\n    ]);\n    return options;\n}\n\nexport default usePayPalOptions;","import {useState, useEffect, useRef, useCallback} from '@wordpress/element';\nimport {registerExpressPaymentMethod} from '@woocommerce/blocks-registry';\nimport {ExperimentalOrderMeta, TotalsWrapper} from '@woocommerce/blocks-checkout';\nimport {registerPlugin} from '@wordpress/plugins';\nimport {create as createPayPalCheckout} from '@braintree/paypal-checkout';\nimport {getClientToken, getSettings, getMerchantAccount, cartContainsSubscription, isCartPage, isCheckoutPage} from \"../utils\";\nimport {Notice, PaymentMethod} from \"../../components\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport {useLoadPayPal, usePayPalOptions} from \"./hooks\";\nimport {useExpressBreakpointWidth} from \"../hooks\";\n\nconst getData = getSettings('braintree_paypal');\n\nconst PayPalContainer = ({billing, shippingData, eventRegistration, emitResponse, onClick, onClose}) => {\n    const {currency} = billing;\n    const {notice} = usePaymentMethodDataContext();\n    const {addNotice} = notice;\n    const [paypalCheckoutInstance, setPayPalCheckoutInstance] = useState(null);\n    const [isPayPalButton, setIsPayPalButton] = useState(false);\n    const paypalButton = useRef();\n    useExpressBreakpointWidth({breakpoint: 375});\n    const paypal = useLoadPayPal({\n        paypalCheckoutInstance,\n        currency: currency.code,\n        clientToken: getClientToken(),\n        addNotice,\n        intent: getData('intent'),\n        flow: cartContainsSubscription() ? 'vault' : 'checkout',\n        partnerCode: getData('partnerCode')\n    });\n    const options = usePayPalOptions({\n        getData,\n        addNotice,\n        paypal,\n        paypalCheckoutInstance,\n        billing,\n        shippingData,\n        eventRegistration,\n        emitResponse,\n        onClick,\n        onClose\n    })\n    useEffect(() => {\n        createPayPalCheckout({\n            authorization: getClientToken(),\n            merchantAccountId: getMerchantAccount(currency.code)\n        }).then(instance => {\n            setPayPalCheckoutInstance(instance)\n        }).catch(error => {\n            addNotice(error)\n        });\n    }, []);\n\n    useEffect(() => {\n        if (paypal) {\n            paypal.Buttons.driver(\"react\", {React, ReactDOM});\n            paypalButton.current = paypal.Buttons.driver(\"react\", {React, ReactDOM});\n            setIsPayPalButton(true);\n        }\n    }, [paypal]);\n    const PayPalButton = paypalButton.current;\n    const BUTTON = isPayPalButton && options ? options.map(option => {\n        return <PayPalButton key={option.fundingSource} {...option}/>\n    }) : null;\n    return (\n        <>\n            {notice?.notice && <Notice notice={notice.notice} onRemove={notice.removeNotice}/>}\n            {BUTTON}\n        </>\n    )\n}\n\nif ((isCartPage() && getData('expressCartEnabled')) || (isCheckoutPage() && getData('expressCheckoutEnabled'))) {\n    registerExpressPaymentMethod({\n        name: getData('name'),\n        canMakePayment: () => {\n            return true;\n        },\n        content: <PaymentMethod content={PayPalContainer}\n                                title={getData('title')}\n                                description={getData('description')}\n                                name={getData('name')}\n                                icon={getData('icon')}\n                                getData={getData}\n                                isExpress={true}\n                                advancedFraudOptions={{paypal: true}}/>,\n        edit: <PaymentMethod content={PayPalContainer} getData={getData}/>,\n        supports: {\n            showSavedCards: getData('features').includes('tokenization'),\n            showSaveOption: true,\n            features: getData('features')\n        }\n    });\n}\n\nconst OrderItemMessaging = ({cart, extensions, context}) => {\n    const {cartTotals} = cart;\n    const {currency_code: currency, total_price} = cartTotals;\n    const [paypalCheckout, setPayPalCheckout] = useState();\n    const currencies = getData('payLaterMsgCurrencies');\n    const isAvailable = getData('paylaterMsgEnabled') && currencies.includes(currency) && !cartContainsSubscription();\n    const container = useRef(null);\n    if (!isAvailable) {\n        return null;\n    }\n    useEffect(() => {\n        createPayPalCheckout({\n            authorization: getClientToken(),\n            merchantAccountId: getMerchantAccount(currency)\n        }).then((instance) => setPayPalCheckout(instance)).catch(() => {\n        });\n    }, []);\n    const paypal = useLoadPayPal({\n        paypalCheckoutInstance: paypalCheckout,\n        currency,\n        addNotice: null,\n        clientToken: getClientToken(),\n        intent: getData('intent'),\n        flow: 'checkout',\n        partnerCode: getData('partnerCode')\n    });\n\n    useEffect(() => {\n        if (paypal) {\n            paypal.Messages({\n                amount: total_price / (10 ** cartTotals.currency_minor_unit),\n                currency,\n                placement: 'checkout',\n                style: {\n                    layout: 'text',\n                    logo: {\n                        type: 'primary',\n                        position: 'left'\n                    },\n                    text: {color: getData('paylaterTxtColor')}\n                }\n            }).render(container.current);\n        }\n    }, [paypal, total_price]);\n    return (\n        <TotalsWrapper>\n            <div className='wc-block-components-totals-item'>\n                <div ref={container} className='paypal-msg-container'></div>\n            </div>\n        </TotalsWrapper>\n    )\n}\n\nconst render = () => {\n    return (\n        <ExperimentalOrderMeta>\n            <OrderItemMessaging/>\n        </ExperimentalOrderMeta>\n    )\n}\n\n\nregisterPlugin('wc-braintree', {\n    render,\n    scope: 'woocommerce-checkout'\n});\n","import {getSetting} from '@woocommerce/settings';\nimport apiFetch from '@wordpress/api-fetch';\nimport {create as createClient} from '@braintree/client';\nimport {getCurrency, formatPrice as wcFormatPrice} from '@woocommerce/price-format';\n\nconst wcBraintreeData = getSetting('wcBraintreeData');\n\nconst errorMessages = getSetting('wcBraintreeMessages');\n\nconst CACHE_PREFIX = 'wcBraintree:';\n\nconst SHIPPING_OPTION_REGEX = /^([\\w]+)\\:(.+)$/;\n\nexport const getSettings = (name) => {\n    name = `${name}_data`;\n    return (key) => {\n        if (key) {\n            return getSetting(name)[key];\n        }\n        return getSetting(name);\n    }\n}\n\nexport const getClientToken = () => wcBraintreeData.clientToken;\n\nexport const getMerchantAccount = (currency) => wcBraintreeData?.merchantAccounts?.[currency] ? wcBraintreeData.merchantAccounts[currency] : null\n\nexport const loadClient = new Promise((resolve, reject) => {\n    createClient({\n        authorization: wcBraintreeData.clientToken\n    }, (err, clientInstance) => {\n        if (err) {\n            reject(err);\n        } else {\n            resolve(clientInstance);\n        }\n    });\n});\n\nexport const canMakePayment = () => {\n    return new Promise((resolve, reject) => {\n        loadClient.then(() => resolve(true)).catch(error => {\n            console.log('Error loading client: ', error);\n            resolve({error});\n        });\n    });\n}\n\nexport const ensureSuccessResponse = (responseTypes, data = {}) => {\n    return {type: responseTypes.SUCCESS, ...data};\n}\n\nexport const ensureErrorResponse = (responseTypes, error) => {\n    return {type: responseTypes.ERROR, message: getErrorMessage(error)}\n};\n\nexport const getErrorMessage = (error) => {\n    let msg = error?.message;\n    if (typeof error == 'string') {\n        msg = error;\n    } else {\n        if (error.code && errorMessages[error.code]) {\n            msg = errorMessages[error.code];\n        }\n    }\n    return msg;\n}\n\nexport const removeNumberPrecision = (value, unit) => {\n    return value / 10 ** unit;\n}\n\nexport class BraintreeError extends Error {\n    constructor(error) {\n        super(error.message);\n        this.error = error;\n    }\n}\n\nconst getCacheKey = (key) => `${CACHE_PREFIX}${key}`;\n\nexport const storeInCache = (key, value) => {\n    const exp = Math.floor(new Date().getTime() / 1000) + (60 * 15);\n    if ('sessionStorage' in window) {\n        sessionStorage.setItem(getCacheKey(key), JSON.stringify({value, exp}));\n    }\n}\n\nexport const getFromCache = (key, defaultValue = null) => {\n    if ('sessionStorage' in window) {\n        try {\n            const item = JSON.parse(sessionStorage.getItem(getCacheKey(key)));\n            if (item) {\n                const {value, exp} = item;\n                if (Math.floor(new Date().getTime() / 1000) > exp) {\n                    deleteFromCache(getCacheKey(key));\n                } else {\n                    return value;\n                }\n            }\n        } catch (err) {\n        }\n    }\n    return defaultValue;\n}\n\nexport const deleteFromCache = (key) => {\n    if ('sessionStorage' in window) {\n        sessionStorage.removeItem(getCacheKey(key));\n    }\n}\n\nexport const formatPrice = (price, currencyCode) => {\n    const {prefix, suffix, decimalSeparator, minorUnit, thousandSeparator} = getCurrency(currencyCode);\n    if (price == '' || price === undefined) {\n        return price;\n    }\n\n    price = typeof price === 'string' ? parseInt(price, 10) : price;\n    price = price / 10 ** minorUnit;\n    price = price.toString().replace('.', decimalSeparator);\n    let fractional = '';\n    const index = price.indexOf(decimalSeparator);\n    if (index < 0) {\n        if (minorUnit > 0) {\n            price += `${decimalSeparator}${new Array(minorUnit + 1).join('0')}`;\n        }\n    } else {\n        const fractional = price.substr(index + 1);\n        if (fractional.length < minorUnit) {\n            price += new Array(minorUnit - fractional.length + 1).join('0');\n        }\n    }\n    // separate out price and decimals so thousands separator can be added.\n    const match = price.match(new RegExp(`(\\\\d+)\\\\${decimalSeparator}(\\\\d+)`));\n    if (match) {\n        ({1: price, 2: fractional} = match);\n    }\n    price = price.replace(new RegExp(`\\\\B(?=(\\\\d{3})+(?!\\\\d))`, 'g'), `${thousandSeparator}`);\n    price = fractional?.length > 0 ? price + decimalSeparator + fractional : price;\n    price = prefix + price + suffix;\n    return price;\n}\n\nexport const getShippingOptionId = (packageId, rateId) => `${packageId}:${rateId}`;\n\nexport const extractSelectedShippingOption = (id) => {\n    const result = id.match(SHIPPING_OPTION_REGEX);\n    if (result) {\n        const {1: packageIdx, 2: rate} = result;\n        return [rate, packageIdx];\n    }\n    return [];\n}\n\nexport const getSelectedShippingOptionId = (selectedRates) => {\n    for (let idx of Object.keys(selectedRates)) {\n        return getShippingOptionId(idx, selectedRates[idx]);\n    }\n}\n\nexport const extractFullName = (name) => {\n    const firstName = name.split(' ').slice(0, -1).join(' ');\n    const lastName = name.split(' ').pop();\n    return [firstName, lastName];\n}\n\nexport const extractAddressLines = (lines) => {\n    let address_1, address_2;\n    if (Array.isArray(lines)) {\n        address_1 = lines?.[0];\n        if (lines.length > 1) {\n            address_2 = lines?.[1];\n        }\n    }\n    return {address_1, address_2};\n}\n\nexport const getCartTotalItem = (key, cartTotalItems) => {\n    for (let item of cartTotalItems) {\n        if (item.key === key) {\n            return item.value;\n        }\n    }\n    return null;\n}\n\nexport const canShowSavedCard = () => {\n    return !cartContainsSubscription();\n}\n\nexport const cartContainsSubscription = () => wcBraintreeData?.hasSubscription == true;\n\nexport const isCartPage = () => wcBraintreeData.page === 'cart';\n\nexport const isCheckoutPage = () => wcBraintreeData.page === 'checkout';\n\nexport const DEFAULT_SHIPPING_ADDRESS = {\n    'first_name': '',\n    'last_name': '',\n    'company': '',\n    'address_1': '',\n    'address_2': '',\n    'city': '',\n    'state': '',\n    'postcode': '',\n    'country': '',\n    'phone': '',\n}\n\nexport const DEFAULT_BILLING_ADDRESS = {\n    ...DEFAULT_SHIPPING_ADDRESS,\n    'email': ''\n}\n\nexport const formatPaymentMethod = (format, data) => {\n    data = {\n        ...data,\n        card_type: data.brand,\n        last4: data.lastDigits\n    }\n\n    const replacementData = {};\n\n    // Create placeholders from the data object\n    Object.keys(data).forEach(key => {\n        replacementData[`{${key}}`] = data[key];\n    });\n\n    // Replace all placeholders with actual values\n    let result = format;\n    Object.keys(replacementData).forEach(placeholder => {\n        // Use split and join which is more efficient for simple replacements\n        while (result.includes(placeholder)) {\n            result = result.replace(placeholder, replacementData[placeholder]);\n        }\n    });\n\n    return result;\n}\n\nexport const fetchTokenNonce = async (token_id) => {\n    try {\n        let result = await apiFetch({\n            path: '/wc-braintree/v1/3ds/vaulted_nonce',\n            method: 'POST',\n            data: {token_id, version: 2}\n        });\n        return result;\n    } catch (error) {\n        console.info('Error fetching 3ds nonce. ', error);\n    }\n};\n","export * from './use-handle-tokenization';","import {useEffect, useCallback, useRef} from '@wordpress/element';\nimport {usePaymentMethodDataContext} from \"../../context\";\n\nexport const useHandleTokenization = ({venmoInstance, onSubmit}) => {\n    const paymentData = useRef(null);\n    const {onPaymentDataFilter, paymentMethodNonce, setPaymentMethodNonce, notice: {addNotice}} = usePaymentMethodDataContext();\n    const handleClick = useCallback(async () => {\n        try {\n            if (paymentMethodNonce) {\n                onSubmit();\n            } else {\n                const result = await venmoInstance.tokenize();\n                paymentData.current = {nonce: result.nonce};\n                setPaymentMethodNonce(result.nonce);\n            }\n        } catch (error) {\n            addNotice(error);\n        }\n    }, [\n        venmoInstance,\n        onSubmit,\n        paymentMethodNonce\n    ]);\n\n    useEffect(() => {\n        const unsubscribe = onPaymentDataFilter((data, {name}) => {\n            data.meta.paymentMethodData[`${name}_nonce_key`] = paymentData.current.nonce;\n            return data;\n        }, 5);\n        return () => unsubscribe();\n    }, [onPaymentDataFilter]);\n\n    return {handleClick}\n}\n\nexport default useHandleTokenization;","import {create as createVenmo} from '@braintree/venmo';\nimport {useState, useEffect} from '@wordpress/element';\nimport {__} from '@wordpress/i18n';\nimport {registerPaymentMethod} from '@woocommerce/blocks-registry';\nimport {Notice, PaymentMethodLabel} from \"../../components\";\nimport {PaymentMethod} from \"../../components\";\nimport {SavedTokenProvider} from \"../../components\";\nimport {getSettings, getClientToken} from \"../utils\";\nimport {usePaymentMethodDataContext} from \"../context\";\nimport {useHandleTokenization} from \"./hooks\";\n\nconst getData = getSettings('braintree_venmo');\n\nconst loadVenmo = new Promise((resolve, reject) => {\n    createVenmo({\n        authorization: getClientToken(),\n        allowNewBrowserTab: false\n    }).then(instance => resolve(instance)).catch(error => reject(error));\n});\n\nconst VenmoComponent = ({onSubmit}) => {\n    const {notice} = usePaymentMethodDataContext();\n    const [venmoInstance, setVenmoInstance] = useState(null);\n    const {handleClick} = useHandleTokenization({\n        venmoInstance,\n        onSubmit\n    });\n\n    useEffect(() => {\n        loadVenmo.then(instance => setVenmoInstance(instance)).catch(error => notice.addNotice(error));\n    }, []);\n    return (\n        <>\n            {notice?.notice && <Notice notice={notice.notice} onRemove={notice.removeNotice}/>}\n            <div className={'wc-braintree-blocks-venmo-button__container'}>\n                <p>{__('Complete your order with', 'woo-payment-gateway')}</p>\n                {venmoInstance && <VenmoButton onClick={handleClick} src={getData('buttonIcon')}/>}\n            </div>\n        </>\n    )\n}\n\nconst VenmoButton = ({onClick, src}) => {\n    return (\n        <button className={'wc-braintree-blocks-venmo__button'} onClick={onClick}>\n            <img src={src}/>\n        </button>\n    )\n}\n\nregisterPaymentMethod({\n    name: getData('name'),\n    label: <PaymentMethodLabel\n        title={getData('title')}\n        paymentMethod={getData('name')}\n        icon={getData('icon')}/>,\n    ariaLabel: __('Venmo', 'woo-payment-gateway'),\n    placeOrderButtonLabel: getData('placeOrderButtonLabel'),\n    canMakePayment: () => new Promise((resolve, reject) => {\n        loadVenmo.then(instance => {\n            resolve(instance.isBrowserSupported());\n        }).catch(error => {\n            resolve(false);\n        });\n    }),\n    content: <PaymentMethod content={VenmoComponent}\n                            title={getData('title')}\n                            description={getData('description')}\n                            name={getData('name')}\n                            icon={getData('icon')}\n                            getData={getData}/>,\n    savedTokenComponent: <SavedTokenProvider getData={getData}\n                                             name={getData('name')}\n                                             vaultedThreeDSecure={getData('vaultedThreeDSecure')}/>,\n    edit: <PaymentMethod content={VenmoComponent} getData={getData}/>,\n    supports: {\n        showSavedCards: getData('features').includes('tokenization'),\n        showSaveOption: false,\n        features: getData('features')\n    }\n});","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\tvar nativeCodeString = '[native code]';\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n"],"names":["ErrorBoundary","props","state","hasError","error","errorInfo","this","setState","className","toString","componentStack","children","Component","onClick","text","logo","src","i","i18n","open","onClose","fastlane","onTokenize","shippingData","useState","rendered","setRendered","currentData","useRef","useCallback","e","preventDefault","paymentComponent","current","getPaymentToken","response","console","log","useEffect","needsShipping","shippingAddress","firstName","first_name","lastName","last_name","streetAddress","address_1","extendedAddress","address_2","locality","city","region","postalCode","postcode","countryCodeAlpha2","country","phoneNumber","phone","FastlanePaymentComponent","then","instance","render","document","body","classList","add","setTimeout","remove","classnames","continue","cancel","Notice","notice","onRemove","classes","classNames","type","key","isDismissible","message","PaymentMethodLabel","title","components","paymentMethod","icon","Label","Icons","PaymentMethodIcons","Array","isArray","icons","align","PaymentMethod","content","description","el","container","setContainer","Content","ref","PaymentMethodDataProvider","PaymentMethodProviderContainer","name","billing","eventRegistration","emitResponse","activePaymentMethod","isExpress","advancedFraudOptions","onPaymentSetup","onCheckoutFail","responseTypes","noticeContexts","usePaymentMethodDataContext","useProcessPayment","useFastlane","paymentToken","useProcessPaymentFailure","event","messageContext","EXPRESS_PAYMENTS","SavedTokenComponent","vaultedThreeDSecure","token","doPaymentDataFilter","useDeviceData","useThreeDSecure","vaulted","unsubscribe","fetchTokenNonce","result","success","BraintreeError","meta","paymentMethodData","data","ensureSuccessResponse","ensureErrorResponse","SET_FASTLANE","SET_PAYMENT_TOKEN","SET_CUSTOMER_CONTEXT","ADD_CANCELED_EMAIL","ACTION_TYPES","id","email","config","reducer","selectors","actions","store","createReduxStore","STORE_KEY","register","DEFAULT_STATE","action","newState","customerContextId","canceledEmails","useCreatePaymentRequest","applePayInstance","getData","useMemo","cartTotal","currency","cartTotalItems","billingAddress","shippingRates","request","total","label","amount","removeNumberPrecision","value","minorUnit","lineItems","formatLineItems","currencyCode","code","countryCode","requiredBillingContactFields","requiredShippingContactFields","fields","shippingMethods","formatShippingMethods","createPaymentRequest","useCreateSession","paymentRequest","addShippingHandler","usePaymentEventsHandler","setPaymentMethodNonce","onPaymentDataFilter","addNotice","applePayData","getApplePayVersion","range","version","ApplePaySession","supportsVersion","onSessionCancel","onValidateMerchant","session","performValidation","validationURL","displayName","merchantSession","completeMerchantValidation","catch","abort","onPaymentMethodSelected","address","billingContact","administrativeArea","apiFetch","method","url","payment_method","messages","completePaymentMethodSelection","xhr","onShippingContactSelected","shippingContact","newAddress","toUpperCase","shipping_address","completeShippingContactSelection","shippingContactUpdate","errors","ApplePayError","contactField","newTotal","newShippingMethods","finally","setShippingAddress","onShippingMethodSelected","shippingMethod","setSelectedRates","selectedRates","shipping_method","identifier","completeShippingMethodSelection","shippingMethodUpdate","extractSelectedShippingOption","onPaymentAuthorized","length","completePayment","status","STATUS_FAILURE","tokenize","payment","givenName","familyName","extractAddressLines","addressLines","emailAddress","nonce","STATUS_SUCCESS","isEmpty","DEFAULT_BILLING_ADDRESS","DEFAULT_SHIPPING_ADDRESS","createSession","onvalidatemerchant","onpaymentmethodselected","onpaymentauthorized","oncancel","onshippingcontactselected","onshippingmethodselected","handleClick","begin","alert","getSettings","loadApplePay","Promise","resolve","reject","createApplePay","authorization","getClientToken","ApplePayContainer","setApplePayInstance","ApplePayButton","style","rounded","styles","getButtonStyle","isCartPage","isCheckoutPage","registerExpressPaymentMethod","canMakePayment","window","canMakePayments","edit","supports","features","items","keys","forEach","item","includes","push","options","shippingPackage","idx","rates","shipping_rates","map","rate","txt","createElement","innerHTML","getShippingOptionId","rate_id","detail","price","currency_minor_unit","dispatch","callback","priority","ACTIONS","ADD_ACTION","uniqueId","REMOVE_ACTION","emittFilter","args","handlers","events","sortedEvents","from","values","sort","a","b","Map","set","delete","PaymentMethodDataContext","createContext","onSubmit","setExpressPaymentError","client","setClient","paymentMethodNonce","useReducer","actionReducer","eventHandlers","useActionEmitter","currentEventHandlers","paymentHandler","useNoticeHandler","removeNotice","useSelect","select","getFastlane","customerFound","isCustomerFound","setPaymentHandler","handler","loadClient","paymentMethodDataContext","fraud","enabled","threeDSecureEnabled","Provider","useContext","CustomForm","getCustomFormConfig","breakpoint","fieldKeys","hostedFieldInstance","setHostedFieldsInstance","setFields","containerElement","setContainerElement","cardBrand","setCardBrand","fieldOrder","assertFieldsValid","reduce","acc","prop","hasOwnProperty","setFieldContainer","field","prev","addClassToFields","payload","details","invalidFieldKeys","useBreakpointWidth","clientInstance","create","on","cards","emittedBy","isValid","indexOf","nextField","focus","cloneElement","setFieldOrder","CardIcon","getIconSrc","InvalidCustomForm","sprintf","__","forms","assertValidConfig","assertValidFormId","Error","assertConfigHasProperties","missingParams","TypeError","join","BootstrapForm","CardNumber","CardExpirationDate","CardCVV","registerCustomForm","SimpleForm","DropinForm","setDropinInstance","clientToken","locale","setError","createDropin","dropinInstance","onChange","getSetting","CreditCardComponent","openModal","setOpenModal","setPaymentToken","useDispatch","emails","getCanceledEmails","showSignup","dropinEnabled","DropinContainer","HostedFieldsContainer","FastlaneLink","fastLaneLogo","fastlane_signup","FastlaneModal","handlePaymentProcessing","requestPaymentMethod","err","registerPaymentMethod","ariaLabel","savedTokenComponent","SavedTokenProvider","showSavedCards","showSaveOption","canShowSavedCard","fastlane_icons","payment_format","shouldSavePayment","card","paymentSource","brand","last4","lastDigits","expiry","useProcessFastlanePaymentToken","useManageFastlanePaymentToken","onCancel","onChangePaymentMethod","toLowerCase","formatPaymentMethod","change","extensions","isInitialRender","wc_braintree","CART_STORE_KEY","getNeedsShipping","getCustomerData","debouncedEmail","setDebouncedEmail","dataCollector","skip","useCreateFastlane","fraudEnabled","onError","useProcessFastlane","openFastlaneModal","triggerAuthentication","timer","clearTimeout","isEmail","fastlane_pageload","getElementById","FastlaneWatermarkComponent","includeAdditionalInfo","component","parentElement","append","registerCheckoutBlock","metadata","Block","authOnLoad","resolveRef","promiseRef","processing","disabled","setFastlane","deviceData","buttonRef","setProcessing","setBillingAddress","addCanceledEmail","setCustomerContextId","setActivePaymentMethod","PAYMENT_STORE_KEY","__internalSetActivePaymentMethod","removeEmptyValues","obj","Object","fromEntries","entries","filter","updateShippingAddress","updateBillingAddress","scrollToElement","selector","offset","querySelector","rect","getBoundingClientRect","scrollPosition","top","scrollY","scrollTo","behavior","left","profile","identity","lookupCustomerByEmail","triggerAuthenticationFlow","profileData","authenticationState","showShippingAddressSelector","selectedAddress","toBtSdkType","extractFullName","info","email_empty","email_invalid","ExpressPaymentComponent","unit","formatPrice","currency_code","defaultSelectedOptionId","selected","paymentsClient","setPaymentsClient","environment","merchantInfo","merchantName","merchantId","paymentDataCallbacks","transactionState","onPaymentDataChanged","shippingOptionData","shippingOptionId","shipping","braintree_googlepay","requestUpdate","google","payments","api","PaymentsClient","useHandleTokenization","googlePayInstance","payloadData","paymentDataRequestArgs","transactionInfo","totalPriceStatus","totalPrice","totalPriceLabel","displayItems","getDisplayItems","emailRequired","callbackIntents","shippingAddressRequired","shippingAddressParameters","shippingOptionRequired","shippingOptions","getShippingOptions","shippingOptionParameters","getSelectedShippingOptionId","paymentDataRequest","createPaymentDataRequest","allowedPaymentMethods","parameters","assuranceDetailsRequired","billingAddressRequired","billingAddressParameters","format","phoneNumberRequired","loadPaymentData","address1","address2","parseResponse","statusCode","canPay","GooglePayContainer","setGooglePayInstance","useExpressBreakpointWidth","useCreatePaymentsClient","removeButton","lastChild","removeChild","createGooglePay","googlePayVersion","googleMerchantId","button","createButton","isReadyToPay","apiVersion","apiVersionMinor","innerWidth","windowWidth","setWindowWidth","minWidth","getFromCache","storeInCache","clientWidth","onWindowResize","addEventListener","removeEventListener","element","setElement","parentNode","setDataCollector","kount","createErrorNotice","showCardSelector","selectedCard","selectionChanged","context","setNotice","getErrorMessage","onShippingRateSuccess","onShippingRateFail","onShippingRateSelectSuccess","handleShippingChange","get","isSelectingRate","shippingRatesLoading","Boolean","pop","handleShippingRateFail","addPaymentEventHandler","execute","addShippingMethodHandler","addShippingAddressHandler","unsubscribeShippingRateSuccess","unsubscribeShippingRateSelectSuccess","unsubscribeShippingRateFail","braintree_cc_nonce_key","braintree_cc_save_method","processingResponse","paymentDetails","braintreeErrorMessage","ERROR","settings","setInstance","verifyCard","bin","challengeRequested","collectDeviceData","surname","slice","additionalInformation","shippingGivenName","shippingSurname","ipAddress","onLookupComplete","next","threeDSecureInfo","teardown","useLoadPayPal","paypalCheckoutInstance","intent","flow","partnerCode","paypal","setPayPal","JSON","parse","atob","clientId","commit","vault","dataAttributes","loadPayPalSDK","usePayPalOptions","paymentData","incompleteBilling","baseStyle","FUNDING","PAYPAL","PAYLATER","getFormattedShippingOptions","onShippingChange","selectedShippingOption","shippingDataEqual","patch","getCartTotalItem","order","sources","fundingSource","option","onApprove","tokenizePayment","line1","line2","recipientName","cartContainsSubscription","createOrder","createPayment","enableShippingAddress","shippingAddressEditable","createBillingAgreement","selected_shipping_option","postal_code","country_code","isShippingOptionEqual","isEqual","Buttons","isEligible","PayPalContainer","setPayPalCheckoutInstance","isPayPalButton","setIsPayPalButton","paypalButton","createPayPalCheckout","merchantAccountId","getMerchantAccount","driver","React","ReactDOM","PayPalButton","BUTTON","OrderItemMessaging","cart","cartTotals","total_price","paypalCheckout","setPayPalCheckout","currencies","isAvailable","Messages","placement","layout","position","color","TotalsWrapper","registerPlugin","ExperimentalOrderMeta","scope","wcBraintreeData","errorMessages","SHIPPING_OPTION_REGEX","merchantAccounts","createClient","SUCCESS","msg","getCacheKey","exp","Math","floor","Date","getTime","sessionStorage","setItem","stringify","defaultValue","getItem","deleteFromCache","removeItem","getCurrency","prefix","suffix","decimalSeparator","thousandSeparator","undefined","parseInt","fractional","index","replace","substr","match","RegExp","packageId","rateId","packageIdx","split","lines","hasSubscription","page","card_type","replacementData","placeholder","token_id","path","venmoInstance","loadVenmo","createVenmo","allowNewBrowserTab","VenmoComponent","setVenmoInstance","VenmoButton","placeOrderButtonLabel","isBrowserSupported","hasOwn","arguments","arg","argType","inner","apply","prototype","call","module","exports","default"],"sourceRoot":""}