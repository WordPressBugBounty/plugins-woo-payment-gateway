{"version":3,"file":"fastlane-checkout.js","mappings":"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","sources":["webpack://woo-payment-gateway/external window \"jQuery\"","webpack://woo-payment-gateway/external window \"lodash\"","webpack://woo-payment-gateway/external window [\"wp\",\"url\"]","webpack://woo-payment-gateway/webpack/bootstrap","webpack://woo-payment-gateway/./assets/js/frontend/fastlane.js"],"sourcesContent":["module.exports = window[\"jQuery\"];","module.exports = window[\"lodash\"];","module.exports = window[\"wp\"][\"url\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import $ from 'jquery';\nimport {isEqual} from 'lodash';\nimport {isEmail} from '@wordpress/url';\n\nclass FastlaneCheckout {\n\n    constructor(props) {\n        this.settings = props.settings;\n        this.components = {};\n        this.currentCard = null;\n        this.canceledEmails = [];\n        this.customerContextId = null;\n    }\n\n    create_instance(client, clientToken) {\n        this.client = client;\n        this.clientToken = clientToken;\n        this.initialize();\n    }\n\n    async initialize() {\n\n        this.addActions();\n\n        await this.initializeDataCollector();\n        await this.createFastlaneInstance();\n        const promises = [];\n        if (this.isEmailDetectionEnabled()) {\n            promises.push(this.mountFastlaneWatermark());\n        }\n        promises.push(this.authenticateOnPageLoad());\n        await Promise.all(promises);\n\n        $('.wc_braintree_banner_gateway_braintree_cc').css('max-width', $('.woocommerce-billing-fields').outerWidth(true));\n    }\n\n    addActions() {\n        $(document.body).on('updated_checkout', this.onUpdatedCheckout.bind(this));\n        $(document.body).on('input', '[name=\"billing_email\"]', this.onEmailChange.bind(this));\n        $(document.body).on('click', '.wc-ppcp-fastlane-button', this.onFastlaneClick.bind(this));\n        $(document.body).on('click', '.wc-ppcp-fastlane-cancel', this.onCloseModal.bind(this));\n        $(document.body).on('click', '.wc-ppcp-fastlane-tokenize', this.onPaymentTokenize.bind(this));\n        $(document.body).on('click', '.wc-ppcp-tokenized-card-cancel', this.cancelTokenizedPayment.bind(this));\n        $(document.body).on('click', '.wc-ppcp-tokenized-card-change', this.changePaymentMethod.bind(this));\n        $(document.body).on('click', '.fastlane-signup-link-container', this.openFastlaneModal.bind(this));\n        $(document.body).on('blur', '.wc-ppcp-fastlane-modal-field', (e) => {\n            $(e.currentTarget).removeClass('focused');\n        });\n        $(document.body).on('keyup', '.wc-ppcp-fastlane-modal-input', e => {\n            if ($(e.currentTarget).val()) {\n                $(e.currentTarget).addClass('not-empty');\n            } else {\n                $(e.currentTarget).removeClass('not-empty');\n            }\n        })\n    }\n\n    hasComponents() {\n        return Object.keys(this.components).length > 0;\n    }\n\n    isEmailDetectionEnabled() {\n        return this.settings.fastlane_flow === 'email_detection';\n    }\n\n    async initializeDataCollector() {\n        try {\n            this.dataCollector = await braintree.dataCollector.create({\n                client: this.client\n            });\n        } catch (error) {\n            console.info('Error setting up data collector.');\n        }\n    }\n\n    async createFastlaneInstance() {\n        try {\n            const fastlane = await braintree.fastlane.create({\n                authorization: this.clientToken,\n                ...(this.dataCollector && {\n                    deviceData: this.dataCollector.deviceData\n                })\n            });\n            if (fastlane) {\n                const {\n                    identity,\n                    profile,\n                    FastlanePaymentComponent,\n                    FastlaneCardComponent,\n                    FastlaneWatermarkComponent\n                } = fastlane;\n\n                this.identity = identity;\n                this.profile = profile;\n                this.components = {\n                    FastlanePaymentComponent,\n                    FastlaneCardComponent,\n                    FastlaneWatermarkComponent\n                }\n            }\n        } catch (error) {\n            console.info('Error creating fastlane instance. ', error);\n            return this.submitError(error, $('form.checkout'));\n        }\n    }\n\n    async onUpdatedCheckout() {\n        if (this.currentCard) {\n            this.displayTokenizedCard(this.mapFromTokenToCard(this.currentCard));\n        }\n        if (this.isEmailDetectionEnabled()) {\n            await this.mountFastlaneWatermark();\n        }\n    }\n\n    async onPaymentTokenize(e) {\n        if (this.paymentComponent) {\n            const $button = $(e.currentTarget);\n            $button.prop('disabled', true);\n            try {\n\n                const response = await this.paymentComponent.getPaymentToken();\n                this.currentCard = response;\n                this.displayTokenizedCard(this.mapFromTokenToCard(this.currentCard));\n                this.prepareCardGatewayForCheckout(this.currentCard);\n                this.onCloseModal();\n                if (response?.paymentSource?.card?.billingAddress) {\n                    let address = response.paymentSource.card.billingAddress;\n                    if (response.paymentSource.card.billingAddress.toBtSdkType) {\n                        address = response.paymentSource.card.billingAddress.toBtSdkType();\n                    } else {\n                        const name = this.extractFullName(response.paymentSource.card.name);\n                        address = {\n                            firstName: name[0],\n                            lastName: name[1],\n                            ...address\n                        }\n                        this.populateShippingAddress(address);\n                    }\n                    await this.updateBillingAddress(address);\n                }\n                this.scrollToPlaceOrder();\n            } catch (error) {\n                this.submitError(error, $('form.checkout'), 'checkout');\n            } finally {\n                $button.prop('disabled', false);\n            }\n        }\n    }\n\n    async mountFastlaneWatermark() {\n        if (this.hasComponents()) {\n            try {\n                if ($('#billing_email_field').length) {\n                    if (!$('#billing_email_field #wc-ppcp-watermark-container').length) {\n                        const component = await this.components.FastlaneWatermarkComponent({includeAdditionalInfo: true});\n                        $('#billing_email_field').append('<div id=\"wc-ppcp-watermark-container\"></div>');\n                        component.render('#wc-ppcp-watermark-container');\n                    }\n                }\n            } catch (error) {\n                console.info('Error mounting watermark. Reason: ', error);\n            }\n        }\n    }\n\n    async authenticateOnPageLoad() {\n        if (this.settings.fastlane_pageload === '1' && $('#billing_email').length) {\n            const email = $('#billing_email').val();\n            if (isEmail(email)) {\n                await this.triggerAuthentication(email, false);\n            }\n        }\n    }\n\n    async onEmailChange(e) {\n        if (this.isEmailDetectionEnabled()) {\n            clearTimeout(this.emailTimeout);\n            this.emailTimeout = setTimeout(async () => {\n                const email = $(e.currentTarget).val();\n                if (!this.canceledEmails.includes(email)) {\n                    if (isEmail(email)) {\n                        await this.triggerAuthentication(email, false);\n                        if (!this.canceledEmails.includes(email)) {\n                            this.showSignupLink();\n                        }\n                    }\n                } else {\n                    this.hideSignupLink();\n                }\n            }, 250);\n        }\n    }\n\n    async onFastlaneClick(e) {\n        e.preventDefault();\n        this.$button = $(e.currentTarget);\n        const email = $('#billing_email').val();\n        try {\n            this.$button.addClass('processing').prop('disabled', true);\n            this.validateEmail(email);\n            await this.triggerAuthentication(email)\n        } catch (error) {\n            return this.submitError(error, $('form.checkout'));\n        } finally {\n            if (this.$button) {\n                this.$button.removeClass('processing').prop('disabled', false);\n            }\n        }\n    }\n\n    async triggerAuthentication(email, showSignup = true) {\n        try {\n            this.authenticationState = null;\n            const {\n                customerContextId\n            } = await this.identity.lookupCustomerByEmail(email);\n            if (customerContextId) {\n                this.customerContextId = customerContextId;\n                const {\n                    profileData,\n                    authenticationState\n                } = await this.identity.triggerAuthenticationFlow(customerContextId);\n\n                this.authenticationState = authenticationState;\n                if (authenticationState === 'canceled') {\n                    this.canceledEmails.push(email);\n                    this.hideSignupLink();\n                } else if (authenticationState === 'succeeded') {\n                    let billingAddress;\n                    let {\n                        name,\n                        card,\n                        shippingAddress\n                    } = profileData;\n\n                    this.currentCard = card;\n\n                    /**\n                     * 1. If shipping is required, show the shipping selector.\n                     * 2. Let them select their payment method.\n                     */\n\n                    if (this.needsShipping()) {\n                        const {\n                            selectedAddress,\n                            ...props\n                        } = await this.profile.showShippingAddressSelector();\n                        if (!selectedAddress) {\n                            this.canceledEmails.push(email);\n                            this.hideSignupLink();\n                            return;\n                        }\n                        shippingAddress = selectedAddress;\n                    }\n\n                    if (card?.paymentSource?.card?.billingAddress) {\n                        billingAddress = card.paymentSource.card.billingAddress;\n                        this.populateBillingAddress({\n                            ...name,\n                            ...billingAddress,\n                            phoneNumber: shippingAddress?.phoneNumber || null\n                        });\n                    }\n                    if (shippingAddress && this.needsShipping()) {\n                        await this.updateShippingAddress(shippingAddress, billingAddress);\n                    }\n                    this.prepareCardGatewayForCheckout(card);\n                    this.displayTokenizedCard(this.mapFromTokenToCard(card));\n                    this.scrollToPlaceOrder();\n                }\n            } else if (showSignup) {\n                await this.openFastlaneModal();\n            }\n        } catch (error) {\n            this.submitError(error, $('form.checkout'));\n        }\n    }\n\n    async openFastlaneModal() {\n        this.customerContextId = null;\n        this.paymentComponent = await this.components.FastlanePaymentComponent({\n            ...(this.needsShipping() && {\n                shippingAddress: this.getFastlaneShippingAddress()\n            })\n        });\n        this.$modal = $(this.settings.html.modal);\n        $(document.body).prepend(this.$modal);\n        $(document.body).addClass('fastlane-modal-open');\n        this.$modal.find('.wc-ppcp-fastlane-modal-field').on('mousedown', (e) => {\n            $(e.currentTarget).addClass('focused');\n        });\n\n        await this.paymentComponent.render('.wc-ppcp-fastlane-modal-body');\n\n        setTimeout(() => {\n            this.$modal.addClass('active');\n        }, 10);\n    }\n\n    onCloseModal() {\n        if (this.$modal) {\n            this.$modal.removeClass('active');\n            setTimeout(() => {\n                this.$modal.remove();\n                this.$modal = null;\n                $(document.body).removeClass('fastlane-modal-open');\n            }, 400);\n        }\n    }\n\n    getFastlaneShippingAddress() {\n        const shippingAddress = {\n            firstName: $('#shipping_first_name').val(),\n            lastName: $('#shipping_last_name').val(),\n            streetAddress: $('#shipping_address_1').val(),\n            extendedAddress: $('#shipping_address_2').val(),\n            locality: $('#shipping_city').val(),\n            region: $('#shipping_state').val(),\n            postalCode: $('#shipping_postcode').val(),\n            countryCodeAlpha2: $('#shipping_country').val(),\n            phoneNumber: $('#billing_phone').val(),\n        }\n        return shippingAddress;\n    }\n\n    mapFromTokenToCard(data) {\n        const card = data.paymentSource.card;\n        return {\n            brand: card.brand,\n            card_type: card.brand,\n            last4: card.lastDigits,\n            expiry: card.expiry\n        }\n    }\n\n    displayTokenizedCard(card) {\n        let text = this.formatPaymentMethod(this.settings.payment_format, card);\n        if (this.$card) {\n            this.$card.remove();\n            this.$card = null;\n        }\n        this.$card = $(this.settings.html.tokenized_card);\n        if (this.customerContextId) {\n            this.$card.addClass('has-customer-context');\n        }\n        this.$card.find('.wc-ppcp-tokenized-card-format').text(text);\n        if (this.settings.icons[card.brand.toLowerCase()]) {\n            const src = this.settings.icons[card.brand.toLowerCase()];\n            this.$card.find('.wc-ppcp-tokenized-card-icon-container img').attr('src', src);\n        }\n\n        $('.payment_box.payment_method_braintree_cc .wc-braintree-payment-gateway').hide();\n        $('.payment_box.payment_method_braintree_cc .wc-braintree-payment-gateway').after(this.$card);\n    }\n\n    cancelTokenizedPayment() {\n        this.currentCard = null;\n        this.authenticationState = null;\n        if (this.$card) {\n            this.$card.remove();\n            this.$card = null;\n            $('.payment_box.payment_method_braintree_cc .wc-braintree-payment-gateway').show();\n            $('#braintree_cc_nonce_key').val('');\n            const cardGateway = wc_braintree.get_payment_method('braintree_cc');\n            cardGateway.set_is_fastlane(false);\n            cardGateway.payment_method_received = false;\n        }\n    }\n\n    async changePaymentMethod() {\n        try {\n            const {\n                selectedCard,\n                selectionChanged\n            } = await this.profile.showCardSelector();\n            if (selectedCard) {\n                this.cancelTokenizedPayment();\n                this.prepareCardGatewayForCheckout(selectedCard);\n                this.displayTokenizedCard(this.mapFromTokenToCard(selectedCard));\n                if (selectedCard?.paymentSource?.card?.billingAddress) {\n                    await this.updateBillingAddress(selectedCard.paymentSource.card.billingAddress);\n                }\n            }\n        } catch (error) {\n            this.submitError(error, $('form.checkout'));\n        }\n    }\n\n    populateBillingAddress(address) {\n        const existing = {\n            firstName: $('#billing_first_name').val(),\n            lastName: $('#billing_last_name').val(),\n            phoneNumber: $('#billing_phone').val()\n        }\n        $('#billing_first_name').val(address?.firstName || existing.firstName);\n        $('#billing_last_name').val(address?.lastName || existing.lastName);\n        $('#billing_address_1').val(address?.streetAddress || '');\n        $('#billing_address_2').val(address?.extendedAddress || '');\n        $('#billing_postcode').val(address?.postalCode || '');\n        $('#billing_city').val(address?.locality || '');\n        $('#billing_state').val(address?.region || '');\n        $('#billing_country').val(address?.countryCodeAlpha2 || '');\n        $('#billing_phone').val(address?.phoneNumber || existing.phoneNumber);\n    }\n\n    populateShippingAddress(shippingAddress) {\n        $('#shipping_first_name').val(shippingAddress?.firstName || '');\n        $('#shipping_last_name').val(shippingAddress?.lastName || '');\n        $('#shipping_address_1').val(shippingAddress?.streetAddress || '');\n        $('#shipping_address_2').val(shippingAddress?.extendedAddress || '');\n        $('#shipping_postcode').val(shippingAddress?.postalCode || '');\n        $('#shipping_city').val(shippingAddress?.locality || '');\n        $('#shipping_state').val(shippingAddress?.region || '');\n        $('#shipping_country').val(shippingAddress?.countryCodeAlpha2 || '');\n        $('#shipping_phone').val(shippingAddress?.phoneNumber || '');\n    }\n\n    updateBillingAddress(address) {\n        return new Promise((resolve) => {\n            this.populateBillingAddress(address);\n            $(document.body).one('updated_checkout', () => {\n                resolve(true);\n            });\n            $(document.body).trigger('update_checkout');\n        });\n    }\n\n    updateShippingAddress(shippingAddress, billingAddress = null) {\n        return new Promise(resolve => {\n            this.populateShippingAddress(shippingAddress);\n            if (billingAddress && !isEqual(billingAddress, shippingAddress)) {\n                if (!$('[name=\"ship_to_different_address\"]').is(':checked')) {\n                    $('[name=\"ship_to_different_address\"]').trigger('click');\n                }\n            }\n            $(document.body).one('updated_checkout', () => {\n                resolve(true);\n            });\n            $(document.body).trigger('update_checkout');\n        });\n    }\n\n    prepareCardGatewayForCheckout(token) {\n        const cardGateway = wc_braintree.get_payment_method('braintree_cc');\n        cardGateway.set_is_fastlane(true);\n        cardGateway.payment_method_received = true;\n        $('#braintree_cc_nonce_key').val(token.id);\n        $('input[name=\"payment_method\"][value=\"braintree_cc\"]').trigger('click');\n        $('#braintree_cc_use_nonce').trigger('click');\n    }\n\n    validateEmail(email) {\n        if (!email) {\n            throw new Error(this.settings.i18n.email_empty);\n        }\n        if (!isEmail(email)) {\n            throw new Error(this.settings.i18n.email_invalid);\n        }\n    }\n\n    scrollToPlaceOrder() {\n        const $el = $('#place_order');\n        if ($el.length) {\n            $('html, body').animate(\n                {\n                    scrollTop: $el.offset().top - 200,\n                },\n                1000\n            );\n        }\n    }\n\n    needsShipping() {\n        return this.settings.needs_shipping;\n    }\n\n    formatPaymentMethod(format, data) {\n        const replacementData = {};\n\n        // Create placeholders from the data object\n        Object.keys(data).forEach(key => {\n            replacementData[`{${key}}`] = data[key];\n        });\n\n        // Replace all placeholders with actual values\n        let result = format;\n        Object.keys(replacementData).forEach(placeholder => {\n            // Use split and join which is more efficient for simple replacements\n            while (result.includes(placeholder)) {\n                result = result.replace(placeholder, replacementData[placeholder]);\n            }\n        });\n\n        return result;\n    }\n\n    submitError(error, $el) {\n        $(document.body).triggerHandler('wc_braintree_submit_error', {\n            error: error,\n            element: $el,\n            ignore: true\n        });\n    }\n\n    extractFullName(name) {\n        const firstName = name.split(' ').slice(0, -1).join(' ');\n        const lastName = name.split(' ').pop();\n        return [firstName, lastName];\n    }\n\n    hideSignupLink() {\n        $('.fastlane-signup-link-container').hide();\n    }\n\n    showSignupLink() {\n        $('.fastlane-signup-link-container').show();\n    }\n\n}\n\nwc_braintree.register(function () {\n    return new FastlaneCheckout({\n        settings: wc_braintree_fastlane_params\n    })\n});"],"names":["module","exports","window","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","i","FastlaneCheckout","props","this","settings","components","currentCard","canceledEmails","customerContextId","client","clientToken","initialize","addActions","initializeDataCollector","createFastlaneInstance","promises","isEmailDetectionEnabled","push","mountFastlaneWatermark","authenticateOnPageLoad","Promise","all","$","css","outerWidth","document","body","on","onUpdatedCheckout","bind","onEmailChange","onFastlaneClick","onCloseModal","onPaymentTokenize","cancelTokenizedPayment","changePaymentMethod","openFastlaneModal","e","currentTarget","removeClass","val","addClass","Object","keys","length","fastlane_flow","braintree","dataCollector","create","console","info","fastlane","authorization","deviceData","identity","profile","FastlanePaymentComponent","FastlaneCardComponent","FastlaneWatermarkComponent","submitError","displayTokenizedCard","mapFromTokenToCard","paymentComponent","$button","prop","getPaymentToken","response","prepareCardGatewayForCheckout","paymentSource","card","billingAddress","address","toBtSdkType","name","extractFullName","firstName","lastName","populateShippingAddress","updateBillingAddress","scrollToPlaceOrder","hasComponents","includeAdditionalInfo","component","append","render","fastlane_pageload","email","isEmail","triggerAuthentication","clearTimeout","emailTimeout","setTimeout","includes","showSignupLink","hideSignupLink","preventDefault","validateEmail","showSignup","authenticationState","lookupCustomerByEmail","triggerAuthenticationFlow","profileData","shippingAddress","needsShipping","showShippingAddressSelector","selectedAddress","populateBillingAddress","phoneNumber","updateShippingAddress","getFastlaneShippingAddress","$modal","html","modal","prepend","find","remove","streetAddress","extendedAddress","locality","region","postalCode","countryCodeAlpha2","data","brand","card_type","last4","lastDigits","expiry","text","formatPaymentMethod","payment_format","$card","tokenized_card","icons","toLowerCase","src","attr","hide","after","show","cardGateway","wc_braintree","get_payment_method","set_is_fastlane","payment_method_received","showCardSelector","selectedCard","selectionChanged","existing","resolve","one","trigger","isEqual","is","token","id","Error","i18n","email_empty","email_invalid","$el","animate","scrollTop","offset","top","needs_shipping","format","replacementData","forEach","key","result","placeholder","replace","error","triggerHandler","element","ignore","split","slice","join","pop","register","wc_braintree_fastlane_params"],"sourceRoot":""}